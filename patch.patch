From e48a95695289b0d47e6f3df8605f4d4e4c2fa614 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sun, 6 Aug 2017 19:11:16 +0200
Subject: [PATCH 01/17] Add chef.

---
 chef/chef.yml        | 126 +++++++++++++++++++++++++++++++++++++++++++++++++++
 chef/chef__local.yml |  22 +++++++++
 2 files changed, 148 insertions(+)
 create mode 100644 chef/chef.yml
 create mode 100644 chef/chef__local.yml

diff --git a/chef/chef.yml b/chef/chef.yml
new file mode 100644
index 0000000..36f6e8c
--- /dev/null
+++ b/chef/chef.yml
@@ -0,0 +1,126 @@
+﻿id: 'magentocommerce'
+deployers:
+  # App is the artifact itself, other deployers
+  # depend on this one!
+  app: 
+    type: 'app'
+  iis:
+    type: 'iis'
+    pools:
+      default:
+        Enable32BitAppOnWin64: true
+        AutoStart: true
+        ManagedPipelineMode: Integrated
+        StartMode: AlwaysRunning
+        ManagedRuntimeVersion: ''
+    mounts:
+      root:
+        root: true
+        path: '/'
+    bindings:
+      local:
+        # Binding will be mounted through HOSTS file
+        # automatically when using interface = 'local'
+        hostname: 'local.magentocommerce.com'
+        port: 80
+        interface: 'local'
+  php:
+    type: 'php'
+    runtime:
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/releases/archives/php-7.0.17-nts-Win32-VC14-x64.zip', maps: {'*' : 'php/'}}
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/xdebug/2.5.3/php_xdebug-2.5.3-7.0-nts-vc14-x64.zip', maps: {'php_xdebug.dll':'php/ext/php_xdebug.dll'}}
+      - {type: 'dl', uri: 'https://ci.appveyor.com/api/buildjobs/7b47bfc24eynberd/artifacts/x64%2FRelease%2Fphp_tideways.dll' , maps: {'x64%2FRelease%2Fphp_tideways.dll':'php/ext/php_tideways.dll'}}
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/igbinary/2.0.1/php_igbinary-2.0.1-7.0-nts-vc14-x64.zip', maps: {'php_igbinary.dll': 'php/ext/php_igbinary.dll'}}
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/wincache/2.0.0.8/php_wincache-2.0.0.8-7.0-nts-vc14-x64.zip', maps: {'php_wincache.dll': 'php/ext/php_wincache.dll'}}
+ # CERTIFICATES
+      - {type: 'dl', uri: 'http://curl.haxx.se/ca/cacert.pem', maps: {'cacert.pem': '/cacert.pem'}}
+      - {type: 'file', 'action':'copy', 'source':'php/php.ini-production', 'destination':'php/php.ini'}
+      - {type: 'ini', 'key':curl.cainfo, 'value':'%RUNTIME%/cacert.pem'}
+      - {type: 'ini', 'key':openssl.cafile, 'value':'%RUNTIME%/cacert.pem'}
+ # EXTENSION DIR
+      - {type: 'ini', 'key':extension_dir, 'value':'%RUNTIME%/php/ext'}
+ # EXTENSION SETTINGS
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_intl.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_bz2.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_curl.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_enchant.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_exif.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_fileinfo.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_gettext.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_gd2.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_mbstring.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_openssl.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_soap.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_xmlrpc.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_wincache.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_pdo_mysql.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_xsl.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_igbinary.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_tideways.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_com_dotnet.dll}
+      - {type: 'ini', multivalue: true, 'key':zend_extension, 'value':php_opcache.dll}
+ # MYSQL
+      - {type: 'ini', 'key':pdo_mysql.cache_size, 'value':2000}
+      - {type: 'ini', 'key':mysql.allow_persistent, 'value':On}    
+ # RUNTIME DIRECTORIES
+      - {type: 'ini', 'key':error_log, 'value':'%LOG%/php_error_%DEPLOYMENTID%.log', ensureDir: 'file'}
+      - {type: 'ini', 'key':upload_tmp_dir, 'value':'%TEMP%/upload_temp_dir', ensureDir: 'dir'}
+      - {type: 'ini', 'key':session.save_path, 'value':'%TEMP%/session_save_path/', ensureDir: 'file'}
+      - {type: 'ini', 'key':date.timezone, 'value':'Europe/Madrid'} 
+ # WINCACHE...
+      - {type: 'ini', 'key':wincache.fcenabled, 'value': 0}
+      - {type: 'ini', 'key':wincache.ucenabled, 'value': 1}
+      - {type: 'ini', 'key':wincache.fcachesize , 'value': 8}
+      - {type: 'ini', 'key':wincache.maxfilesize, 'value': 3000}
+      - {type: 'ini', 'key':wincache.ucachesize , 'value': 128}
+      - {type: 'ini', 'key':wincache.scachesize , 'value': 16}
+      - {type: 'ini', 'key':wincache.reroute_enabled , 'value': 0}
+      - {type: 'ini', 'key':wincache.filemapdir , 'value':'%RUNTIME%/wincache_filemap', ensureDir: 'dir'}
+      - {type: 'ini', 'key':wincache.enablecli , 'value':'On'}
+# TIDEWAYS
+      - {type: 'ini','key':tideways.api_key , 'value': 'xxx'}
+      - {type: 'ini','key':tideways.auto_prepend_library , 'value': 0}
+      - {type: 'ini','key':tideways.connection , 'value': 'tcp://127.0.0.1:8136'}
+      - {type: 'ini','key':tideways.sample_rate , 'value': 10}
+      - {type: 'ini','key':tideways.auto_start , 'value': 1}
+# GENERIC
+      - {type: 'ini','key':fastcgi.impersonate , 'value': 1}
+      - {type: 'ini','key':cgi.fix_pathinfo , 'value': 1}
+      - {type: 'ini','key':cgi.force_redirect , 'value': 0}
+      - {type: 'ini','key':fastcgi.logging , 'value': 0}
+      - {type: 'ini','key':realpath_cache_size , 'value': '5M'}
+      - {type: 'ini','key':realpath_cache_ttl , 'value': 1800}
+      - {type: 'ini','key':max_input_vars , 'value': 6000}
+      - {type: 'ini','key':memory_limit , 'value': 2048M}
+      - {type: 'ini','key':max_input_vars , 'value': 6000}
+      - {type: 'ini','key':max_execution_time , 'value': 600}
+      - {type: 'ini','key':upload_max_filesize , 'value': 32M}
+      - {type: 'ini','key':post_max_size , 'value': 32M}
+# OPCACHE
+      - {type: 'ini','key':opcache.enable , 'value': 1}
+      - {type: 'ini','key':opcache.memory_consumption , 'value': 256}
+      - {type: 'ini','key':opcache.max_accelerated_files , 'value': 25000}
+      - {type: 'ini','key':opcache.revalidate_freq , 'value': 3600}
+      - {type: 'ini','key':opcache.interned_strings_buffer , 'value': 16}
+      - {type: 'ini','key':opcache.validate_timestamps , 'value': 0}
+      - {type: 'ini','key':opcache.enable_cli , 'value': 1}
+      - {type: 'ini','key':opcache.file_cache_only , 'value': 0}
+      - {type: 'ini','key':opcache.file_cache , 'value':'%RUNTIME%/opcache_filecache', ensureDir: 'dir'}
+services:
+  contents:
+    type: 'disk'
+    mounts:
+      var:
+        path: 'var'
+        mountpath: 'var'
+      pub_static:
+        path: 'pub_static'
+        mountpath: 'pub/static'
+      pub_media:
+        path: 'pub_media'
+        mountpath: 'pub/media'
+  cron:
+    type: 'scheduler'
+    command: 'php bin\magento cron:run'
+    frequency: 5
+
diff --git a/chef/chef__local.yml b/chef/chef__local.yml
new file mode 100644
index 0000000..0f9365d
--- /dev/null
+++ b/chef/chef__local.yml
@@ -0,0 +1,22 @@
+﻿# Only use this for environment with name "local"
+scope-environment-regex: 'local.*'
+deployers:
+  php:
+    runtime:
+      - {type: 'ini', multivalue: true, 'key':zend_extension, 'value':php_xdebug.dll}
+      - {type: 'ini','key':opcache.revalidate_freq , 'value': 10}
+      - {type: 'ini','key':opcache.validate_timestamps , 'value': 1}
+       # XDEBUG
+      - {type: 'ini', 'key':'xdebug.remote_enable', 'value':'on'} 
+      - {type: 'ini', 'key':'xdebug.remote_handler', 'value':'dbgp'} 
+      - {type: 'ini', 'key':'xdebug.remote_host', 'value':'127.0.0.1'} 
+      - {type: 'ini', 'key':'xdebug.remote_connect_back', 'value':'0'} 
+      - {type: 'ini', 'key':'xdebug.remote_port', 'value':'9000'} 
+      - {type: 'ini', 'key':'xdebug.remote_mode', 'value':'req'} 
+      - {type: 'ini', 'key':'xdebug.remote_autostart', 'value':'0'} 
+      - {type: 'ini', 'key':'xdebug.idekey', 'value':'php-vs'}  
+      - {type: 'ini', 'key':'xdebug.profiler_output_dir', 'value':'%LOG%/xdebug_profile', ensureDir: 'dir'}
+      - {type: 'ini', 'key':'xdebug.trace_output_dir', 'value':'%LOG%/xdebug_trace', ensureDir: 'dir'}
+      - {type: 'ini', 'key':'xdebug.remote_log', 'value':'%LOG%/remote_%DEPLOYMENTID%.log', ensureDir: 'file'}
+      - {type: 'ini', 'key':'xdebug.trace_output_name', 'value':'trace.%u'}
+      - {type: 'ini', 'key':'xdebug.profiler_output_name', 'value':'profile.%u'}  
\ No newline at end of file

From 922848ba304d89211a7cddfd6e84c3d2d3557edc Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sun, 6 Aug 2017 19:41:24 +0200
Subject: [PATCH 02/17] Persist on deploy.

---
 chef/chef.yml | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/chef/chef.yml b/chef/chef.yml
index 36f6e8c..2619bed 100644
--- a/chef/chef.yml
+++ b/chef/chef.yml
@@ -113,12 +113,15 @@ services:
       var:
         path: 'var'
         mountpath: 'var'
+        persist_on_deploy: true
       pub_static:
         path: 'pub_static'
         mountpath: 'pub/static'
+        persist_on_deploy: true
       pub_media:
         path: 'pub_media'
         mountpath: 'pub/media'
+        persist_on_deploy: true
   cron:
     type: 'scheduler'
     command: 'php bin\magento cron:run'

From 75d8425c10204f3ebab053dad5fc75cee15245e7 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sun, 6 Aug 2017 22:32:30 +0200
Subject: [PATCH 03/17] Fixes.

---
 .gitignore       |   2 ++
 chef/chef.yml    |   2 +-
 pub/web.config   |  27 +++++++++++++++
 setup/web.config |   9 +++++
 web.config       | 102 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 141 insertions(+), 1 deletion(-)
 create mode 100644 pub/web.config
 create mode 100644 setup/web.config
 create mode 100644 web.config

diff --git a/.gitignore b/.gitignore
index 9269cef..10daee8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -49,3 +49,5 @@ atlassian*
 !/var/.htaccess
 /vendor/*
 !/vendor/.htaccess
+
+chef-runtime.path
diff --git a/chef/chef.yml b/chef/chef.yml
index 2619bed..2f86ed3 100644
--- a/chef/chef.yml
+++ b/chef/chef.yml
@@ -124,6 +124,6 @@ services:
         persist_on_deploy: true
   cron:
     type: 'scheduler'
-    command: 'php bin\magento cron:run'
+    commands: ['php bin\magento cron:run', 'php bin\magento setup:cron:run']
     frequency: 5
 
diff --git a/pub/web.config b/pub/web.config
new file mode 100644
index 0000000..608c3d0
--- /dev/null
+++ b/pub/web.config
@@ -0,0 +1,27 @@
+<configuration>
+	<system.webServer>
+		<rewrite>
+			<rules>
+				<clear />
+				<!-- HTTP_AUTHORIZATION variable removed-->
+				<rule name="TRACE and TRACK HTTP methods 2" stopProcessing="true">
+					<match url=".*" ignoreCase="false" />
+					<conditions>
+						<!-- TRACE and TRACK HTTP methods disabled to prevent XSS attacks-->
+						<add input="{REQUEST_METHOD}" pattern="^TRAC[EK]" ignoreCase="false" />
+					</conditions>
+					<action type="Redirect" redirectType="Temporary" url="{R:0}" />
+				</rule>
+				<rule name="Route requests to index.php 2" stopProcessing="true">
+					<match url=".*" ignoreCase="false" />
+					<conditions>
+						<add input="{URL}" pattern="^/(media|skin|js)/" ignoreCase="false" negate="true" />
+						<add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
+						<add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
+					</conditions>
+					<action type="Rewrite" url="index.php" />
+				</rule>
+			</rules>
+		</rewrite>
+	</system.webServer>
+</configuration>
\ No newline at end of file
diff --git a/setup/web.config b/setup/web.config
new file mode 100644
index 0000000..0d59be0
--- /dev/null
+++ b/setup/web.config
@@ -0,0 +1,9 @@
+<configuration>
+	<system.webServer>
+		<rewrite>
+			<rules>
+				<clear/>
+			</rules>
+		</rewrite>
+	</system.webServer>
+</configuration>
diff --git a/web.config b/web.config
new file mode 100644
index 0000000..b503485
--- /dev/null
+++ b/web.config
@@ -0,0 +1,102 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<configuration>
+	<system.webServer>
+		<rewrite>
+			<rules>
+				<!-- HTTP_AUTHORIZATION variable removed-->
+				<rule name="TRACE and TRACK HTTP methods" stopProcessing="true">
+					<match url=".*" ignoreCase="false" />
+					<conditions>
+						<!-- TRACE and TRACK HTTP methods disabled to prevent XSS attacks-->
+						<add input="{REQUEST_METHOD}" pattern="^TRAC[EK]" ignoreCase="false" />
+					</conditions>
+					<action type="Redirect" redirectType="Temporary" url="{R:0}" />
+				</rule>
+				<!--rewrite everything else to index.php-->
+				<rule name="Rewrite everything to index.php" stopProcessing="true">
+					<match url=".*" ignoreCase="false" />
+					<conditions>
+						<add input="{URL}" pattern="^/(media|skin|js)/" ignoreCase="false" negate="true" />
+						<add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
+						<add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
+						<!--Symbolic link filetype does not exists in Windows/IIS -->
+					</conditions>
+					<action type="Rewrite" url="index.php" />
+				</rule>
+			</rules>
+		</rewrite>
+		<modules>
+			<remove name="UrlAuthorization" />
+			<add name="UrlAuthorization" type="System.Web.Security.UrlAuthorizationModule"  />
+		</modules>
+		<!--<security>
+			<authorization>
+				<remove users="*" roles="" verbs="" />
+			</authorization>
+		</security>-->
+	</system.webServer>
+	<!--https://stackoverflow.com/questions/37078383/deny-all-files-in-a-directory-via-web-config-setting/37080857#37080857-->
+	<location path="app">
+		<system.webServer>
+			<security>
+				<authorization>
+					<remove users="*" roles="" verbs="" />
+				</authorization>
+			</security>
+		</system.webServer>
+	</location>
+	<location path="vendor">
+		<system.webServer>
+			<security>
+				<authorization>
+					<remove users="*" roles="" verbs="" />
+				</authorization>
+			</security>
+		</system.webServer>
+	</location>
+	<location path="update">
+		<system.webServer>
+			<security>
+				<authorization>
+					<remove users="*" roles="" verbs="" />
+				</authorization>
+			</security>
+		</system.webServer>
+	</location>
+	<location path="lib">
+		<system.webServer>
+			<security>
+				<authorization>
+					<remove users="*" roles="" verbs="" />
+				</authorization>
+			</security>
+		</system.webServer>
+	</location>
+	<location path="bin">
+		<system.webServer>
+			<security>
+				<authorization>
+					<remove users="*" roles="" verbs="" />
+				</authorization>
+			</security>
+		</system.webServer>
+	</location>
+	<location path="chef">
+		<system.webServer>
+			<security>
+				<authorization>
+					<remove users="*" roles="" verbs="" />
+				</authorization>
+			</security>
+		</system.webServer>
+	</location>
+	<!--<location path="index.php">
+		<system.webServer>
+			<security>
+				<authorization>
+					<add accessType="Allow" users="*" roles="" />
+				</authorization>
+			</security>
+		</system.webServer>
+	</location>-->
+</configuration>
\ No newline at end of file

From a381ff2182240b06a70470b98d45377f17b5bd13 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sun, 6 Aug 2017 23:09:57 +0200
Subject: [PATCH 04/17] Add dev folder.

---
 dev/quick/_secure.inc          |   19 +
 dev/quick/info.php             |   87 ++
 dev/quick/memcache.php         |  884 +++++++++++++++++++++
 dev/quick/opc.php              |  769 ++++++++++++++++++
 dev/quick/registry_rebuild.php |  289 +++++++
 dev/quick/request.php          |    7 +
 dev/quick/wincache.php         | 1713 ++++++++++++++++++++++++++++++++++++++++
 7 files changed, 3768 insertions(+)
 create mode 100644 dev/quick/_secure.inc
 create mode 100644 dev/quick/info.php
 create mode 100644 dev/quick/memcache.php
 create mode 100644 dev/quick/opc.php
 create mode 100644 dev/quick/registry_rebuild.php
 create mode 100644 dev/quick/request.php
 create mode 100644 dev/quick/wincache.php

diff --git a/dev/quick/_secure.inc b/dev/quick/_secure.inc
new file mode 100644
index 0000000..e7a11b8
--- /dev/null
+++ b/dev/quick/_secure.inc
@@ -0,0 +1,19 @@
+<?php
+define('ADMIN_USERNAME','magento'); 	// Admin Username
+define('ADMIN_PASSWORD','magento');  	// Admin Password
+////////// END OF DEFAULT CONFIG AREA /////////////////////////////////////////////////////////////
+
+///////////////// Password protect ////////////////////////////////////////////////////////////////
+if (!isset($_SERVER['PHP_AUTH_USER']) || !isset($_SERVER['PHP_AUTH_PW']) ||
+           $_SERVER['PHP_AUTH_USER'] != ADMIN_USERNAME ||$_SERVER['PHP_AUTH_PW'] != ADMIN_PASSWORD) {
+  Header("WWW-Authenticate: Basic realm=\"Memcache Login\"");
+  Header("HTTP/1.0 401 Unauthorized");
+
+  echo <<<EOB
+				<html><body>
+				<h1>Rejected!</h1>
+				<big>Wrong Username or Password!</big>
+				</body></html>
+EOB;
+  exit;
+}
\ No newline at end of file
diff --git a/dev/quick/info.php b/dev/quick/info.php
new file mode 100644
index 0000000..7ad7382
--- /dev/null
+++ b/dev/quick/info.php
@@ -0,0 +1,87 @@
+<?php
+include_once('_secure.inc');
+?>
+
+<?php
+$extras = [
+  'get_current_user()' => get_current_user(),
+  'getmyuid()' => getmyuid(),
+  'getmygid()' => getmygid(),
+  'getmypid()' => getmypid(),
+  'getmyinode()' => getmyinode(),
+  'getlastmod()' => getlastmod(),
+  'realpath_cache_size() [Kb]' => round(realpath_cache_size() / 1024, 0),
+  ];
+
+$extras = array_merge($extras, openssl_get_cert_locations());
+
+/**
+ * Loads the chef runtime settings.
+ */
+if (!function_exists('loadChefSettings')) {
+  function loadChefSettings() {
+    $salt = $_SERVER['DOCUMENT_ROOT'] ?? ($_SERVER['APPL_PHYSICAL_PATH'] ?? __FILE__);
+    $cache_key = $salt . ':chefsettings';
+    if ($settings = @wincache_ucache_get($cache_key)) {
+      $_SERVER['CHEF_SETTINGS'] = $settings;
+      return;
+    }
+    // Look for the file a couple of levels up...
+    $depth = 0;
+    $contentsFile = NULL;
+    $contentsDir = NULL;
+    while ($contentsFile == NULL && $depth < 3) {
+      $prefix = '';
+      for ($x = 0; $x < $depth; $x++) {
+        $prefix .= '../';
+      }
+      if ($contentsDir = @file_get_contents($prefix . 'chef-runtime.path')) {
+        break;
+      }
+      $depth++;
+    }
+    if ($settingsFile = @file_get_contents($contentsDir . '\\chef-settings.json')) {
+      $_SERVER['CHEF_SETTINGS'] = json_decode($settingsFile, TRUE);
+      if ($_SERVER['CHEF_SETTINGS'] == NULL
+        && json_last_error() !== \JSON_ERROR_NONE) {
+        throw new \Exception("Error parsing chef settings file: " . json_last_error_msg());
+      }
+      @wincache_ucache_set($cache_key, $_SERVER['CHEF_SETTINGS']);
+    }
+  }
+}
+
+loadChefSettings();
+
+?>
+
+<center>
+  <h2>General settings</h2>
+  <table>
+    <?php foreach ($extras as $name => $value) { ?>
+    <tr>
+      <td>
+        <?=$name?>
+      </td>
+      <td>
+        <?=$value?>
+      </td>
+    </tr>
+    <?php } ?>
+  </table>
+  <h2>Chef settings</h2>
+  <table>
+    <?php foreach ($_SERVER['CHEF_SETTINGS'] ?? [] as $name => $value) { ?>
+    <tr>
+      <td>
+        <?=$name?>
+      </td>
+      <td>
+        <?=$value?>
+      </td>
+    </tr>
+    <?php } ?>
+  </table>
+</center>
+
+<?php echo phpinfo(); ?>
\ No newline at end of file
diff --git a/dev/quick/memcache.php b/dev/quick/memcache.php
new file mode 100644
index 0000000..031dfd2
--- /dev/null
+++ b/dev/quick/memcache.php
@@ -0,0 +1,884 @@
+<?php
+include_once('_secure.inc');
+
+/*
+  +----------------------------------------------------------------------+
+  | PHP Version 5                                                        |
+  +----------------------------------------------------------------------+
+  | Copyright (c) 1997-2004 The PHP Group                                |
+  +----------------------------------------------------------------------+
+  | This source file is subject to version 3.0 of the PHP license,       |
+  | that is bundled with this package in the file LICENSE, and is        |
+  | available through the world-wide-web at the following url:           |
+  | http://www.php.net/license/3_0.txt.                                  |
+  | If you did not receive a copy of the PHP license and are unable to   |
+  | obtain it through the world-wide-web, please send a note to          |
+  | license@php.net so we can mail you a copy immediately.               |
+  +----------------------------------------------------------------------+
+  | Author:  Harun Yayli <harunyayli at gmail.com>                       |
+  +----------------------------------------------------------------------+
+*/
+
+$VERSION='$Id: memcache.php 326707 2012-07-19 19:02:42Z ab $';
+
+define('DATE_FORMAT','Y/m/d H:i:s');
+define('GRAPH_SIZE',200);
+define('MAX_ITEM_DUMP',50);
+
+$MEMCACHE_SERVERS[] = '127.0.0.1:11211'; // add more as an array
+//$MEMCACHE_SERVERS[] = 'mymemcache-server2:11211'; // add more as an array
+
+
+////////// END OF DEFAULT CONFIG AREA /////////////////////////////////////////////////////////////
+
+///////////MEMCACHE FUNCTIONS /////////////////////////////////////////////////////////////////////
+
+function get_host_port_from_server($server){
+	$values = explode(':', $server);
+	if (($values[0] == 'unix') && (!is_numeric( $values[1]))) {
+		return array($server, 0);
+	}
+	else {
+		return $values;
+	}
+}
+
+function sendMemcacheCommands($command){
+    global $MEMCACHE_SERVERS;
+	$result = array();
+
+	foreach($MEMCACHE_SERVERS as $server){
+		$strs = get_host_port_from_server($server);
+		$host = $strs[0];
+		$port = $strs[1];
+		$result[$server] = sendMemcacheCommand($host,$port,$command);
+	}
+	return $result;
+}
+function sendMemcacheCommand($server,$port,$command){
+
+	$s = @fsockopen($server,$port);
+	if (!$s){
+		die("Cant connect to:".$server.':'.$port);
+	}
+
+	fwrite($s, $command."\r\n");
+
+	$buf='';
+	while ((!feof($s))) {
+		$buf .= fgets($s, 256);
+		if (strpos($buf,"END\r\n")!==false){ // stat says end
+		    break;
+		}
+		if (strpos($buf,"DELETED\r\n")!==false || strpos($buf,"NOT_FOUND\r\n")!==false){ // delete says these
+		    break;
+		}
+		if (strpos($buf,"OK\r\n")!==false){ // flush_all says ok
+		    break;
+		}
+	}
+    fclose($s);
+    return parseMemcacheResults($buf);
+}
+function parseMemcacheResults($str){
+    
+	$res = array();
+	$lines = explode("\r\n",$str);
+	$cnt = count($lines);
+	for($i=0; $i< $cnt; $i++){
+	    $line = $lines[$i];
+		$l = explode(' ',$line,3);
+		if (count($l)==3){
+			$res[$l[0]][$l[1]]=$l[2];
+			if ($l[0]=='VALUE'){ // next line is the value
+			    $res[$l[0]][$l[1]] = array();
+			    list ($flag,$size)=explode(' ',$l[2]);
+			    $res[$l[0]][$l[1]]['stat']=array('flag'=>$flag,'size'=>$size);
+			    $res[$l[0]][$l[1]]['value']=$lines[++$i];
+			}
+		}elseif($line=='DELETED' || $line=='NOT_FOUND' || $line=='OK'){
+		    return $line;
+		}
+	}
+	return $res;
+
+}
+
+function dumpCacheSlab($server,$slabId,$limit){
+    list($host,$port) = get_host_port_from_server($server);
+    $resp = sendMemcacheCommand($host,$port,'stats cachedump '.$slabId.' '.$limit);
+
+   return $resp;
+
+}
+
+function flushServer($server){
+    list($host,$port) = get_host_port_from_server($server);
+    $resp = sendMemcacheCommand($host,$port,'flush_all');
+    return $resp;
+}
+function getCacheItems(){
+ $items = sendMemcacheCommands('stats items');
+ $serverItems = array();
+ $totalItems = array();
+ foreach ($items as $server=>$itemlist){
+    $serverItems[$server] = array();
+    $totalItems[$server]=0;
+    if (!isset($itemlist['STAT'])){
+        continue;
+    }
+
+    $iteminfo = $itemlist['STAT'];
+
+    foreach($iteminfo as $keyinfo=>$value){
+        if (preg_match('/items\:(\d+?)\:(.+?)$/',$keyinfo,$matches)){
+            $serverItems[$server][$matches[1]][$matches[2]] = $value;
+            if ($matches[2]=='number'){
+                $totalItems[$server] +=$value;
+            }
+        }
+    }
+ }
+ return array('items'=>$serverItems,'counts'=>$totalItems);
+}
+function getMemcacheStats($total=true){
+	$resp = sendMemcacheCommands('stats');
+	if ($total){
+		$res = array();
+		foreach($resp as $server=>$r){
+			foreach($r['STAT'] as $key=>$row){
+				if (!isset($res[$key])){
+					$res[$key]=null;
+				}
+				switch ($key){
+					case 'pid':
+						$res['pid'][$server]=$row;
+						break;
+					case 'uptime':
+						$res['uptime'][$server]=$row;
+						break;
+					case 'time':
+						$res['time'][$server]=$row;
+						break;
+					case 'version':
+						$res['version'][$server]=$row;
+						break;
+					case 'pointer_size':
+						$res['pointer_size'][$server]=$row;
+						break;
+					case 'rusage_user':
+						$res['rusage_user'][$server]=$row;
+						break;
+					case 'rusage_system':
+						$res['rusage_system'][$server]=$row;
+						break;
+					case 'curr_items':
+						$res['curr_items']+=$row;
+						break;
+					case 'total_items':
+						$res['total_items']+=$row;
+						break;
+					case 'bytes':
+						$res['bytes']+=$row;
+						break;
+					case 'curr_connections':
+						$res['curr_connections']+=$row;
+						break;
+					case 'total_connections':
+						$res['total_connections']+=$row;
+						break;
+					case 'connection_structures':
+						$res['connection_structures']+=$row;
+						break;
+					case 'cmd_get':
+						$res['cmd_get']+=$row;
+						break;
+					case 'cmd_set':
+						$res['cmd_set']+=$row;
+						break;
+					case 'get_hits':
+						$res['get_hits']+=$row;
+						break;
+					case 'get_misses':
+						$res['get_misses']+=$row;
+						break;
+					case 'evictions':
+						$res['evictions']+=$row;
+						break;
+					case 'bytes_read':
+						$res['bytes_read']+=$row;
+						break;
+					case 'bytes_written':
+						$res['bytes_written']+=$row;
+						break;
+					case 'limit_maxbytes':
+						$res['limit_maxbytes']+=$row;
+						break;
+					case 'threads':
+						$res['rusage_system'][$server]=$row;
+						break;
+				}
+			}
+		}
+		return $res;
+	}
+	return $resp;
+}
+
+//////////////////////////////////////////////////////
+
+//
+// don't cache this page
+//
+header("Cache-Control: no-store, no-cache, must-revalidate");  // HTTP/1.1
+header("Cache-Control: post-check=0, pre-check=0", false);
+header("Pragma: no-cache");                                    // HTTP/1.0
+
+function duration($ts) {
+    global $time;
+    $years = (int)((($time - $ts)/(7*86400))/52.177457);
+    $rem = (int)(($time-$ts)-($years * 52.177457 * 7 * 86400));
+    $weeks = (int)(($rem)/(7*86400));
+    $days = (int)(($rem)/86400) - $weeks*7;
+    $hours = (int)(($rem)/3600) - $days*24 - $weeks*7*24;
+    $mins = (int)(($rem)/60) - $hours*60 - $days*24*60 - $weeks*7*24*60;
+    $str = '';
+    if($years==1) $str .= "$years year, ";
+    if($years>1) $str .= "$years years, ";
+    if($weeks==1) $str .= "$weeks week, ";
+    if($weeks>1) $str .= "$weeks weeks, ";
+    if($days==1) $str .= "$days day,";
+    if($days>1) $str .= "$days days,";
+    if($hours == 1) $str .= " $hours hour and";
+    if($hours>1) $str .= " $hours hours and";
+    if($mins == 1) $str .= " 1 minute";
+    else $str .= " $mins minutes";
+    return $str;
+}
+
+// create graphics
+//
+function graphics_avail() {
+	return extension_loaded('gd');
+}
+
+function bsize($s) {
+	foreach (array('','K','M','G') as $i => $k) {
+		if ($s < 1024) break;
+		$s/=1024;
+	}
+	return sprintf("%5.1f %sBytes",$s,$k);
+}
+
+// create menu entry
+function menu_entry($ob,$title) {
+	global $PHP_SELF;
+	if ($ob==$_GET['op']){
+	    return "<li><a class=\"child_active\" href=\"$PHP_SELF&op=$ob\">$title</a></li>";
+	}
+	return "<li><a class=\"active\" href=\"$PHP_SELF&op=$ob\">$title</a></li>";
+}
+
+function getHeader(){
+    $header = <<<EOB
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html>
+<head><title>MEMCACHE INFO</title>
+<style type="text/css"><!--
+body { background:white; font-size:100.01%; margin:0; padding:0; }
+body,p,td,th,input,submit { font-size:0.8em;font-family:arial,helvetica,sans-serif; }
+* html body   {font-size:0.8em}
+* html p      {font-size:0.8em}
+* html td     {font-size:0.8em}
+* html th     {font-size:0.8em}
+* html input  {font-size:0.8em}
+* html submit {font-size:0.8em}
+td { vertical-align:top }
+a { color:black; font-weight:none; text-decoration:none; }
+a:hover { text-decoration:underline; }
+div.content { padding:1em 1em 1em 1em; position:absolute; width:97%; z-index:100; }
+
+h1.memcache { background:rgb(153,153,204); margin:0; padding:0.5em 1em 0.5em 1em; }
+* html h1.memcache { margin-bottom:-7px; }
+h1.memcache a:hover { text-decoration:none; color:rgb(90,90,90); }
+h1.memcache span.logo {
+	background:rgb(119,123,180);
+	color:black;
+	border-right: solid black 1px;
+	border-bottom: solid black 1px;
+	font-style:italic;
+	font-size:1em;
+	padding-left:1.2em;
+	padding-right:1.2em;
+	text-align:right;
+	display:block;
+	width:130px;
+	}
+h1.memcache span.logo span.name { color:white; font-size:0.7em; padding:0 0.8em 0 2em; }
+h1.memcache span.nameinfo { color:white; display:inline; font-size:0.4em; margin-left: 3em; }
+h1.memcache div.copy { color:black; font-size:0.4em; position:absolute; right:1em; }
+hr.memcache {
+	background:white;
+	border-bottom:solid rgb(102,102,153) 1px;
+	border-style:none;
+	border-top:solid rgb(102,102,153) 10px;
+	height:12px;
+	margin:0;
+	margin-top:1px;
+	padding:0;
+}
+
+ol,menu { margin:1em 0 0 0; padding:0.2em; margin-left:1em;}
+ol.menu li { display:inline; margin-right:0.7em; list-style:none; font-size:85%}
+ol.menu a {
+	background:rgb(153,153,204);
+	border:solid rgb(102,102,153) 2px;
+	color:white;
+	font-weight:bold;
+	margin-right:0em;
+	padding:0.1em 0.5em 0.1em 0.5em;
+	text-decoration:none;
+	margin-left: 5px;
+	}
+ol.menu a.child_active {
+	background:rgb(153,153,204);
+	border:solid rgb(102,102,153) 2px;
+	color:white;
+	font-weight:bold;
+	margin-right:0em;
+	padding:0.1em 0.5em 0.1em 0.5em;
+	text-decoration:none;
+	border-left: solid black 5px;
+	margin-left: 0px;
+	}
+ol.menu span.active {
+	background:rgb(153,153,204);
+	border:solid rgb(102,102,153) 2px;
+	color:black;
+	font-weight:bold;
+	margin-right:0em;
+	padding:0.1em 0.5em 0.1em 0.5em;
+	text-decoration:none;
+	border-left: solid black 5px;
+	}
+ol.menu span.inactive {
+	background:rgb(193,193,244);
+	border:solid rgb(182,182,233) 2px;
+	color:white;
+	font-weight:bold;
+	margin-right:0em;
+	padding:0.1em 0.5em 0.1em 0.5em;
+	text-decoration:none;
+	margin-left: 5px;
+	}
+ol.menu a:hover {
+	background:rgb(193,193,244);
+	text-decoration:none;
+	}
+
+
+div.info {
+	background:rgb(204,204,204);
+	border:solid rgb(204,204,204) 1px;
+	margin-bottom:1em;
+	}
+div.info h2 {
+	background:rgb(204,204,204);
+	color:black;
+	font-size:1em;
+	margin:0;
+	padding:0.1em 1em 0.1em 1em;
+	}
+div.info table {
+	border:solid rgb(204,204,204) 1px;
+	border-spacing:0;
+	width:100%;
+	}
+div.info table th {
+	background:rgb(204,204,204);
+	color:white;
+	margin:0;
+	padding:0.1em 1em 0.1em 1em;
+	}
+div.info table th a.sortable { color:black; }
+div.info table tr.tr-0 { background:rgb(238,238,238); }
+div.info table tr.tr-1 { background:rgb(221,221,221); }
+div.info table td { padding:0.3em 1em 0.3em 1em; }
+div.info table td.td-0 { border-right:solid rgb(102,102,153) 1px; white-space:nowrap; }
+div.info table td.td-n { border-right:solid rgb(102,102,153) 1px; }
+div.info table td h3 {
+	color:black;
+	font-size:1.1em;
+	margin-left:-0.3em;
+	}
+.td-0 a , .td-n a, .tr-0 a , tr-1 a {
+    text-decoration:underline;
+}
+div.graph { margin-bottom:1em }
+div.graph h2 { background:rgb(204,204,204);; color:black; font-size:1em; margin:0; padding:0.1em 1em 0.1em 1em; }
+div.graph table { border:solid rgb(204,204,204) 1px; color:black; font-weight:normal; width:100%; }
+div.graph table td.td-0 { background:rgb(238,238,238); }
+div.graph table td.td-1 { background:rgb(221,221,221); }
+div.graph table td { padding:0.2em 1em 0.4em 1em; }
+
+div.div1,div.div2 { margin-bottom:1em; width:35em; }
+div.div3 { position:absolute; left:40em; top:1em; width:580px; }
+//div.div3 { position:absolute; left:37em; top:1em; right:1em; }
+
+div.sorting { margin:1.5em 0em 1.5em 2em }
+.center { text-align:center }
+.aright { position:absolute;right:1em }
+.right { text-align:right }
+.ok { color:rgb(0,200,0); font-weight:bold}
+.failed { color:rgb(200,0,0); font-weight:bold}
+
+span.box {
+	border: black solid 1px;
+	border-right:solid black 2px;
+	border-bottom:solid black 2px;
+	padding:0 0.5em 0 0.5em;
+	margin-right:1em;
+}
+span.green { background:#60F060; padding:0 0.5em 0 0.5em}
+span.red { background:#D06030; padding:0 0.5em 0 0.5em }
+
+div.authneeded {
+	background:rgb(238,238,238);
+	border:solid rgb(204,204,204) 1px;
+	color:rgb(200,0,0);
+	font-size:1.2em;
+	font-weight:bold;
+	padding:2em;
+	text-align:center;
+	}
+
+input {
+	background:rgb(153,153,204);
+	border:solid rgb(102,102,153) 2px;
+	color:white;
+	font-weight:bold;
+	margin-right:1em;
+	padding:0.1em 0.5em 0.1em 0.5em;
+	}
+//-->
+</style>
+</head>
+<body>
+<div class="head">
+	<h1 class="memcache">
+		<span class="logo"><a href="http://pecl.php.net/package/memcache">memcache</a></span>
+		<span class="nameinfo">memcache.php by <a href="http://livebookmark.net">Harun Yayli</a></span>
+	</h1>
+	<hr class="memcache">
+</div>
+<div class=content>
+EOB;
+
+    return $header;
+}
+function getFooter(){
+    global $VERSION;
+    $footer = '</div><!-- Based on apc.php '.$VERSION.'--></body>
+</html>
+';
+
+    return $footer;
+
+}
+function getMenu(){
+    global $PHP_SELF;
+echo "<ol class=menu>";
+if ($_GET['op']!=4){
+echo <<<EOB
+    <li><a href="$PHP_SELF&op={$_GET['op']}">Refresh Data</a></li>
+EOB;
+}
+else {
+echo <<<EOB
+    <li><a href="$PHP_SELF&op=2}">Back</a></li>
+EOB;
+}
+echo
+	menu_entry(1,'View Host Stats'),
+	menu_entry(2,'Variables');
+
+echo <<<EOB
+	</ol>
+	<br/>
+EOB;
+}
+
+// TODO, AUTH
+
+$_GET['op'] = !isset($_GET['op'])? '1':$_GET['op'];
+$PHP_SELF= isset($_SERVER['PHP_SELF']) ? htmlentities(strip_tags($_SERVER['PHP_SELF'],'')) : '';
+
+$PHP_SELF=$PHP_SELF.'?';
+$time = time();
+// sanitize _GET
+
+foreach($_GET as $key=>$g){
+    $_GET[$key]=htmlentities($g);
+}
+
+
+// singleout
+// when singleout is set, it only gives details for that server.
+if (isset($_GET['singleout']) && $_GET['singleout']>=0 && $_GET['singleout'] <count($MEMCACHE_SERVERS)){
+    $MEMCACHE_SERVERS = array($MEMCACHE_SERVERS[$_GET['singleout']]);
+}
+
+// display images
+if (isset($_GET['IMG'])){
+    $memcacheStats = getMemcacheStats();
+    $memcacheStatsSingle = getMemcacheStats(false);
+
+    if (!graphics_avail()) {
+		exit(0);
+	}
+
+	function fill_box($im, $x, $y, $w, $h, $color1, $color2,$text='',$placeindex='') {
+		global $col_black;
+		$x1=$x+$w-1;
+		$y1=$y+$h-1;
+
+		imagerectangle($im, $x, $y1, $x1+1, $y+1, $col_black);
+		if($y1>$y) imagefilledrectangle($im, $x, $y, $x1, $y1, $color2);
+		else imagefilledrectangle($im, $x, $y1, $x1, $y, $color2);
+		imagerectangle($im, $x, $y1, $x1, $y, $color1);
+		if ($text) {
+			if ($placeindex>0) {
+
+				if ($placeindex<16)
+				{
+					$px=5;
+					$py=$placeindex*12+6;
+					imagefilledrectangle($im, $px+90, $py+3, $px+90-4, $py-3, $color2);
+					imageline($im,$x,$y+$h/2,$px+90,$py,$color2);
+					imagestring($im,2,$px,$py-6,$text,$color1);
+
+				} else {
+					if ($placeindex<31) {
+						$px=$x+40*2;
+						$py=($placeindex-15)*12+6;
+					} else {
+						$px=$x+40*2+100*intval(($placeindex-15)/15);
+						$py=($placeindex%15)*12+6;
+					}
+					imagefilledrectangle($im, $px, $py+3, $px-4, $py-3, $color2);
+					imageline($im,$x+$w,$y+$h/2,$px,$py,$color2);
+					imagestring($im,2,$px+2,$py-6,$text,$color1);
+				}
+			} else {
+				imagestring($im,4,$x+5,$y1-16,$text,$color1);
+			}
+		}
+	}
+
+
+    function fill_arc($im, $centerX, $centerY, $diameter, $start, $end, $color1,$color2,$text='',$placeindex=0) {
+		$r=$diameter/2;
+		$w=deg2rad((360+$start+($end-$start)/2)%360);
+
+
+		if (function_exists("imagefilledarc")) {
+			// exists only if GD 2.0.1 is avaliable
+			imagefilledarc($im, $centerX+1, $centerY+1, $diameter, $diameter, $start, $end, $color1, IMG_ARC_PIE);
+			imagefilledarc($im, $centerX, $centerY, $diameter, $diameter, $start, $end, $color2, IMG_ARC_PIE);
+			imagefilledarc($im, $centerX, $centerY, $diameter, $diameter, $start, $end, $color1, IMG_ARC_NOFILL|IMG_ARC_EDGED);
+		} else {
+			imagearc($im, $centerX, $centerY, $diameter, $diameter, $start, $end, $color2);
+			imageline($im, $centerX, $centerY, $centerX + cos(deg2rad($start)) * $r, $centerY + sin(deg2rad($start)) * $r, $color2);
+			imageline($im, $centerX, $centerY, $centerX + cos(deg2rad($start+1)) * $r, $centerY + sin(deg2rad($start)) * $r, $color2);
+			imageline($im, $centerX, $centerY, $centerX + cos(deg2rad($end-1))   * $r, $centerY + sin(deg2rad($end))   * $r, $color2);
+			imageline($im, $centerX, $centerY, $centerX + cos(deg2rad($end))   * $r, $centerY + sin(deg2rad($end))   * $r, $color2);
+			imagefill($im,$centerX + $r*cos($w)/2, $centerY + $r*sin($w)/2, $color2);
+		}
+		if ($text) {
+			if ($placeindex>0) {
+				imageline($im,$centerX + $r*cos($w)/2, $centerY + $r*sin($w)/2,$diameter, $placeindex*12,$color1);
+				imagestring($im,4,$diameter, $placeindex*12,$text,$color1);
+
+			} else {
+				imagestring($im,4,$centerX + $r*cos($w)/2, $centerY + $r*sin($w)/2,$text,$color1);
+			}
+		}
+	}
+	$size = GRAPH_SIZE; // image size
+	$image = imagecreate($size+50, $size+10);
+
+	$col_white = imagecolorallocate($image, 0xFF, 0xFF, 0xFF);
+	$col_red   = imagecolorallocate($image, 0xD0, 0x60,  0x30);
+	$col_green = imagecolorallocate($image, 0x60, 0xF0, 0x60);
+	$col_black = imagecolorallocate($image,   0,   0,   0);
+
+	imagecolortransparent($image,$col_white);
+
+    switch ($_GET['IMG']){
+        case 1: // pie chart
+            $tsize=$memcacheStats['limit_maxbytes'];
+    		$avail=$tsize-$memcacheStats['bytes'];
+    		$x=$y=$size/2;
+    		$angle_from = 0;
+    		$fuzz = 0.000001;
+
+            foreach($memcacheStatsSingle as $serv=>$mcs) {
+    			$free = $mcs['STAT']['limit_maxbytes']-$mcs['STAT']['bytes'];
+    			$used = $mcs['STAT']['bytes'];
+
+
+                if ($free>0){
+    			// draw free
+    			    $angle_to = ($free*360)/$tsize;
+                    $perc =sprintf("%.2f%%", ($free *100) / $tsize) ;
+
+        			fill_arc($image,$x,$y,$size,$angle_from,$angle_from + $angle_to ,$col_black,$col_green,$perc);
+        			$angle_from = $angle_from + $angle_to ;
+                }
+    			if ($used>0){
+    			// draw used
+        			$angle_to = ($used*360)/$tsize;
+        			$perc =sprintf("%.2f%%", ($used *100) / $tsize) ;
+        			fill_arc($image,$x,$y,$size,$angle_from,$angle_from + $angle_to ,$col_black,$col_red, '('.$perc.')' );
+                    $angle_from = $angle_from+ $angle_to ;
+    			}
+    			}
+
+        break;
+
+        case 2: // hit miss
+
+            $hits = ($memcacheStats['get_hits']==0) ? 1:$memcacheStats['get_hits'];
+            $misses = ($memcacheStats['get_misses']==0) ? 1:$memcacheStats['get_misses'];
+            $total = $hits + $misses ;
+
+	       	fill_box($image, 30,$size,50,-$hits*($size-21)/$total,$col_black,$col_green,sprintf("%.1f%%",$hits*100/$total));
+		    fill_box($image,130,$size,50,-max(4,($total-$hits)*($size-21)/$total),$col_black,$col_red,sprintf("%.1f%%",$misses*100/$total));
+		break;
+		
+    }
+    header("Content-type: image/png");
+	imagepng($image);
+	exit;
+}
+
+echo getHeader();
+echo getMenu();
+
+switch ($_GET['op']) {
+
+    case 1: // host stats
+    	$phpversion = phpversion();
+        $memcacheStats = getMemcacheStats();
+        $memcacheStatsSingle = getMemcacheStats(false);
+
+        $mem_size = $memcacheStats['limit_maxbytes'];
+    	$mem_used = $memcacheStats['bytes'];
+	    $mem_avail= $mem_size-$mem_used;
+	    $startTime = time()-array_sum($memcacheStats['uptime']);
+
+        $curr_items = $memcacheStats['curr_items'];
+        $total_items = $memcacheStats['total_items'];
+        $hits = ($memcacheStats['get_hits']==0) ? 1:$memcacheStats['get_hits'];
+        $misses = ($memcacheStats['get_misses']==0) ? 1:$memcacheStats['get_misses'];
+        $sets = $memcacheStats['cmd_set'];
+
+       	$req_rate = sprintf("%.2f",($hits+$misses)/($time-$startTime));
+	    $hit_rate = sprintf("%.2f",($hits)/($time-$startTime));
+	    $miss_rate = sprintf("%.2f",($misses)/($time-$startTime));
+	    $set_rate = sprintf("%.2f",($sets)/($time-$startTime));
+
+	    echo <<< EOB
+		<div class="info div1"><h2>General Cache Information</h2>
+		<table cellspacing=0><tbody>
+		<tr class=tr-1><td class=td-0>PHP Version</td><td>$phpversion</td></tr>
+EOB;
+		echo "<tr class=tr-0><td class=td-0>Memcached Host". ((count($MEMCACHE_SERVERS)>1) ? 's':'')."</td><td>";
+		$i=0;
+		if (!isset($_GET['singleout']) && count($MEMCACHE_SERVERS)>1){
+    		foreach($MEMCACHE_SERVERS as $server){
+    		      echo ($i+1).'. <a href="'.$PHP_SELF.'&singleout='.$i++.'">'.$server.'</a><br/>';
+    		}
+		}
+		else{
+		    echo '1.'.$MEMCACHE_SERVERS[0];
+		}
+		if (isset($_GET['singleout'])){
+		      echo '<a href="'.$PHP_SELF.'">(all servers)</a><br/>';
+		}
+		echo "</td></tr>\n";
+		echo "<tr class=tr-1><td class=td-0>Total Memcache Cache</td><td>".bsize($memcacheStats['limit_maxbytes'])."</td></tr>\n";
+
+	echo <<<EOB
+		</tbody></table>
+		</div>
+
+		<div class="info div1"><h2>Memcache Server Information</h2>
+EOB;
+        foreach($MEMCACHE_SERVERS as $server){
+            echo '<table cellspacing=0><tbody>';
+            echo '<tr class=tr-1><td class=td-1>'.$server.'</td><td><a href="'.$PHP_SELF.'&server='.array_search($server,$MEMCACHE_SERVERS).'&op=6">[<b>Flush this server</b>]</a></td></tr>';
+    		echo '<tr class=tr-0><td class=td-0>Start Time</td><td>',date(DATE_FORMAT,$memcacheStatsSingle[$server]['STAT']['time']-$memcacheStatsSingle[$server]['STAT']['uptime']),'</td></tr>';
+    		echo '<tr class=tr-1><td class=td-0>Uptime</td><td>',duration($memcacheStatsSingle[$server]['STAT']['time']-$memcacheStatsSingle[$server]['STAT']['uptime']),'</td></tr>';
+    		echo '<tr class=tr-0><td class=td-0>Memcached Server Version</td><td>'.$memcacheStatsSingle[$server]['STAT']['version'].'</td></tr>';
+    		echo '<tr class=tr-1><td class=td-0>Used Cache Size</td><td>',bsize($memcacheStatsSingle[$server]['STAT']['bytes']),'</td></tr>';
+    		echo '<tr class=tr-0><td class=td-0>Total Cache Size</td><td>',bsize($memcacheStatsSingle[$server]['STAT']['limit_maxbytes']),'</td></tr>';
+    		echo '</tbody></table>';
+	   }
+    echo <<<EOB
+
+		</div>
+		<div class="graph div3"><h2>Host Status Diagrams</h2>
+		<table cellspacing=0><tbody>
+EOB;
+
+	$size='width='.(GRAPH_SIZE+50).' height='.(GRAPH_SIZE+10);
+	echo <<<EOB
+		<tr>
+		<td class=td-0>Cache Usage</td>
+		<td class=td-1>Hits &amp; Misses</td>
+		</tr>
+EOB;
+
+	echo
+		graphics_avail() ?
+			  '<tr>'.
+			  "<td class=td-0><img alt=\"\" $size src=\"$PHP_SELF&IMG=1&".(isset($_GET['singleout'])? 'singleout='.$_GET['singleout'].'&':'')."$time\"></td>".
+			  "<td class=td-1><img alt=\"\" $size src=\"$PHP_SELF&IMG=2&".(isset($_GET['singleout'])? 'singleout='.$_GET['singleout'].'&':'')."$time\"></td></tr>\n"
+			: "",
+		'<tr>',
+		'<td class=td-0><span class="green box">&nbsp;</span>Free: ',bsize($mem_avail).sprintf(" (%.1f%%)",$mem_avail*100/$mem_size),"</td>\n",
+		'<td class=td-1><span class="green box">&nbsp;</span>Hits: ',$hits.sprintf(" (%.1f%%)",$hits*100/($hits+$misses)),"</td>\n",
+		'</tr>',
+		'<tr>',
+		'<td class=td-0><span class="red box">&nbsp;</span>Used: ',bsize($mem_used ).sprintf(" (%.1f%%)",$mem_used *100/$mem_size),"</td>\n",
+		'<td class=td-1><span class="red box">&nbsp;</span>Misses: ',$misses.sprintf(" (%.1f%%)",$misses*100/($hits+$misses)),"</td>\n";
+		echo <<< EOB
+	</tr>
+	</tbody></table>
+<br/>
+	<div class="info"><h2>Cache Information</h2>
+		<table cellspacing=0><tbody>
+		<tr class=tr-0><td class=td-0>Current Items(total)</td><td>$curr_items ($total_items)</td></tr>
+		<tr class=tr-1><td class=td-0>Hits</td><td>{$hits}</td></tr>
+		<tr class=tr-0><td class=td-0>Misses</td><td>{$misses}</td></tr>
+		<tr class=tr-1><td class=td-0>Request Rate (hits, misses)</td><td>$req_rate cache requests/second</td></tr>
+		<tr class=tr-0><td class=td-0>Hit Rate</td><td>$hit_rate cache requests/second</td></tr>
+		<tr class=tr-1><td class=td-0>Miss Rate</td><td>$miss_rate cache requests/second</td></tr>
+		<tr class=tr-0><td class=td-0>Set Rate</td><td>$set_rate cache requests/second</td></tr>
+		</tbody></table>
+		</div>
+
+EOB;
+
+    break;
+
+    case 2: // variables
+
+		$m=0;
+		$cacheItems= getCacheItems();
+		$items = $cacheItems['items'];
+		$totals = $cacheItems['counts'];
+		$maxDump = MAX_ITEM_DUMP;
+		foreach($items as $server => $entries) {
+
+    	echo <<< EOB
+
+			<div class="info"><table cellspacing=0><tbody>
+			<tr><th colspan="2">$server</th></tr>
+			<tr><th>Slab Id</th><th>Info</th></tr>
+EOB;
+
+			foreach($entries as $slabId => $slab) {
+			    $dumpUrl = $PHP_SELF.'&op=2&server='.(array_search($server,$MEMCACHE_SERVERS)).'&dumpslab='.$slabId;
+				echo
+					"<tr class=tr-$m>",
+					"<td class=td-0><center>",'<a href="',$dumpUrl,'">',$slabId,'</a>',"</center></td>",
+					"<td class=td-last><b>Item count:</b> ",$slab['number'],'<br/><b>Age:</b>',duration($time-$slab['age']),'<br/> <b>Evicted:</b>',((isset($slab['evicted']) && $slab['evicted']==1)? 'Yes':'No');
+					if ((isset($_GET['dumpslab']) && $_GET['dumpslab']==$slabId) &&  (isset($_GET['server']) && $_GET['server']==array_search($server,$MEMCACHE_SERVERS))){
+					    echo "<br/><b>Items: item</b><br/>";
+					    $items = dumpCacheSlab($server,$slabId,$slab['number']);
+                        // maybe someone likes to do a pagination here :)
+					    $i=1;
+                        foreach($items['ITEM'] as $itemKey=>$itemInfo){
+                            $itemInfo = trim($itemInfo,'[ ]');
+
+
+                            echo '<a href="',$PHP_SELF,'&op=4&server=',(array_search($server,$MEMCACHE_SERVERS)),'&key=',base64_encode($itemKey).'">',$itemKey,'</a>';
+                            if ($i++ % 10 == 0) {
+                                echo '<br/>';
+                            }
+                            elseif ($i!=$slab['number']+1){
+                                echo ',';
+                            }
+                        }
+					}
+
+					echo "</td></tr>";
+				$m=1-$m;
+			}
+		echo <<<EOB
+			</tbody></table>
+			</div><hr/>
+EOB;
+}
+		break;
+
+    break;
+
+    case 4: //item dump
+        if (!isset($_GET['key']) || !isset($_GET['server'])){
+            echo "No key set!";
+            break;
+        }
+        // I'm not doing anything to check the validity of the key string.
+        // probably an exploit can be written to delete all the files in key=base64_encode("\n\r delete all").
+        // somebody has to do a fix to this.
+        $theKey = htmlentities(base64_decode($_GET['key']));
+
+        $theserver = $MEMCACHE_SERVERS[(int)$_GET['server']];
+        list($h,$p) = get_host_port_from_server($theserver);
+        $r = sendMemcacheCommand($h,$p,'get '.$theKey);
+        echo <<<EOB
+        <div class="info"><table cellspacing=0><tbody>
+			<tr><th>Server<th>Key</th><th>Value</th><th>Delete</th></tr>
+EOB;
+        if (!isset($r['VALUE'])) {
+            echo "<tr><td class=td-0>",$theserver,"</td><td class=td-0>",$theKey,
+                 "</td><td>[The requested item was not found or has expired]</td>",
+                 "<td></td>","</tr>";
+        }
+        else {
+
+            echo "<tr><td class=td-0>",$theserver,"</td><td class=td-0>",$theKey,
+                 " <br/>flag:",$r['VALUE'][$theKey]['stat']['flag'],
+                 " <br/>Size:",bsize($r['VALUE'][$theKey]['stat']['size']),
+                 "</td><td>",chunk_split($r['VALUE'][$theKey]['value'],40),"</td>",
+                 '<td><a href="',$PHP_SELF,'&op=5&server=',(int)$_GET['server'],'&key=',base64_encode($theKey),"\">Delete</a></td>","</tr>";
+        }
+        echo <<<EOB
+			</tbody></table>
+			</div><hr/>
+EOB;
+    break;
+    case 5: // item delete
+    	if (!isset($_GET['key']) || !isset($_GET['server'])){
+			echo "No key set!";
+			break;
+        }
+        $theKey = htmlentities(base64_decode($_GET['key']));
+		$theserver = $MEMCACHE_SERVERS[(int)$_GET['server']];
+		list($h,$p) = get_host_port_from_server($theserver);
+        $r = sendMemcacheCommand($h,$p,'delete '.$theKey);
+        echo 'Deleting '.$theKey.':'.$r;
+	break;
+    
+   case 6: // flush server
+        $theserver = $MEMCACHE_SERVERS[(int)$_GET['server']];
+        $r = flushServer($theserver);
+        echo 'Flush  '.$theserver.":".$r;
+   break;
+}
+echo getFooter();
+
+?>
diff --git a/dev/quick/opc.php b/dev/quick/opc.php
new file mode 100644
index 0000000..b8eff20
--- /dev/null
+++ b/dev/quick/opc.php
@@ -0,0 +1,769 @@
+<?php
+
+include_once('_secure.inc');
+
+/**
+ * OPcache GUI
+ *
+ * A simple but effective single-file GUI for the OPcache PHP extension.
+ *
+ * @author Andrew Collington, andy@amnuts.com
+ * @version 2.2.3
+ * @link https://github.com/amnuts/opcache-gui
+ * @license MIT, http://acollington.mit-license.org/
+ */
+
+
+/*
+ * User configuration
+ */
+
+$options = [
+    'allow_filelist'   => true,  // show/hide the files tab
+    'allow_invalidate' => true,  // give a link to invalidate files
+    'allow_reset'      => true,  // give option to reset the whole cache
+    'allow_realtime'   => true,  // give option to enable/disable real-time updates
+    'refresh_time'     => 5,     // how often the data will refresh, in seconds
+    'size_precision'   => 2,     // Digits after decimal point
+    'size_space'       => false, // have '1MB' or '1 MB' when showing sizes
+    'charts'           => true,  // show gauge chart or just big numbers
+    'debounce_rate'    => 250    // milliseconds after key press to send keyup event when filtering
+];
+
+/*
+ * Shouldn't need to alter anything else below here
+ */
+
+if (!extension_loaded('Zend OPcache')) {
+    die('The Zend OPcache extension does not appear to be installed');
+}
+
+if (empty(ini_get('opcache.enable'))) {
+    die('The Zend OPcache extension is installed but not turned on');
+}
+
+class OpCacheService
+{
+    protected $data;
+    protected $options;
+    protected $defaults = [
+        'allow_filelist'   => true,
+        'allow_invalidate' => true,
+        'allow_reset'      => true,
+        'allow_realtime'   => true,
+        'refresh_time'     => 5,
+        'size_precision'   => 2,
+        'size_space'       => false,
+        'charts'           => true,
+        'debounce_rate'    => 250
+    ];
+
+    private function __construct($options = [])
+    {
+        $this->options = array_merge($this->defaults, $options);
+        $this->data = $this->compileState();
+    }
+
+    public static function init($options = [])
+    {
+        $self = new self($options);
+        if (!empty($_SERVER['HTTP_X_REQUESTED_WITH'])
+            && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest'
+        ) {
+            if (isset($_GET['reset']) && $self->getOption('allow_reset')) {
+                echo '{ "success": "' . ($self->resetCache() ? 'yes' : 'no') . '" }';
+            } else if (isset($_GET['invalidate']) && $self->getOption('allow_invalidate')) {
+                echo '{ "success": "' . ($self->resetCache($_GET['invalidate']) ? 'yes' : 'no') . '" }';
+            } else {
+                echo json_encode($self->getData((empty($_GET['section']) ? null : $_GET['section'])));
+            }
+            exit;
+        } else if (isset($_GET['reset']) && $self->getOption('allow_reset')) {
+            $self->resetCache();
+            header('Location: ?');
+            exit;
+        } else if (isset($_GET['invalidate']) && $self->getOption('allow_invalidate')) {
+            $self->resetCache($_GET['invalidate']);
+            header('Location: ?');
+            exit;
+        }
+        return $self;
+    }
+
+    public function getOption($name = null)
+    {
+        if ($name === null) {
+            return $this->options;
+        }
+        return (isset($this->options[$name])
+            ? $this->options[$name]
+            : null
+        );
+    }
+
+    public function getData($section = null, $property = null)
+    {
+        if ($section === null) {
+            return $this->data;
+        }
+        $section = strtolower($section);
+        if (isset($this->data[$section])) {
+            if ($property === null || !isset($this->data[$section][$property])) {
+                return $this->data[$section];
+            }
+            return $this->data[$section][$property];
+        }
+        return null;
+    }
+
+    public function canInvalidate()
+    {
+        return ($this->getOption('allow_invalidate') && function_exists('opcache_invalidate'));
+    }
+
+    public function resetCache($file = null)
+    {
+        $success = false;
+        if ($file === null) {
+            $success = opcache_reset();
+        } else if (function_exists('opcache_invalidate')) {
+            $success = opcache_invalidate(urldecode($file), true);
+        }
+        if ($success) {
+            $this->compileState();
+        }
+        return $success;
+    }
+
+    protected function size($size)
+    {
+        $i = 0;
+        $val = array('b', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB');
+        while (($size / 1024) > 1) {
+            $size /= 1024;
+            ++$i;
+        }
+        return sprintf('%.'.$this->getOption('size_precision').'f%s%s',
+            $size, ($this->getOption('size_space') ? ' ' : ''), $val[$i]
+        );
+    }
+
+    protected function compileState()
+    {
+        $status = opcache_get_status();
+        $config = opcache_get_configuration();
+
+        $files = [];
+        if (!empty($status['scripts']) && $this->getOption('allow_filelist')) {
+            uasort($status['scripts'], function($a, $b) {
+                return $a['hits'] < $b['hits'];
+            });
+            foreach ($status['scripts'] as &$file) {
+                $file['full_path'] = str_replace('\\', '/', $file['full_path']);
+                $file['readable'] = [
+                    'hits'               => number_format($file['hits']),
+                    'memory_consumption' => $this->size($file['memory_consumption'])
+                ];
+            }
+            $files = array_values($status['scripts']);
+        }
+
+        $overview = array_merge(
+            $status['memory_usage'], $status['opcache_statistics'], [
+                'used_memory_percentage'  => round(100 * (
+                        ($status['memory_usage']['used_memory'] + $status['memory_usage']['wasted_memory'])
+                        / $config['directives']['opcache.memory_consumption'])),
+                'hit_rate_percentage'     => round($status['opcache_statistics']['opcache_hit_rate']),
+                'wasted_percentage'       => round($status['memory_usage']['current_wasted_percentage'], 2),
+                'readable' => [
+                    'total_memory'       => $this->size($config['directives']['opcache.memory_consumption']),
+                    'used_memory'        => $this->size($status['memory_usage']['used_memory']),
+                    'free_memory'        => $this->size($status['memory_usage']['free_memory']),
+                    'wasted_memory'      => $this->size($status['memory_usage']['wasted_memory']),
+                    'num_cached_scripts' => number_format($status['opcache_statistics']['num_cached_scripts']),
+                    'hits'               => number_format($status['opcache_statistics']['hits']),
+                    'misses'             => number_format($status['opcache_statistics']['misses']),
+                    'blacklist_miss'     => number_format($status['opcache_statistics']['blacklist_misses']),
+                    'num_cached_keys'    => number_format($status['opcache_statistics']['num_cached_keys']),
+                    'max_cached_keys'    => number_format($status['opcache_statistics']['max_cached_keys']),
+                    'start_time'         => date('Y-m-d H:i:s', $status['opcache_statistics']['start_time']),
+                    'last_restart_time'  => ($status['opcache_statistics']['last_restart_time'] == 0
+                            ? 'never'
+                            : date('Y-m-d H:i:s', $status['opcache_statistics']['last_restart_time'])
+                        )
+                ]
+            ]
+        );
+
+        $directives = [];
+        ksort($config['directives']);
+        foreach ($config['directives'] as $k => $v) {
+            $directives[] = ['k' => $k, 'v' => $v];
+        }
+
+        $version = array_merge(
+            $config['version'],
+            [
+                'php'    => phpversion(),
+                'server' => $_SERVER['SERVER_SOFTWARE'],
+                'host'   => (function_exists('gethostname')
+                    ? gethostname()
+                    : (php_uname('n')
+                        ?: (empty($_SERVER['SERVER_NAME'])
+                            ? $_SERVER['HOST_NAME']
+                            : $_SERVER['SERVER_NAME']
+                        )
+                    )
+                )
+            ]
+        );
+
+        return [
+            'version'    => $version,
+            'overview'   => $overview,
+            'files'      => $files,
+            'directives' => $directives,
+            'blacklist'  => $config['blacklist'],
+            'functions'  => get_extension_funcs('Zend OPcache')
+        ];
+    }
+}
+
+$opcache = OpCacheService::init($options);
+
+?>
+<!doctype html>
+<html>
+<head>
+    <meta charset="UTF-8"/>
+    <meta name="viewport" content="width=device-width,initial-scale=1.0">
+    <title>OPcache statistics on <?php echo $opcache->getData('version', 'host'); ?></title>
+    <script src="//cdn.jsdelivr.net/react/15.0.1/react.min.js"></script>
+    <script src="//cdn.jsdelivr.net/react/15.0.1/react-dom.min.js"></script>
+    <script src="//code.jquery.com/jquery-2.2.3.min.js"></script>
+    <style type="text/css">
+        body { font-family:sans-serif; font-size:90%; padding: 0; margin: 0 }
+        nav { padding-top: 20px; }
+        nav > ul { list-style-type: none; padding-left: 8px; margin: 0; border-bottom: 1px solid #ccc; }
+        nav > ul > li { display: inline-block; padding: 0; margin: 0 0 -1px 0; }
+        nav > ul > li > a { display: block; margin: 0 10px; padding: 15px 30px; border: 1px solid transparent; border-bottom-color: #ccc; text-decoration: none; }
+        nav > ul > li > a:hover { background-color: #f4f4f4; text-decoration: underline; }
+        nav > ul > li > a.active:hover { background-color: initial; }
+        nav > ul > li > a[data-for].active { border: 1px solid #ccc; border-bottom-color: #ffffff; border-top: 3px solid #6ca6ef; }
+        table { margin: 0 0 1em 0; border-collapse: collapse; border-color: #fff; width: 100%; table-layout: fixed; }
+        table caption { text-align: left; font-size: 1.5em; }
+        table tr { background-color: #99D0DF; border-color: #fff; }
+        table th { text-align: left; padding: 6px; background-color: #6ca6ef; color: #fff; border-color: #fff; font-weight: normal; }
+        table td { padding: 4px 6px; line-height: 1.4em; vertical-align: top; border-color: #fff; }
+        table tr:nth-child(odd) { background-color: #EFFEFF; }
+        table tr:nth-child(even) { background-color: #E0ECEF; }
+        #filelist table tr { background-color: #EFFEFF; }
+        #filelist table tr.alternate { background-color: #E0ECEF; }
+        td.pathname { width: 70%; }
+        footer { border-top: 1px solid #ccc; padding: 1em 2em; }
+        footer a { padding: 2em; text-decoration: none; opacity: 0.7; }
+        footer a:hover { opacity: 1; }
+        canvas { display: block; width: 250px; height: 250px; margin: 0 auto; }
+        #tabs { padding: 2em; }
+        #tabs > div { display: none; }
+        #tabs > div#overview { display:block; }
+        #resetCache, #toggleRealtime, footer > a { background-position: 5px 50%; background-repeat: no-repeat; background-color: transparent; }
+        footer > a { background-position: 0 50%; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAQCAYAAAAbBi9cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjE2MENCRkExNzVBQjExRTQ5NDBGRTUzMzQyMDVDNzFFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjE2MENCRkEyNzVBQjExRTQ5NDBGRTUzMzQyMDVDNzFFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTYwQ0JGOUY3NUFCMTFFNDk0MEZFNTMzNDIwNUM3MUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTYwQ0JGQTA3NUFCMTFFNDk0MEZFNTMzNDIwNUM3MUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7HtUU1AAABN0lEQVR42qyUvWoCQRSF77hCLLKC+FOlCKTyIbYQUuhbWPkSFnZ2NpabUvANLGyz5CkkYGMlFtFAUmiSM8lZOVkWsgm58K079+fMnTusZl92BXbgDrTtZ2szd8fas/XBOzmBKaiCEFyTkL4pc9L8vgpNJJDyWtDna61EoXpO+xcFfXUVqtrf7Vx7m9Pub/EatvgHoYXD4ylztC14BBVwydvydgDPHPgNaErN3jLKIxAUmEvAXK21I18SJpXBGAxyBAaMlblOWOs1bMXFkMGeBFsi0pJNe/QNuV7563+gs8LfhrRfE6GaHLuRqfnUiKi6lJ034B44EXL0baTTJWujNGkG3kBX5uRyZuRkPl3WzDTBtzjnxxiDDq83yNxUk7GYuXM53jeLuMNavvAXkv4zrJkTaeGHAAMAIal3icPMsyQAAAAASUVORK5CYII='); font-size: 80%; }
+        #resetCache { background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjBFMUMyMjI3NDlGMTFFNEE3QzNGNjQ0OEFDQzQ1MkMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjBFMUMyMjM3NDlGMTFFNEE3QzNGNjQ0OEFDQzQ1MkMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MEUxQzIyMDc0OUYxMUU0QTdDM0Y2NDQ4QUNDNDUyQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2MEUxQzIyMTc0OUYxMUU0QTdDM0Y2NDQ4QUNDNDUyQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PplZ+ZkAAAD1SURBVHjazFPtDYJADIUJZAMZ4UbACWQENjBO4Ao6AW5AnODcADZQJwAnwJ55NbWhB/6zycsdpX39uDZNpsURtjgzwkDoCBecs5ITPGGMwCNAkIrQw+8ri36GhBHsavFdpILEo4wEpZxRigy009EhG760gr0VhFoyZfvJKPwsheIWIeGejBZRIxRVhMRFevbuUXBew/iE/lhlBduV0j8Jx+TvJEWPphq8n5li9utgaw6cW/h6NSt/JcnVBhQxotIgKTBrbNvIHo2G0x1rwlKqTDusxiAz6hHNL1zayTVqVKRKpa/LPljPH1sJh6l/oNSrZfwSYABtq3tFdZA5BAAAAABJRU5ErkJggg=='); }
+        #toggleRealtime { position: relative; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODE5RUU4NUE3NDlGMTFFNDkyMzA4QzY1RjRBQkIzQjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODE5RUU4NUI3NDlGMTFFNDkyMzA4QzY1RjRBQkIzQjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MTlFRTg1ODc0OUYxMUU0OTIzMDhDNjVGNEFCQjNCNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4MTlFRTg1OTc0OUYxMUU0OTIzMDhDNjVGNEFCQjNCNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpXjpvMAAAD2SURBVHjarFQBEcMgDKR3E1AJldA5wMEqAQmTgINqmILdFCChdUAdMAeMcukuSwnQbbnLlZLwJPkQIcrSiT/IGNQHNb8CGQDyRw+2QWUBqC+luzo4OKQZIAVrB+ssyKp3Bkijf0+ijzIh4wQppoBauMSjyDZfMSCDxYZMsfHF120T36AqWZMkgyguQ3GOfottJ5TKnHC+wfeRsC2oDVayPgr3bbN2tHBH3tWuJCPa0JUgKtFzMQrcZH3FNHAc0yOp1cCASALyngoN6lhDopkJWxdifwY9A3u7l29ImpxOFSWIOVsGwHKENIWxss2eBVKdOeeXAAMAk/Z9h4QhXmUAAAAASUVORK5CYII='); }
+        #counts { width: 270px; float: right; }
+        #counts > div > div { background-color: #ededed; margin-bottom: 10px; }
+        #counts > div > div > h3 { background-color: #cdcdcd; padding: 4px 6px; margin: 0; text-align: center; }
+        #counts > div > div > p { margin: 0; text-align: center; }
+        #counts > div > div > p span.large + span { font-size: 20pt; margin: 0; color: #6ca6ef; }
+        #counts > div > div > p span.large { color: #6ca6ef; font-size: 80pt; margin: 0; padding: 0; text-align: center; }
+        #info { margin-right: 280px; }
+        #frmFilter { width: 520px; }
+        #moreinfo { padding: 10px; }
+        #moreinfo > p { text-align: left !important; line-height: 180%; }
+        .metainfo { font-size: 80%; }
+        .hide { display: none; }
+        #toggleRealtime.pulse::before {
+            content: ""; position: absolute;
+            top: 13px; left: 3px; width: 18px; height: 18px;
+            z-index: 10; opacity: 0; background-color: transparent;
+            border: 2px solid rgb(255, 116, 0); border-radius: 100%;
+            -webkit-animation: pulse 1s linear 2;
+            -moz-animation: pulse 1s linear 2;
+            animation: pulse 1s linear 2;
+        }
+        @media screen and (max-width: 750px) {
+            #info { margin-right:auto; clear:both; }
+            nav > ul { border-bottom: 0; }
+            nav > ul > li { display: block; margin: 0; }
+            nav > ul > li > a { display: block; margin: 0 10px; padding: 10px 0 10px 30px; border: 0; }
+            nav > ul > li > a[data-for].active { border-bottom-color: #ccc; }
+            #counts { position:relative; display:block; width:100%; }
+            #toggleRealtime.pulse::before { top: 8px; }
+        }
+        @media screen and (max-width: 550px) {
+            #frmFilter { width: 100%; }
+        }
+        @keyframes pulse {
+            0% {transform: scale(1); opacity: 0;}
+            50% {transform: scale(1.3); opacity: 0.7;}
+            100% {transform: scale(1.6); opacity: 1;}
+        }
+        @-webkit-keyframes pulse {
+            0% {-webkit-transform: scale(1); opacity: 0;}
+            50% {-webkit-transform: scale(1.3); opacity: 0.7;}
+            100% {-webkit-transform: scale(1.6); opacity: 0;}
+        }
+        @-moz-keyframes pulse {
+            0% {-moz-transform: scale(1); opacity: 0;}
+            50% {-moz-transform: scale(1.3); opacity: 0.7;}
+            100% {-moz-transform: scale(1.6); opacity: 0;}
+        }
+    </style>
+</head>
+
+<body>
+
+<header>
+    <nav>
+        <ul>
+            <li><a data-for="overview" href="#overview" class="active">Overview</a></li>
+            <?php if ($opcache->getOption('allow_filelist')): ?>
+            <li><a data-for="files" href="#files">File usage</a></li>
+            <?php endif; ?>
+            <?php if ($opcache->getOption('allow_reset')): ?>
+            <li><a href="?reset=1" id="resetCache" onclick="return confirm('Are you sure you want to reset the cache?');">Reset cache</a></li>
+            <?php endif; ?>
+            <?php if ($opcache->getOption('allow_realtime')): ?>
+            <li><a href="#" id="toggleRealtime">Enable real-time update</a></li>
+            <?php endif; ?>
+        </ul>
+    </nav>
+</header>
+
+<div id="tabs">
+    <div id="overview">
+        <div class="container">
+            <div id="counts"></div>
+            <div id="info">
+                <div id="generalInfo"></div>
+                <div id="directives"></div>
+                <div id="functions">
+                    <table>
+                        <thead>
+                            <tr><th>Available functions</th></tr>
+                        </thead>
+                        <tbody>
+                            <?php foreach ($opcache->getData('functions') as $func): ?>
+                            <tr><td><a href="http://php.net/<?php echo $func; ?>" title="View manual page" target="_blank"><?php echo $func; ?></a></td></tr>
+                            <?php endforeach; ?>
+                        </tbody>
+                    </table>
+                </div>
+                <br style="clear:both;" />
+            </div>
+        </div>
+    </div>
+    <div id="files">
+        <?php if ($opcache->getOption('allow_filelist')): ?>
+        <p><label>Start typing to filter on script path<br/><input type="text" name="filter" id="frmFilter" /><label></p>
+        <?php endif; ?>
+        <div class="container" id="filelist"></div>
+    </div>
+</div>
+
+<footer>
+    <a href="https://github.com/amnuts/opcache-gui" target="_blank">https://github.com/amnuts/opcache-gui</a>
+</footer>
+
+<script type="text/javascript">
+    var realtime = false;
+    var opstate = <?php echo json_encode($opcache->getData()); ?>;
+    var canInvalidate = <?php echo json_encode($opcache->canInvalidate()); ?>;
+    var useCharts = <?php echo json_encode($opcache->getOption('charts')); ?>;
+    var allowFiles = <?php echo json_encode($opcache->getOption('allow_filelist')); ?>;
+    var debounce = function(func, wait, immediate) {
+        var timeout;
+        wait = wait || 250;
+        return function() {
+            var context = this, args = arguments;
+            var later = function() {
+                timeout = null;
+                if (!immediate) {
+                    func.apply(context, args);
+                }
+            };
+            var callNow = immediate && !timeout;
+            clearTimeout(timeout);
+            timeout = setTimeout(later, wait);
+            if (callNow) {
+                func.apply(context, args);
+            }
+        };
+    };
+    function keyUp(event){
+        var compare = $('#frmFilter').val().toLowerCase();
+        $('#filelist').find('table tbody tr').each(function(index){
+            if ($(this).data('path').indexOf(compare) == -1) {
+                $(this).addClass('hide');
+            } else {
+                $(this).removeClass('hide');
+            }
+        });
+        $('#filelist table tbody').trigger('paint');
+    };
+
+    <?php if ($opcache->getOption('charts')): ?>
+    var Gauge = function(el, colour) {
+        this.canvas  = $(el).get(0);
+        this.ctx     = this.canvas.getContext('2d');
+        this.width   = this.canvas.width;
+        this.height  = this.canvas.height;
+        this.colour  = colour || '#6ca6ef';
+        this.loop    = null;
+        this.degrees = 0;
+        this.newdegs = 0;
+        this.text    = '';
+        this.init = function() {
+            this.ctx.clearRect(0, 0, this.width, this.height);
+            this.ctx.beginPath();
+            this.ctx.strokeStyle = '#e2e2e2';
+            this.ctx.lineWidth = 30;
+            this.ctx.arc(this.width/2, this.height/2, 100, 0, Math.PI*2, false);
+            this.ctx.stroke();
+            this.ctx.beginPath();
+            this.ctx.strokeStyle = this.colour;
+            this.ctx.lineWidth = 30;
+            this.ctx.arc(this.width/2, this.height/2, 100, 0 - (90 * Math.PI / 180), (this.degrees * Math.PI / 180) - (90 * Math.PI / 180), false);
+            this.ctx.stroke();
+            this.ctx.fillStyle = this.colour;
+            this.ctx.font = '60px sans-serif';
+            this.text = Math.round((this.degrees/360)*100) + '%';
+            this.ctx.fillText(this.text, (this.width/2) - (this.ctx.measureText(this.text).width/2), (this.height/2) + 20);
+        };
+        this.draw = function() {
+            if (typeof this.loop != 'undefined') {
+                clearInterval(this.loop);
+            }
+            var self = this;
+            self.loop = setInterval(function(){ self.animate(); }, 1000/(this.newdegs - this.degrees));
+        };
+        this.animate = function() {
+            if (this.degrees == this.newdegs) {
+                clearInterval(this.loop);
+            }
+            if (this.degrees < this.newdegs) {
+                ++this.degrees;
+            } else {
+                --this.degrees;
+            }
+            this.init();
+        };
+        this.setValue = function(val) {
+            this.newdegs = Math.round(3.6 * val);
+            this.draw();
+        };
+    }
+    <?php endif; ?>
+
+    $(function(){
+        <?php if ($opcache->getOption('allow_realtime')): ?>
+        function updateStatus() {
+            $('#toggleRealtime').removeClass('pulse');
+            $.ajax({
+                url: "#",
+                dataType: "json",
+                cache: false,
+                success: function(data) {
+                    $('#toggleRealtime').addClass('pulse');
+                    opstate = data;
+                    overviewCountsObj.setState({
+                        data : opstate.overview
+                    });
+                    generalInfoObj.setState({
+                        version : opstate.version,
+                        start : opstate.overview.readable.start_time,
+                        reset : opstate.overview.readable.last_restart_time
+                    });
+                    filesObj.setState({
+                        data : opstate.files,
+                        count_formatted : opstate.overview.readable.num_cached_scripts,
+                        count : opstate.overview.num_cached_scripts
+                    });
+                    keyUp();
+                }
+            });
+        }
+        $('#toggleRealtime').click(function(){
+            if (realtime === false) {
+                realtime = setInterval(function(){updateStatus()}, <?php echo (int)$opcache->getOption('refresh_time') * 1000; ?>);
+                $(this).text('Disable real-time update');
+            } else {
+                clearInterval(realtime);
+                realtime = false;
+                $(this).text('Enable real-time update').removeClass('pulse');
+            }
+        });
+        <?php endif; ?>
+        $('nav a[data-for]').click(function(){
+            $('#tabs > div').hide();
+            $('#' + $(this).data('for')).show();
+            $('nav a[data-for]').removeClass('active');
+            $(this).addClass('active');
+            return false;
+        });
+        $(document).on('paint', '#filelist table tbody', function(event, params) {
+            var trs = $('#filelist').find('tbody tr');
+            trs.removeClass('alternate');
+            trs.filter(':not(.hide):odd').addClass('alternate');
+            filesObj.setState({showing: trs.filter(':not(.hide)').length});
+        });
+        $('#frmFilter').bind('keyup', debounce(keyUp, <?php echo $opcache->getOption('debounce_rate'); ?>));
+    });
+
+    var MemoryUsage = React.createClass({displayName: "MemoryUsage",
+        getInitialState: function() {
+            return {
+                memoryUsageGauge : null
+            };
+        },
+        componentDidMount: function() {
+            if (this.props.chart) {
+                this.state.memoryUsageGauge = new Gauge('#memoryUsageCanvas');
+                this.state.memoryUsageGauge.setValue(this.props.value);
+            }
+        },
+        componentDidUpdate: function() {
+            if (this.state.memoryUsageGauge != null) {
+                this.state.memoryUsageGauge.setValue(this.props.value);
+            }
+        },
+        render: function() {
+            if (this.props.chart == true) {
+                return(React.createElement("canvas", {id: "memoryUsageCanvas", width: "250", height: "250", "data-value": this.props.value}));
+            }
+            return(React.createElement("p", null, React.createElement("span", {className: "large"}, this.props.value), React.createElement("span", null, "%")));
+        }
+    });
+
+    var HitRate = React.createClass({displayName: "HitRate",
+        getInitialState: function() {
+            return {
+                hitRateGauge : null
+            };
+        },
+        componentDidMount: function() {
+            if (this.props.chart) {
+                this.state.hitRateGauge = new Gauge('#hitRateCanvas');
+                this.state.hitRateGauge.setValue(this.props.value)
+            }
+        },
+        componentDidUpdate: function() {
+            if (this.state.hitRateGauge != null) {
+                this.state.hitRateGauge.setValue(this.props.value);
+            }
+        },
+        render: function() {
+            if (this.props.chart == true) {
+                return(React.createElement("canvas", {id: "hitRateCanvas", width: "250", height: "250", "data-value": this.props.value}));
+            }
+            return(React.createElement("p", null, React.createElement("span", {className: "large"}, this.props.value), React.createElement("span", null, "%")));
+        }
+    });
+
+    var OverviewCounts = React.createClass({displayName: "OverviewCounts",
+        getInitialState: function() {
+            return {
+                data  : opstate.overview,
+                chart : useCharts
+            };
+        },
+        render: function() {
+            return (
+                React.createElement("div", null,
+                    React.createElement("div", null,
+                        React.createElement("h3", null, "memory usage"),
+                        React.createElement("p", null, React.createElement(MemoryUsage, {chart: this.state.chart, value: this.state.data.used_memory_percentage}))
+                    ),
+                    React.createElement("div", null,
+                        React.createElement("h3", null, "hit rate"),
+                        React.createElement("p", null, React.createElement(HitRate, {chart: this.state.chart, value: this.state.data.hit_rate_percentage}))
+                    ),
+                    React.createElement("div", {id: "moreinfo"},
+                        React.createElement("p", null, React.createElement("b", null, "total memory:"), " ", this.state.data.readable.total_memory),
+                        React.createElement("p", null, React.createElement("b", null, "used memory:"), " ", this.state.data.readable.used_memory),
+                        React.createElement("p", null, React.createElement("b", null, "free memory:"), " ", this.state.data.readable.free_memory),
+                        React.createElement("p", null, React.createElement("b", null, "wasted memory:"), " ", this.state.data.readable.wasted_memory, " (", this.state.data.wasted_percentage, "%)"),
+                        React.createElement("p", null, React.createElement("b", null, "number of cached files:"), " ", this.state.data.readable.num_cached_scripts),
+                        React.createElement("p", null, React.createElement("b", null, "number of hits:"), " ", this.state.data.readable.hits),
+                        React.createElement("p", null, React.createElement("b", null, "number of misses:"), " ", this.state.data.readable.misses),
+                        React.createElement("p", null, React.createElement("b", null, "blacklist misses:"), " ", this.state.data.readable.blacklist_miss),
+                        React.createElement("p", null, React.createElement("b", null, "number of cached keys:"), " ", this.state.data.readable.num_cached_keys),
+                        React.createElement("p", null, React.createElement("b", null, "max cached keys:"), " ", this.state.data.readable.max_cached_keys)
+                    )
+                )
+            );
+        }
+    });
+
+    var GeneralInfo = React.createClass({displayName: "GeneralInfo",
+        getInitialState: function() {
+            return {
+                version : opstate.version,
+                start : opstate.overview.readable.start_time,
+                reset : opstate.overview.readable.last_restart_time
+            };
+        },
+        render: function() {
+            return (
+                React.createElement("table", null,
+                    React.createElement("thead", null,
+                        React.createElement("tr", null, React.createElement("th", {colSpan: "2"}, "General info"))
+                    ),
+                    React.createElement("tbody", null,
+                        React.createElement("tr", null, React.createElement("td", null, "Zend OPcache"), React.createElement("td", null, this.state.version.version)),
+                        React.createElement("tr", null, React.createElement("td", null, "PHP"), React.createElement("td", null, this.state.version.php)),
+                        React.createElement("tr", null, React.createElement("td", null, "Host"), React.createElement("td", null, this.state.version.host)),
+                        React.createElement("tr", null, React.createElement("td", null, "Server Software"), React.createElement("td", null, this.state.version.server)),
+                        React.createElement("tr", null, React.createElement("td", null, "Start time"), React.createElement("td", null, this.state.start)),
+                        React.createElement("tr", null, React.createElement("td", null, "Last reset"), React.createElement("td", null, this.state.reset))
+                    )
+                )
+            );
+        }
+    });
+
+    var Directives = React.createClass({displayName: "Directives",
+        getInitialState: function() {
+            return { data : opstate.directives };
+        },
+        render: function() {
+            var directiveNodes = this.state.data.map(function(directive) {
+                var map = { 'opcache.':'', '_':' ' };
+                var dShow = directive.k.replace(/opcache\.|_/gi, function(matched){
+                    return map[matched];
+                });
+                var vShow;
+                if (directive.v === true || directive.v === false) {
+                    vShow = React.createElement('i', {}, directive.v.toString());
+                } else if (directive.v === '') {
+                    vShow = React.createElement('i', {}, 'no value');
+                } else {
+                    vShow = directive.v;
+                }
+                return (
+                    React.createElement("tr", {key: directive.k},
+                        React.createElement("td", {title: 'View ' + directive.k + ' manual entry'}, React.createElement("a", {href: 'http://php.net/manual/en/opcache.configuration.php#ini.'
+                        + (directive.k).replace(/_/g,'-'), target: "_blank"}, dShow)),
+                        React.createElement("td", null, vShow)
+                    )
+                );
+            });
+            return (
+                React.createElement("table", null,
+                    React.createElement("thead", null,
+                        React.createElement("tr", null, React.createElement("th", {colSpan: "2"}, "Directives"))
+                    ),
+                    React.createElement("tbody", null, directiveNodes)
+                )
+            );
+        }
+    });
+
+    var Files = React.createClass({displayName: "Files",
+        getInitialState: function() {
+            return {
+                data : opstate.files,
+                showing: null,
+                allowFiles: allowFiles
+            };
+        },
+        handleInvalidate: function(e) {
+            e.preventDefault();
+            if (realtime) {
+                $.get('#', { invalidate: e.currentTarget.getAttribute('data-file') }, function(data) {
+                    console.log('success: ' + data.success);
+                }, 'json');
+            } else {
+                window.location.href = e.currentTarget.href;
+            }
+        },
+        render: function() {
+            if (this.state.allowFiles) {
+                var fileNodes = this.state.data.map(function(file, i) {
+                    var invalidate, invalidated;
+                    if (file.timestamp == 0) {
+                        invalidated = React.createElement("span", null, React.createElement("i", {className: "invalid metainfo"}, " - has been invalidated"));
+                    }
+                    if (canInvalidate) {
+                        invalidate = React.createElement("span", null, ",", React.createElement("a", {className: "metainfo", href: '?invalidate='
+                        + file.full_path, "data-file": file.full_path, onClick: this.handleInvalidate}, "force file invalidation"));
+                    }
+                    return (
+                        React.createElement("tr", {key: file.full_path, "data-path": file.full_path.toLowerCase(), className: i%2?'alternate':''},
+                            React.createElement("td", null,
+                                React.createElement("div", null,
+                                    React.createElement("span", {className: "pathname"}, file.full_path), React.createElement("br", null),
+                                    React.createElement(FilesMeta, {data: [file.readable.hits, file.readable.memory_consumption, file.last_used]}),
+                                    invalidate,
+                                    invalidated
+                                )
+                            )
+                        )
+                    );
+                }.bind(this));
+                return (
+                    React.createElement("div", null,
+                        React.createElement(FilesListed, {showing: this.state.showing}),
+                        React.createElement("table", null,
+                            React.createElement("thead", null,
+                                React.createElement("tr", null,
+                                    React.createElement("th", null, "Script")
+                                )
+                            ),
+                            React.createElement("tbody", null, fileNodes)
+                        )
+                    )
+                );
+            } else {
+                return React.createElement("span", null);
+            }
+        }
+    });
+
+    var FilesMeta = React.createClass({displayName: "FilesMeta",
+        render: function() {
+            return (
+                React.createElement("span", {className: "metainfo"},
+                    React.createElement("b", null, "hits: "), React.createElement("span", null, this.props.data[0], ", "),
+                    React.createElement("b", null, "memory: "), React.createElement("span", null, this.props.data[1], ", "),
+                    React.createElement("b", null, "last used: "), React.createElement("span", null, this.props.data[2])
+                )
+            );
+        }
+    });
+
+    var FilesListed = React.createClass({displayName: "FilesListed",
+        getInitialState: function() {
+            return {
+                formatted : opstate.overview.readable.num_cached_scripts,
+                total     : opstate.overview.num_cached_scripts
+            };
+        },
+        render: function() {
+            var display = this.state.formatted + ' file' + (this.state.total == 1 ? '' : 's') + ' cached';
+            if (this.props.showing !== null && this.props.showing != this.state.total) {
+                display += ', ' + this.props.showing + ' showing due to filter';
+            }
+            return (React.createElement("h3", null, display));
+        }
+    });
+
+    var overviewCountsObj = ReactDOM.render(React.createElement(OverviewCounts, null), document.getElementById('counts'));
+    var generalInfoObj = ReactDOM.render(React.createElement(GeneralInfo, null), document.getElementById('generalInfo'));
+    var filesObj = ReactDOM.render(React.createElement(Files, null), document.getElementById('filelist'));
+    ReactDOM.render(React.createElement(Directives, null), document.getElementById('directives'));
+</script>
+
+</body>
+</html>
diff --git a/dev/quick/registry_rebuild.php b/dev/quick/registry_rebuild.php
new file mode 100644
index 0000000..2a911fc
--- /dev/null
+++ b/dev/quick/registry_rebuild.php
@@ -0,0 +1,289 @@
+<?php
+
+include_once('_secure.inc');
+
+global $registry_rebuild_start;
+$registry_rebuild_start = time();
+
+function registry_rebuild_log($message) {
+  global $registry_rebuild_start;
+  $lapsed = time() - $registry_rebuild_start;
+  print "<p>[{$lapsed}s]: {$message}</p>";
+  ob_flush();
+  flush();
+}
+
+function registry_rebuild_clear_couchbase() {
+  // Try to flush any couchbase bucket....
+  if (class_exists(\Drupal\couchbasedrupal\CouchbaseManager::class)) {
+    /** @var \Drupal\couchbasedrupal\CouchbaseManager */
+    $manager = \Drupal\couchbasedrupal\CouchbaseManager::instance();
+    foreach ($manager->listServers() as $name) {
+      try {
+        $bucket = $manager->getBucketFromConfig($name);
+        $bucket->manager()->flush();
+        registry_rebuild_log("Flushed Couchbase bucket: $name");
+      }
+      catch (\Exception $e) {
+        registry_rebuild_log("Couchbase error: {$e->getMessage()}");
+      }
+
+    }
+  }
+}
+
+function registry_rebuild_clear_wincache() {
+  // Clear al in memory cache.
+  if (function_exists('wincache_ucache_clear')) {
+    wincache_ucache_clear();
+  }
+}
+
+/**
+ * Root directory of Drupal installation. Note that you can change this
+ * if you need to. It just has to point to the actual root. This assumes
+ * that the php file is being run in sites/all/modules/registry_rebuild.
+ */
+
+header("Content-Type: text/html; charset=utf-8");
+
+ini_set('memory_limit', -1);
+define('DRUPAL_ROOT', define_drupal_root());
+chdir(DRUPAL_ROOT);
+define('MAINTENANCE_MODE', 'update');
+
+print '<html><title>Registry Rebuild</title><head></head><body> <p>Starting...</p>';
+
+registry_rebuild_log("DRUPAL_ROOT is <em>" . DRUPAL_ROOT . "</em>.");
+
+global $_SERVER;
+$_SERVER['REMOTE_ADDR'] = 'nothing';
+
+global $include_dir;
+$include_dir = DRUPAL_ROOT . '/includes';
+$module_dir = DRUPAL_ROOT . '/modules';
+// Use core directory if it exists.
+if (file_exists(DRUPAL_ROOT . '/core/includes/bootstrap.inc')) {
+  $include_dir = DRUPAL_ROOT . '/core/includes';
+  $module_dir = DRUPAL_ROOT . '/core/modules';
+}
+
+$includes = array(
+  $include_dir . '/bootstrap.inc',
+  $include_dir . '/common.inc',
+  $include_dir . '/database.inc',
+  $include_dir . '/schema.inc',
+  $include_dir . '/actions.inc',
+  $include_dir . '/entity.inc',
+  $module_dir  . '/system/system.module',
+  $include_dir . '/database/query.inc',
+  $include_dir . '/database/select.inc',
+  $include_dir . '/registry.inc',
+  $include_dir . '/module.inc',
+  $include_dir . '/menu.inc',
+  $include_dir . '/file.inc',
+  $include_dir . '/theme.inc',
+);
+
+if (function_exists('registry_rebuild')) { // == D7
+  $cache_lock_path_absolute = variable_get('lock_inc');
+  if (!empty($cache_lock_path_absolute)) {
+    $cache_lock_path_relative = DRUPAL_ROOT . '/'. variable_get('lock_inc');
+    // Ensure that the configured lock.inc really exists at that location and
+    // is accessible. Otherwise we use the core lock.inc as fallback.
+    if (is_readable($cache_lock_path_relative) && is_file($cache_lock_path_relative)) {
+      $includes[] = $cache_lock_path_relative;
+      registry_rebuild_log("We will use relative variant of lock.inc.");
+    }
+    elseif (is_readable($cache_lock_path_absolute) && is_file($cache_lock_path_absolute)) {
+      $includes[] = $cache_lock_path_absolute;
+      registry_rebuild_log("We will use absolute variant of lock.inc.");
+    }
+    else {
+      registry_rebuild_log("We will use core implementation of lock.inc as fallback.");
+      $includes[] = DRUPAL_ROOT . '/includes/lock.inc';
+    }
+  }
+  else {
+    $includes[] = DRUPAL_ROOT . '/includes/lock.inc';
+  }
+}
+elseif (!function_exists('cache_clear_all')) { // D8+
+  // TODO
+  // http://api.drupal.org/api/drupal/namespace/Drupal!Core!Lock/8
+  $includes[] = $module_dir . '/entity/entity.module';
+  $includes[] = $module_dir . '/entity/entity.controller.inc';
+}
+// In Drupal 6 the configured lock.inc is already loaded during
+// DRUSH_BOOTSTRAP_DRUPAL_DATABASE
+
+foreach ($includes as $include) {
+  if (file_exists($include)) {
+    require_once($include);
+  }
+}
+
+registry_rebuild_log("Bootstrapping to DRUPAL_BOOTSTRAP_SESSION");
+
+drupal_bootstrap(DRUPAL_BOOTSTRAP_SESSION);
+registry_rebuild_rebuild();
+registry_rebuild_clear_wincache();
+registry_rebuild_clear_couchbase();
+
+/**
+ * Find the drupal root directory by looking in parent directories.
+ * If unable to discover it, fail and exit.
+ */
+function define_drupal_root() {
+  // This is the smallest number of directories to go up: from /sites/all/modules/registry_rebuild.
+  $parent_count = 1;
+  // 8 seems reasonably far to go looking up.
+  while ($parent_count < 8) {
+    $dir = realpath(getcwd() . str_repeat('/..', $parent_count));
+    if (file_exists($dir . '/index.php')) {
+      return $dir;
+    }
+    $parent_count++;
+  }
+  registry_rebuild_log("Failure: Unable to discover DRUPAL_ROOT. You may want to explicitly define it near the top of registry_rebuild.php");
+  exit(1);
+}
+
+/**
+ * Before calling this we need to be bootstrapped to DRUPAL_BOOTSTRAP_SESSION.
+ */
+function registry_rebuild_rebuild() {
+  // This section is not functionally important. It's just using the
+  // registry_get_parsed_files() so that it can report the change. Drupal 7 only.
+  if (function_exists('registry_rebuild')) {
+    $connection_info = Database::getConnectionInfo();
+    $driver = $connection_info['default']['driver'];
+    global $include_dir;
+    require_once $include_dir . '/database/' . $driver . '/query.inc';
+    $parsed_before = registry_get_parsed_files();
+  }
+
+  // Separate bootstrap cache exists only in Drupal 7 or newer.
+  // They are cleared later again via drupal_flush_all_caches().
+  if (function_exists('registry_rebuild')) { // D7
+    cache_clear_all('lookup_cache', 'cache_bootstrap');
+    cache_clear_all('variables', 'cache_bootstrap');
+    cache_clear_all('module_implements', 'cache_bootstrap');
+    registry_rebuild_log("Bootstrap caches have been cleared in DRUPAL_BOOTSTRAP_SESSION");
+  }
+  elseif (!function_exists('cache_clear_all')) { // D8+
+    cache('bootstrap')->deleteAll();
+    registry_rebuild_log("Bootstrap caches have been cleared in DRUPAL_BOOTSTRAP_SESSION");
+  }
+
+  // We later run system_rebuild_module_data() and registry_update() on Drupal 7 via
+  // D7-only registry_rebuild() wrapper, which is run inside drupal_flush_all_caches().
+  // It is an equivalent of module_rebuild_cache() in D5-D6 and is normally run via
+  // our universal wrapper registry_rebuild_cc_all() -- see further below.
+  // However, we are still on the DRUPAL_BOOTSTRAP_SESSION level here,
+  // and we want to make the initial rebuild as atomic as possible, so we can't
+  // run everything from registry_rebuild_cc_all() yet, so we run an absolute
+  // minimum we can at this stage, core specific.
+  if (function_exists('registry_rebuild')) { // D7 only
+    registry_rebuild_log("Doing registry_rebuild() in DRUPAL_BOOTSTRAP_SESSION");
+    registry_rebuild();
+  }
+  elseif (!function_exists('registry_rebuild') && function_exists('system_rebuild_module_data')) { // D8+
+    registry_rebuild_log("Doing system_rebuild_module_data() in DRUPAL_BOOTSTRAP_SESSION");
+    system_rebuild_module_data();
+  }
+  else { // D5-D6
+    registry_rebuild_log("Doing module_rebuild_cache() in DRUPAL_BOOTSTRAP_SESSION");
+    module_list(TRUE, FALSE);
+    module_rebuild_cache();
+  }
+
+  registry_rebuild_clear_wincache();
+
+  registry_rebuild_log("Bootstrapping to DRUPAL_BOOTSTRAP_FULL");
+  drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);
+  // We can run our wrapper now, since we are in a full bootstrap already.
+  registry_rebuild_log("Rebuilding registry via registry_rebuild_cc_all in DRUPAL_BOOTSTRAP_FULL");
+  registry_rebuild_cc_all();
+  registry_rebuild_log("Clearing Wincache User Cache");
+  registry_rebuild_clear_wincache();
+
+
+  // Extra cleanup available for D7 only.
+  if (function_exists('registry_rebuild')) {
+    $parsed_after = registry_get_parsed_files();
+    // Remove files which don't exist anymore.
+    $filenames = array();
+    foreach ($parsed_after as $filename => $file) {
+      if (!file_exists($filename)) {
+        $filenames[] = $filename;
+      }
+    }
+    if (!empty($filenames)) {
+      db_delete('registry_file')
+        ->condition('filename', $filenames)
+        ->execute();
+      db_delete('registry')
+        ->condition('filename', $filenames)
+        ->execute();
+      print("Deleted " . count($filenames) . ' stale files from registry manually.');
+    }
+    $parsed_after = registry_get_parsed_files();
+    registry_rebuild_log("There were " . count($parsed_before) . " files in the registry before and " . count($parsed_after) . " files now.");
+  }
+
+  // Now verify that all the enabled modules are mapped to an existing file, otherwise throw the error!
+  $query = db_select('system')
+  ->fields('system', array('filename', 'name'))
+  ->condition('status', 1, '=')
+  ->execute();
+
+  foreach ($query as $item) {
+    $full_path = DRUPAL_ROOT . '/' . $item->filename;
+    if (!file_exists($full_path)) {
+      registry_rebuild_log("The enabled system module file <b>{$item->filename}</b> does not exist for module <b>{$item->name}</b>");
+    }
+  }
+  registry_rebuild_log("If you don't see any crazy fatal errors, your registry has been rebuilt.");
+}
+
+/**
+ * Registry Rebuild needs to aggressively clear all caches,
+ * not just some bins (at least to attempt it) also *before*
+ * attempting to rebuild registry, or it may not be able
+ * to fix the problem at all, if it relies on some cached
+ * and no longer valid data/paths etc. This problem has been
+ * confirmed and reproduced many times with option --fire-bazooka
+ * which is available only in the Drush variant, but it confirms
+ * the importance of starting with real, raw and not cached
+ * in any way site state. While the --no-cache-clear option
+ * still disables this procedure, --fire-bazooka takes precedence
+ * and forces all caches clear action. All caches are cleared
+ * by default in the PHP script variant.
+ */
+function registry_rebuild_cc_all() {
+  if (function_exists('cache_clear_all')) {
+    cache_clear_all('*', 'cache', TRUE);
+    cache_clear_all('*', 'cache_form', TRUE);
+  }
+  else {
+    cache('cache')->deleteAll();
+    cache('cache_form')->deleteAll();
+  }
+
+  if (function_exists('module_rebuild_cache')) { // D5-D6
+    module_list(TRUE, FALSE);
+    module_rebuild_cache();
+  }
+
+  if (function_exists('drupal_flush_all_caches')) { // D6+
+    drupal_flush_all_caches();
+  }
+  else { // D5
+    cache_clear_all();
+    system_theme_data();
+    node_types_rebuild();
+    menu_rebuild();
+  }
+  registry_rebuild_log("All caches have been cleared with registry_rebuild_cc_all.");
+}
diff --git a/dev/quick/request.php b/dev/quick/request.php
new file mode 100644
index 0000000..b603aea
--- /dev/null
+++ b/dev/quick/request.php
@@ -0,0 +1,7 @@
+<?php
+
+include_once('_secure.inc');
+
+header("Content-Type: text/html; charset=utf-8");
+
+echo json_encode($_SERVER);
\ No newline at end of file
diff --git a/dev/quick/wincache.php b/dev/quick/wincache.php
new file mode 100644
index 0000000..d2fdb30
--- /dev/null
+++ b/dev/quick/wincache.php
@@ -0,0 +1,1713 @@
+<?php
+
+include_once('_secure.inc');
+
+/**
+ * @file
+ * Wincache Statistics report. 
+ */
+
+/**
+ * Windows Cache for PHP
+ *
+ * Copyright (c) 2009, Microsoft Corporation. All rights reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following
+ * conditions are met:
+ *
+ * - Redistributions of source code must retain the above
+ * copyright notice, this list of conditions and the following disclaimer.
+ *
+ * - Redistributions in binary form must reproduce the above copyright notice,
+ * this list of conditions and the following disclaimer in the documentation
+ * and/or other materials provided with the distribution.
+ *
+ * - Neither the name of the Microsoft Corporation nor the names of its
+ * contributors may be used to endorse or promote products derived from
+ * this software without specific prior written permission.
+ * 
+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
+ * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
+ * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
+ * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
+ * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
+ * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
+ * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
+ * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
+ * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
+ * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+ *
+ * ---------------------------------------------------------------------------
+ * Module: wincache.php
+ * ---------------------------------------------------------------------------
+ * Authors:
+ * ---------------------------------------------------------------------------
+ * Don Venkat Raman <don.raman@microsoft.com>
+ * Ruslan Yakushev <ruslany@microsoft.com>
+ */
+
+/**
+ * Configuration settings.
+ *
+ * If you do not want to use authentication for this page,
+ * set USE_AUTHENTICATION to 0.
+ * If you use authentication then replace the default password.
+ */
+define('USE_AUTHENTICATION', 1);
+//define('USERNAME', 'wincache');
+//define('PASSWORD', 'wincache');
+
+/**
+ * Authentication.
+ *
+ * The Basic PHP authentication will work only when IIS is
+ * configured to support Anonymous Authentication' and nothing else.
+ * If IIS is configured to support/use any other kind of authentication
+ * like Basic/Negotiate/Digest etc, this will not work.
+ * In that case use the array below to define the names of users in your 
+ * domain/network/workgroup which you want to grant access to.
+ */
+//$user_allowed = array('DOMAIN\user1', 'DOMAIN\user2', 'DOMAIN\user3');
+
+/**
+ * If the array contains string 'all', then all the users authenticated by IIS
+ * will have access to the page. Uncomment the below line and comment above line
+ * to grant access to all users who gets authenticated by IIS.
+ */
+/* $user_allowed = array('all'); */
+
+/** ===================== END OF CONFIGURATION SETTINGS ========================== */
+
+//if (!extension_loaded('wincache')) {
+//  die('The extension WINCACHE (php_wincache.dll) is not loaded. No statistics to show. ');
+//}
+
+//if (!defined('BYPASS_SECURITY_CHECK')) {
+//  define('BYPASS_SECURITY_CHECK', FALSE);
+//}
+
+//if (USE_AUTHENTICATION == 1 && !(BYPASS_SECURITY_CHECK === TRUE)) {
+//  if (!empty($_SERVER['AUTH_TYPE']) && !empty($_SERVER['REMOTE_USER']) && strcasecmp($_SERVER['REMOTE_USER'], 'anonymous')) {
+//    if (!in_array(strtolower($_SERVER['REMOTE_USER']), array_map('strtolower', $user_allowed))
+//    && !in_array('all', array_map('strtolower', $user_allowed))) {
+//      echo 'You are not authorised to view this page. Please contact server admin to get permission. Exiting. ';
+//      exit;
+//    }
+//  }
+//  elseif (!isset($_SERVER['PHP_AUTH_USER']) || !isset($_SERVER['PHP_AUTH_PW']) || $_SERVER['PHP_AUTH_USER'] != USERNAME || $_SERVER['PHP_AUTH_PW'] != PASSWORD) {
+//    header('WWW-Authenticate: Basic realm="WINCACHE Log In!"');
+//    header('HTTP/1.0 401 Unauthorized');
+//    exit;
+//  }
+//  elseif ($_SERVER['PHP_AUTH_PW'] == 'wincache') {
+//    echo "Please change the default password to get this page worPking. Exiting.";
+//    exit;
+//  }
+//}
+
+// Global variables.
+global  $ocache_mem_info, 
+$ocache_file_info,
+$ocache_summary_info,
+$fcache_mem_info,
+$fcache_file_info,
+$fcache_summary_info,
+$rpcache_mem_info,
+$rpcache_file_info,
+$ucache_mem_info,
+$ucache_info,
+$scache_mem_info,
+$scache_info,
+$user_cache_available,
+$session_cache_available;
+
+define('IMG_WIDTH', 320);
+define('IMG_HEIGHT', 220);
+define('SUMMARY_DATA', 1);
+// Opcode cache.
+define('OCACHE_DATA', 2);
+// File cache.
+define('FCACHE_DATA', 3);
+// User cache.
+define('UCACHE_DATA', 4);
+// Session cache.
+define('SCACHE_DATA', 5);
+// Resolve file cache.
+define('RCACHE_DATA', 6);
+define('BAR_CHART', 1);
+define('PIE_CHART', 2);
+define('PATH_MAX_LENGTH', 45);
+define('INI_MAX_LENGTH', 45);
+define('SUBKEY_MAX_LENGTH', 90);
+define('CACHE_MAX_ENTRY', 250);
+
+// WinCache settings that are used for debugging purposes.
+$settings_to_hide = array('wincache.localheap', 'wincache.debuglevel', 'wincache.olocaltest');
+
+// Input parameters check.
+//$PHP_SELF = isset($_SERVER['PHP_SELF']) ? htmlentities(strip_tags($_SERVER['PHP_SELF'],''), ENT_QUOTES, 'UTF-8') : '';
+$PHP_SELF = strtok($_SERVER['REQUEST_URI'],'?');
+$page = isset($_GET['page']) ? $_GET['page'] : SUMMARY_DATA;
+if (!is_numeric($page) || $page < SUMMARY_DATA || $page > RCACHE_DATA)
+  $page = SUMMARY_DATA;
+
+$img = 0;
+if (isset($_GET['img']) && is_numeric($_GET['img'])) {
+  $img = $_GET['img'];
+  if ($img < OCACHE_DATA || $img > SCACHE_DATA)
+    $img = 0;
+}
+$chart_type = BAR_CHART;
+if (isset($_GET['type']) && is_numeric($_GET['type'])) {
+  $chart_type = $_GET['type'];
+  if ($chart_type < BAR_CHART || $chart_type > PIE_CHART)
+    $chart_type = BAR_CHART;
+}
+$chart_param1 = 0;
+if (isset($_GET['p1']) && is_numeric($_GET['p1'])) {
+  $chart_param1 = $_GET['p1'];
+  if ($chart_param1 < 0) 
+    $chart_param1 = 0;
+  elseif ($chart_param1 > PHP_INT_MAX)
+    $chart_param1 = PHP_INT_MAX;
+}
+$chart_param2 = 0;
+if (isset($_GET['p2']) && is_numeric($_GET['p2'])) {
+  $chart_param2 = $_GET['p2'];
+  if ($chart_param2 < 0) 
+    $chart_param2 = 0;
+  elseif ($chart_param2 > PHP_INT_MAX)
+    $chart_param2 = PHP_INT_MAX;
+}
+
+$show_all_ucache_entries = 0;
+if (isset($_GET['all']) && is_numeric($_GET['all'])) {
+  $show_all_ucache_entries = $_GET['all'];
+  if ($show_all_ucache_entries < 0 || $show_all_ucache_entries > 1)
+    $show_all_ucache_entries = 0;
+}
+
+$clear_user_cache = 0;
+if (isset($_GET['clc']) && is_numeric($_GET['clc'])) {
+  $clear_user_cache = $_GET['clc'];
+  if ($clear_user_cache < 0 || $clear_user_cache > 1)
+    $clear_user_cache = 0;
+}
+
+$clear_session_cache = 0;
+if (isset($_GET['clsc']) && is_numeric($_GET['clsc'])) {
+  $clear_session_cache = $_GET['clsc'];
+  if ($clear_session_cache < 0 || $clear_session_cache > 1)
+    $clear_session_cache = 0;
+}
+
+$ucache_key = NULL;
+if (isset($_GET['key']))
+  $ucache_key = $_GET['key'];
+// End of input parameters check.
+
+// Initialize global variables.
+$user_cache_available = function_exists('wincache_ucache_info') && !strcmp(ini_get('wincache.ucenabled'), "1");
+$session_cache_available = function_exists('wincache_scache_info') && (!strcasecmp(ini_get('session.save_handler'), "wincache") || (isset($GLOBALS['WINCACHE_SESSION_ACTIVE']) && $GLOBALS['WINCACHE_SESSION_ACTIVE'] == TRUE));
+$ocache_mem_info = NULL;
+$ocache_file_info = NULL;
+$ocache_summary_info = NULL;
+$fcache_mem_info = NULL;
+$fcache_file_info = NULL;
+$fcache_summary_info = NULL;
+$rpcache_mem_info = NULL;
+$rpcache_file_info = NULL;
+$ucache_mem_info = NULL;
+$ucache_info = NULL;
+$scache_mem_info = NULL;
+$scache_info = NULL;
+$sort_key = NULL;
+
+if ($session_cache_available && ($page == SUMMARY_DATA || $page == SCACHE_DATA) && (session_status() == PHP_SESSION_NONE)) {
+  @session_name('WINCACHE_SESSION');
+  session_start();
+}
+
+function cmp($a, $b)
+{
+  global $sort_key;
+  if ($sort_key == 'file_name')
+    return strcmp(get_trimmed_filename($a[$sort_key], PATH_MAX_LENGTH), get_trimmed_filename($b[$sort_key], PATH_MAX_LENGTH));
+  elseif ($sort_key == 'resolve_path')
+    return strcmp(get_trimmed_string($a[$sort_key], PATH_MAX_LENGTH), get_trimmed_string($b[$sort_key], PATH_MAX_LENGTH));
+  else
+    return 0;
+}
+
+function convert_bytes_to_string($bytes) {
+  $units = array(0 => 'B', 1 => 'kB', 2 => 'MB', 3 => 'GB');
+  $log = log($bytes, 1024);
+  $power = (int) $log;
+  $size = pow(1024, $log - $power);
+  return round($size, 2) . ' ' . $units[$power];
+}
+
+function seconds_to_words($seconds) {
+  // Return value.
+  $ret = "";
+  // Get the hours.
+  $hours = intval(intval($seconds) / 3600);
+  if ($hours > 0) {
+    $ret .= "$hours hours ";
+  }
+  // Get the minutes.
+  $minutes = bcmod((intval($seconds) / 60), 60);
+  if ($hours > 0 || $minutes > 0) {
+    $ret .= "$minutes minutes ";
+  }
+  // Get the seconds.
+  $seconds = bcmod(intval($seconds), 60);
+  $ret .= "$seconds seconds";
+
+  return $ret;
+}
+
+function get_trimmed_filename($filepath, $max_len) {
+  if ($max_len <= 0) {
+    die ('The maximum allowed length must be bigger than 0');
+  }
+  $result = basename($filepath);
+  if (strlen($result) > $max_len) 
+    $result = substr($result, -1 * $max_len);
+
+  return $result;
+}
+
+function get_trimmed_string($input, $max_len) {
+  if ($max_len <= 3) {
+    die ('The maximum allowed length must be bigger than 3');
+  }
+
+  $result = $input;
+  if (strlen($result) > $max_len) 
+    $result = substr($result, 0, $max_len - 3). ' ... ';
+
+  return $result;
+}
+
+function get_trimmed_ini_value($input, $max_len, $separators = array('|', ',')) {
+  if ($max_len <= 3) {
+    die ('The maximum allowed length must be bigger than 3');
+  }
+
+  $result = $input;
+  $lastindex = 0;
+  if (strlen($result) > $max_len) {
+    $result = substr($result, 0, $max_len - 3). ' ... ';
+    if (!is_array($separators)) die('The separators must be in an array');
+    foreach ($separators as $separator) {
+      $index = strripos($result, $separator);
+      if ($index !== FALSE  && $index > $lastindex) {
+        $lastindex = $index;
+      }
+    }
+    if (0 < $lastindex && $lastindex < ($max_len - 3)) {
+      $result = substr($result, 0, $lastindex + 1). ' ... ';
+    }
+  }
+  return $result;
+}
+
+function get_ocache_summary($entries) {
+  $result = array();
+  $result['total_classes'] = 0;
+  $result['total_functions'] = 0;
+  $result['oldest_entry'] = '';
+  $result['recent_entry'] = '';
+
+  if (isset($entries) && count($entries) > 0 && isset($entries[1]['file_name'])) {
+    foreach ((array)$entries as $entry) {
+      $result['total_classes'] += $entry['class_count'];
+      $result['total_functions'] += $entry['function_count'];
+    }
+  }
+  return $result;
+}
+function get_fcache_summary($entries) {
+  $result = array();
+  $result['total_size'] = 0;
+  $result['oldest_entry'] = '';
+  $result['recent_entry'] = '';
+
+  if (isset($entries) && count($entries) > 0 && isset($entries[1]['file_name'])) {
+    foreach ((array)$entries as $entry) {
+      $result['total_size'] += $entry['file_size'];
+    }
+  }
+  return $result;
+}
+
+function get_ocache_size_markup($size) {
+  $size_string = convert_bytes_to_string($size);
+
+  if ($size > (ini_get('wincache.ocachesize') * pow(1024, 2))) {
+    return '<td class="n" title="The opcode cache size has been automatically increased to be at least 3 times bigger than file cache size.">' .$size_string. '</td>';
+  }
+
+  return '<td class="v">' .$size_string. '</td>';    
+}
+
+function get_chart_title($chart_data) {
+  $chart_title = '';
+  switch($chart_data) {
+    case OCACHE_DATA:
+      $chart_title = 'Opcode Cache';
+      break;
+    case FCACHE_DATA:
+      $chart_title = 'File Cache';
+      break;
+    case UCACHE_DATA:
+      $chart_title = 'User Cache';
+      break;
+    case SCACHE_DATA:
+      $chart_title = 'Session Cache';
+  }
+  return $chart_title;
+}
+
+function gd_loaded() {
+  return extension_loaded('gd');
+}
+
+if ($img > 0) {
+  if (!gd_loaded())
+    exit(0);
+
+  function create_hit_miss_chart($width, $height, $hits, $misses, $title = 'Hits & Misses (in %)') {
+    
+    $hit_percent = 0;
+    $miss_percent = 0;
+    if ($hits < 0) $hits = 0;
+    if ($misses < 0) $misses = 0;
+    if ($hits > 0 || $misses > 0) {
+      $hit_percent = round($hits / ($hits + $misses) * 100, 2);
+      $miss_percent = round($misses / ($hits + $misses) * 100, 2);
+    }
+    $data = array('Hits' => $hit_percent, 'Misses' => $miss_percent);
+    
+    $image = imagecreate($width, $height); 
+
+    // colors 
+    $white = imagecolorallocate($image, 0xFF, 0xFF, 0xFF);
+    $phpblue = imagecolorallocate($image, 0x5C, 0x87, 0xB2);
+    $black = imagecolorallocate($image, 0x00, 0x00, 0x00);
+    $gray = imagecolorallocate($image, 0xC0, 0xC0, 0xC0);
+
+    $maxval = max($data);
+    $nval = sizeof($data);
+
+    // Draw something here.
+    // Left horizontal margin for y-labels.
+    $hmargin = 38;
+    // Top (bottom) vertical margin for title (x-labels).
+    $vmargin = 20; 
+
+    $base = floor(($width - $hmargin) / $nval);
+
+    // X-size of plot.
+    $xsize = $nval * $base - 1;
+    // Y-size of plot.
+    $ysize = $height - 2 * $vmargin;
+    
+    // Plot frame.
+    imagerectangle($image, $hmargin, $vmargin, $hmargin + $xsize, $vmargin + $ysize, $black); 
+
+    // Top label.
+    $titlefont = 3;
+    $txtsize = imagefontwidth($titlefont) * strlen($title);
+    $xpos = (int)($hmargin + ($xsize - $txtsize) / 2);
+    // Force positive coordinates.
+    $xpos = max(1, $xpos);
+    // Distance from top.
+    $ypos = 3;
+    imagestring($image, $titlefont, $xpos, $ypos, $title , $black);
+
+    // Grid lines.
+    $labelfont = 2;
+    $ngrid = 4;
+
+    $dydat = 100 / $ngrid;
+    $dypix = $ysize / $ngrid;
+
+    for ($i = 0; $i <= $ngrid; $i++) {
+      $ydat = (int)($i * $dydat);
+      $ypos = $vmargin + $ysize - (int)($i * $dypix);
+
+      $txtsize = imagefontwidth($labelfont) * strlen($ydat);
+      $txtheight = imagefontheight($labelfont);
+
+      $xpos = (int)(($hmargin - $txtsize) / 2);
+      $xpos = max(1, $xpos);
+
+      imagestring($image, $labelfont, $xpos, $ypos - (int)($txtheight/2), $ydat, $black);
+
+      if (!($i == 0) && !($i >= $ngrid)) 
+        imageline($image, $hmargin - 3, $ypos, $hmargin + $xsize, $ypos, $gray); 
+      // Don't draw at Y=0 and top.
+    }
+
+    // Graph bars.
+    // Columns and x labels.
+    // Galf of spacing between columns.
+    $padding = 30;
+    // Pixels per data unit.
+    $yscale = $ysize / ($ngrid * $dydat);
+
+    for ($i = 0; list($xval, $yval) = each($data); $i++) {
+
+      // Vertical columns.
+      $ymax = $vmargin + $ysize; 
+      $ymin = $ymax - (int)($yval * $yscale); 
+      $xmax = $hmargin + ($i + 1) * $base - $padding; 
+      $xmin = $hmargin + $i * $base + $padding; 
+
+      imagefilledrectangle($image, $xmin, $ymin, $xmax, $ymax, $phpblue); 
+
+      // X labels.
+      $xlabel = $xval. ': ' .$yval. '%';
+      $txtsize = imagefontwidth($labelfont) * strlen($xlabel);
+
+      $xpos = ($xmin + $xmax - $txtsize) / 2;
+      $xpos = max($xmin, $xpos);
+      // Distance from x axis.
+      $ypos = $ymax + 3; 
+
+      imagestring($image, $labelfont, $xpos, $ypos, $xlabel, $black); 
+    }
+    return $image;
+  }
+  
+  function create_used_free_chart($width, $height, $used_memory, $free_memory, $title = 'Free & Used Memory (in %)') {
+    // Check the input parameters to avoid division by zero and weird cases.
+    if ($free_memory <= 0 && $used_memory <= 0) {
+      $free_memory = 1;
+      $used_memory = 0;
+    }
+    
+    $centerX = 120;
+    $centerY = 120;
+    $diameter = 120;
+
+    // Left (right) horizontal margin.
+    $hmargin = 5;
+    // Top (bottom) vertical margin.
+    $vmargin = 20;
+
+    $image = imagecreate($width, $height);
+
+    // Colors. 
+    $white = imagecolorallocate($image, 0xFF, 0xFF, 0xFF);
+    $black = imagecolorallocate($image, 0x00, 0x00, 0x00);
+    $pie_color[1] = imagecolorallocate($image, 0x5C, 0x87, 0xB2);
+    $pie_color[2] = imagecolorallocate($image, 0xCB, 0xE1, 0xEF);
+    $pie_color[3] = imagecolorallocate($image, 0xC0, 0xC0, 0xC0);
+
+    // Label font size.
+    $labelfont = 2;
+    $hfw = imagefontwidth($labelfont);
+    $vfw = imagefontheight($labelfont);
+
+    // Border.
+    imagerectangle($image, $hmargin, $vmargin, $width - $hmargin, $height - $vmargin, $black); 
+
+    // Top label.
+    $titlefont = 3;
+    $txtsize = imagefontwidth($titlefont) * strlen($title);
+    $hpos = (int)(($width - $txtsize) / 2);
+    // Distance from top.
+    $vpos = 3; 
+    imagestring($image, $titlefont, $hpos, $vpos, $title , $black);
+
+    $total = 0;
+    $n = 0;
+    $items = array('Used memory' => $used_memory, 'Free memory' => $free_memory);
+
+    // Read the arguments into different arrays:
+    foreach($items as $key => $val) {
+      $n++;
+      $label[$n] = $key;
+      $value[$n] = $val;
+      $total += $val;
+      $arc_dec[$n] = $total*360;
+      $arc_rad[$n] = $total*2*pi();
+    }
+
+    // The base:
+    $arc_rad[0] = 0;
+    $arc_dec[0] = 0;
+
+    // Count the labels:
+    for ($i = 1; $i <= $n; $i++) {
+      
+      // Calculate the percents:
+      $perc[$i] = $value[$i] / $total;
+      $percstr[$i] = (string) number_format($perc[$i] * 100, 2)."%";
+      // Label with percentage:
+      $label[$i] = $percstr[$i];
+
+      // Calculate the arc and line positions:
+      $arc_rad[$i] = $arc_rad[$i] / $total;
+      $arc_dec[$i] = $arc_dec[$i] / $total;
+      $hpos = round($centerX + ($diameter / 2) * sin($arc_rad[$i]));
+      $vpos = round($centerY + ($diameter / 2) * cos($arc_rad[$i]));
+      imageline($image, $centerX, $centerY, $hpos, $vpos, $black);
+      imagearc($image, $centerX, $centerY, $diameter, $diameter, $arc_dec[$i-1], $arc_dec[$i], $black);
+
+      // Calculate the positions for the labels:
+      $arc_rad_label = $arc_rad[$i-1] + 0.5 * $perc[$i] * 2 * pi();
+      $hpos = $centerX + 1.1 * ($diameter / 2) * sin($arc_rad_label);
+      $vpos = $centerY + 1.1 * ($diameter / 2) * cos($arc_rad_label);
+      if (($arc_rad_label > 0.5 * pi()) && ($arc_rad_label < 1.5 * pi())) {
+        $vpos = $vpos - $vfw;
+      }
+      if ($arc_rad_label > pi()) {
+        $hpos = $hpos - $hfw * strlen($label[$i]);
+      }
+      // Display the labels:
+      imagestring($image, $labelfont, $hpos, $vpos, $label[$i], $black);
+    }
+
+    // Fill the parts with their colors:
+    for ($i = 1; $i <= $n; $i++) {
+      if (round($arc_dec[$i] - $arc_dec[$i-1]) != 0) {
+        $arc_rad_label = $arc_rad[$i - 1] + 0.5 * $perc[$i] * 2 * pi();
+        $hpos = $centerX + 0.8 * ($diameter / 2) * sin($arc_rad_label);
+        $vpos = $centerY + 0.8 * ($diameter / 2) * cos($arc_rad_label);
+        imagefilltoborder($image, $hpos, $vpos, $black, $pie_color[$i]);
+      }
+    }
+
+    // Legend.
+    $hpos = $centerX + 1.1 * ($diameter / 2) + $hfw * strlen('50.00%');
+    $vpos = $centerY - ($diameter / 2);
+    $i = 1;
+    $thumb_size = 5;
+    foreach ($items as $key => $value) {
+      imagefilledrectangle($image, $hpos, $vpos, $hpos + $thumb_size, $vpos + $thumb_size, $pie_color[$i++]);
+      imagestring($image, $labelfont, $hpos + $thumb_size + 5, $vpos, $key, $black);
+      $vpos += $vfw + 2;
+    }
+    return $image;
+  }
+
+  $png_image = NULL;
+  $chart_title = get_chart_title($img);
+  
+  if ($chart_type == PIE_CHART) {
+    $png_image = create_used_free_chart(IMG_WIDTH, IMG_HEIGHT, $chart_param1, $chart_param2, 'Memory Usage by ' .$chart_title. ' (in %)');
+  }
+  else{
+    $png_image = create_hit_miss_chart(IMG_WIDTH, IMG_HEIGHT,  $chart_param1, $chart_param2, $chart_title. ' Hits & Misses (in %)');
+  }
+
+  if ($png_image !== NULL) {
+    // Flush image.
+    header('Content-type: image/png');
+    imagepng($png_image);
+    imagedestroy($png_image); 
+  }
+  exit;
+}
+
+function get_chart_markup($data_type, $chart_type, $chart_param1, $chart_param2) {
+  global	$PHP_SELF;
+
+  $result = '';
+  $alt_title = '';
+
+  if (gd_loaded()) {
+    $alt_title = get_chart_title($data_type);
+    if ($alt_title == '') {
+      return '';
+    }
+
+    if ($chart_type == BAR_CHART)
+      $alt_title .= ' hit and miss percentage chart';
+    elseif ($chart_type == PIE_CHART)
+      $alt_title .= ' memory usage percentage chart';
+    else
+      return '';
+
+    $result = '<img src="' . $PHP_SELF;
+    $result .= '?img=' . $data_type . '&amp;type=' . $chart_type;
+    $result .= '&amp;p1=' . $chart_param1 . '&amp;p2=' . $chart_param2 . '" ';
+    $result .= 'alt="' . $alt_title . '" width="' . IMG_WIDTH . '" height="' . IMG_HEIGHT . '" />';
+  }
+  else {
+    $result = '<p class="notice">Enable GD library (<em>php_gd2.dll</em>) in order to see the charts.</p>';
+  }
+
+  return $result;
+}
+
+function cache_scope_text($is_local)
+{
+  return ($is_local == true) ? 'local' : 'global';
+}
+
+function init_cache_info($cache_data = SUMMARY_DATA)
+{
+  // Redeclare globals to keep scope.
+  global  $ocache_mem_info, 
+  $ocache_file_info,
+  $ocache_summary_info,
+  $fcache_mem_info,
+  $fcache_file_info,
+  $fcache_summary_info,
+  $rpcache_mem_info,
+  $rpcache_file_info,
+  $ucache_mem_info,
+  $ucache_info,
+  $scache_mem_info,
+  $scache_info,
+  $user_cache_available,
+  $session_cache_available;
+
+  if ($cache_data == SUMMARY_DATA || $cache_data == OCACHE_DATA) {
+    $ocache_mem_info = wincache_ocache_meminfo();
+    $ocache_file_info = wincache_ocache_fileinfo();
+    $ocache_summary_info = get_ocache_summary($ocache_file_info['file_entries']);
+  }
+  if ($cache_data == SUMMARY_DATA || $cache_data == FCACHE_DATA) {
+    $fcache_mem_info = wincache_fcache_meminfo();
+    $fcache_file_info = wincache_fcache_fileinfo();
+    $fcache_summary_info = get_fcache_summary($fcache_file_info['file_entries']);
+  }
+  if ($cache_data == SUMMARY_DATA || $cache_data == RCACHE_DATA) {
+    $rpcache_mem_info = wincache_rplist_meminfo();
+    $rpcache_file_info = wincache_rplist_fileinfo();
+  }
+  if ($user_cache_available && ($cache_data == SUMMARY_DATA || $cache_data == UCACHE_DATA)) {
+    $ucache_mem_info = wincache_ucache_meminfo();
+    $ucache_info = wincache_ucache_info();
+  }
+  if ($session_cache_available && ($cache_data == SUMMARY_DATA || $cache_data == SCACHE_DATA)) {
+    $scache_mem_info = wincache_scache_meminfo();
+    $scache_info = wincache_scache_info();
+  }
+}
+
+if (USE_AUTHENTICATION && $user_cache_available && $clear_user_cache) {
+  wincache_ucache_clear();
+  header('Location: ' . $PHP_SELF . '?page=' . UCACHE_DATA);
+  exit;
+}
+
+if (USE_AUTHENTICATION && $session_cache_available && $clear_session_cache) {
+  init_cache_info(SCACHE_DATA);
+  $current_id = session_id();
+  // Destroy all session.
+  foreach ($scache_info['scache_entries'] as $entry) {
+    // Do not delete own session.
+    if ($current_id == $entry['key_name']) {
+      continue;
+    }
+    session_id($entry['key_name']);
+    session_start();
+    session_destroy();
+    session_write_close();
+    $no_session = TRUE;
+  }
+  // When there is only one session and that is ours,
+  // calling session_start will fail because current
+  // session was not destroyed.
+  if (session_status() == PHP_SESSION_NONE) {
+    session_id($current_id);
+    session_start();
+  }
+  header('Location: ' . $PHP_SELF . '?page=' . SCACHE_DATA);
+  exit;
+}
+
+?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml">
+
+<head>
+    <style type="text/css">
+        body {
+            background-color: #ffffff;
+            color: #000000;
+            font-family: sans-serif;
+            font-size: 0.8em;
+        }
+
+        h1 {
+            font-size: 2em;
+        }
+
+        #content {
+            width: 960px;
+            margin: 5px;
+        }
+
+        #header {
+            color: #ffffff;
+            border: 1px solid black;
+            background-color: #5C87B2;
+            margin-bottom: 1em;
+            padding: 1em 2em;
+        }
+        /*The #menu element credits: */
+        /*Credits: Dynamic Drive CSS Library */
+        /*URL: http://www.dynamicdrive.com/style/ */
+        #menu {
+            width: 100%;
+            overflow: hidden;
+            border-bottom: 1px solid black;
+            margin-bottom: 1em; /*bottom horizontal line that runs beneath tabs*/
+        }
+
+            #menu ul {
+                margin: 0;
+                padding: 0;
+                padding-left: 10px; /*offset of tabs relative to browser left edge*/
+                ;
+                font-weight: bold;
+                font-size: 1.2em;
+                list-style-type: none;
+            }
+
+            #menu li {
+                display: inline;
+                margin: 0;
+            }
+
+                #menu li a {
+                    float: left;
+                    display: block;
+                    text-decoration: none;
+                    margin: 0;
+                    padding: 7px 8px;
+                    border-right: 1px solid white; /*padding inside each tab*/
+                    color: white; /*right divider between tabs*/
+                    background: #5C87B2; /*background of tabs (default state)*/
+                }
+
+                    #menu li a:visited {
+                        color: white;
+                    }
+
+                    #menu li a:hover, #menu li.selected a {
+                        background: #336699;
+                    }
+        /*The end of the menu elements credits */
+        #panel {
+            float: left;
+            width: 100%;
+            margin-bottom: 2em;
+            border: 1px solid black;
+        }
+
+        #panel_header {
+            background-color: #5C87B2;
+            font-weight: bold;
+            color: #ffffff;
+            border-bottom: 1px solid black;
+            padding: 0.5em;
+        }
+
+        #panel_body {
+            background-color: #E7E7E7;
+            padding: 0.5em;
+            white-space:;
+        }
+
+        pre {
+            white-space: pre-wrap; /* css-3 */
+            white-space: -moz-pre-wrap !important; /* Mozilla, since 1999 */
+            white-space: -pre-wrap; /* Opera 4-6 */
+            white-space: -o-pre-wrap; /* Opera 7 */
+            word-wrap: break-word; /* Internet Explorer 5.5+ */
+        }
+
+        .overview {
+            float: left;
+            width: inherit;
+            margin-bottom: 2em;
+        }
+
+        .list {
+            float: left;
+            width: 100%;
+            margin-bottom: 2em;
+        }
+
+        .wideleftpanel {
+            float: left;
+            width: 520px;
+            margin-right: 20px;
+        }
+
+        .widerightpanel {
+            float: left;
+            width: 420px;
+        }
+
+        .leftpanel {
+            float: left;
+            width: 310px;
+        }
+
+        .rightpanel {
+            float: left;
+            width: 320px;
+            margin-left: 5px;
+        }
+
+        .extra_margin {
+            margin-top: 20px;
+        }
+
+        table {
+            border-collapse: collapse;
+        }
+
+        td, th {
+            border: 1px solid black;
+            vertical-align: baseline;
+        }
+
+        th {
+            background-color: #5C87B2;
+            font-weight: bold;
+            color: #ffffff;
+        }
+
+        .e {
+            background-color: #cbe1ef;
+            font-weight: bold;
+            color: #000000;
+            width: 40%;
+        }
+
+        .leftpanel .e {
+            width: 50%;
+        }
+
+        .v {
+            background-color: #E7E7E7;
+            color: #000000;
+        }
+
+        .n {
+            background-color: #FFFF00;
+            color: #000000;
+            font-weight: bold;
+        }
+
+        .notice {
+            display: block;
+            margin-top: 1.5em;
+            padding: 1em;
+            background-color: #ffffe0;
+            border: 1px solid #dddddd;
+        }
+
+        .clear {
+            clear: both;
+        }
+    </style>
+    <title>Windows Cache Extension for PHP - Statistics</title>
+</head>
+
+<body>
+
+    <div id="content">
+        <div id="header">
+            <h1>Windows Cache Extension for PHP - Statistics</h1>
+        </div>
+        <div id="menu">
+            <ul>
+                <li <?php echo ($page == SUMMARY_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', SUMMARY_DATA; ?>">Summary</a></li>
+                <li <?php echo ($page == OCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', OCACHE_DATA; ?>">Opcode Cache</a></li>
+                <li <?php echo ($page == FCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', FCACHE_DATA; ?>">File System Cache</a></li>
+                <li <?php echo ($page == UCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', UCACHE_DATA; ?>">User Cache</a></li>
+                <li <?php echo ($page == SCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', SCACHE_DATA; ?>">Session Cache</a></li>
+                <li <?php echo ($page == RCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', RCACHE_DATA; ?>">Resolve Path Cache</a></li>
+            </ul>
+        </div>
+        <?php if ($page == SUMMARY_DATA) { 
+                init_cache_info(SUMMARY_DATA);
+        ?>
+        <div class="overview">
+            <div class="wideleftpanel">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">General Information</th>
+                    </tr>
+                    <tr>
+                        <td class="e">WinCache version</td>
+                        <td class="v"><?php echo phpversion('wincache'); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">PHP version</td>
+                        <td class="v"><?php echo phpversion(); ?></td>
+                    </tr>
+                    <tr title="<?php echo $_SERVER['DOCUMENT_ROOT']; ?>">
+                        <td class="e">Document root</td>
+                        <td class="v"><?php echo get_trimmed_string($_SERVER['DOCUMENT_ROOT'], PATH_MAX_LENGTH); ?></td>
+                    </tr>
+                    <tr title="<?php echo isset($_SERVER['PHPRC']) ? $_SERVER['PHPRC'] : 'Not defined'; ?>">
+                        <td class="e">PHPRC</td>
+                        <td class="v"><?php echo isset($_SERVER['PHPRC']) ? get_trimmed_string($_SERVER['PHPRC'], PATH_MAX_LENGTH) : 'Not defined'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Server software</td>
+                        <td class="v"><?php echo isset($_SERVER['SERVER_SOFTWARE']) ? $_SERVER['SERVER_SOFTWARE']: 'Not set'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Operating System</td>
+                        <td class="v"><?php echo php_uname('s'), ' ', php_uname('r'); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Processor information</td>
+                        <td class="v"><?php echo isset($_SERVER['PROCESSOR_IDENTIFIER']) ? $_SERVER['PROCESSOR_IDENTIFIER']: 'Not set'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Number of processors</td>
+                        <td class="v"><?php echo isset($_SERVER['NUMBER_OF_PROCESSORS']) ? $_SERVER['NUMBER_OF_PROCESSORS']: 'Not set'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Machine name</td>
+                        <td class="v"><?php echo (getenv('COMPUTERNAME') != FALSE) ? getenv('COMPUTERNAME') : 'Not set'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Host name</td>
+                        <td class="v"><?php echo isset($_SERVER['HTTP_HOST']) ? $_SERVER['HTTP_HOST'] : 'Not set'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">PHP session handler</td>
+                        <td class="v"><?php echo ini_get('session.save_handler'); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Application Pool ID</td>
+                        <td class="v"><?php echo (getenv('APP_POOL_ID') != FALSE) ? getenv('APP_POOL_ID') : 'Not available'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Site ID</td>
+                        <td class="v"><?php echo isset($_SERVER['INSTANCE_ID']) ? $_SERVER['INSTANCE_ID'] : 'Not available'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">FastCGI impersonation</td>
+                        <td class="v"><?php echo (ini_get('fastcgi.impersonate') === '1') ? 'enabled' : 'disabled'; ?></td>
+                    </tr>
+                </table>
+            </div>
+            <div class="widerightpanel">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">Cache Settings</th>
+                    </tr>
+                    <?php 
+                foreach (ini_get_all('wincache') as $ini_name => $ini_value) {
+                  // Do not show the settings used for debugging
+                  if (in_array($ini_name, $settings_to_hide))
+                    continue;
+                  echo '<tr title="', $ini_value['local_value'], '"><td class="e">', $ini_name, '</td><td class="v">';
+                  if (!is_numeric($ini_value['local_value']))
+                    echo get_trimmed_ini_value($ini_value['local_value'], INI_MAX_LENGTH);
+                  else
+                    echo $ini_value['local_value'];
+                  echo '</td></tr>', "\n";
+                } 
+                    ?>
+                </table>
+            </div>
+        </div>
+        <div class="overview">
+            <div class="leftpanel extra_margin">
+                <table width="100%">
+                    <tr>
+                        <th colspan="2">Opcode Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache scope</td>
+                        <td class="v"><?php echo (isset($ocache_file_info['is_local_cache'])) ? cache_scope_text($ocache_file_info['is_local_cache']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache uptime</td>
+                        <td class="v"><?php echo (isset($ocache_file_info['total_cache_uptime'])) ? seconds_to_words($ocache_file_info['total_cache_uptime']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached files</td>
+                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', OCACHE_DATA, '#filelist'; ?>"><?php echo $ocache_file_info['total_file_count']; ?></a></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Hits</td>
+                        <td class="v"><?php echo $ocache_file_info['total_hit_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Misses</td>
+                        <td class="v"><?php echo $ocache_file_info['total_miss_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <?php echo get_ocache_size_markup($ocache_mem_info['memory_total']); ?>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ocache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ocache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Number of functions</td>
+                        <td class="v"><?php echo $ocache_summary_info['total_functions']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Number of classes</td>
+                        <td class="v"><?php echo $ocache_summary_info['total_classes']; ?></td>
+                    </tr>
+                </table>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(OCACHE_DATA, BAR_CHART, $ocache_file_info['total_hit_count'], $ocache_file_info['total_miss_count']); ?>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(OCACHE_DATA, PIE_CHART, $ocache_mem_info['memory_total'] - $ocache_mem_info['memory_free'], $ocache_mem_info['memory_free']); ?>
+            </div>
+        </div>
+        <div class="overview">
+            <div class="leftpanel extra_margin">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">File Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache uptime</td>
+                        <td class="v"><?php echo (isset($fcache_file_info['total_cache_uptime'])) ? seconds_to_words($fcache_file_info['total_cache_uptime']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached files</td>
+                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', FCACHE_DATA, '#filelist'; ?>"><?php echo $fcache_file_info['total_file_count']; ?></a></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total files size</td>
+                        <td class="v"><?php echo convert_bytes_to_string($fcache_summary_info['total_size']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Hits</td>
+                        <td class="v"><?php echo $fcache_file_info['total_hit_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Misses</td>
+                        <td class="v"><?php echo $fcache_file_info['total_miss_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_total']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                </table>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(FCACHE_DATA, BAR_CHART, $fcache_file_info['total_hit_count'], $fcache_file_info['total_miss_count']); ?>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(FCACHE_DATA, PIE_CHART, $fcache_mem_info['memory_total'] - $fcache_mem_info['memory_free'], $fcache_mem_info['memory_free']); ?>
+            </div>
+        </div>
+        <div class="overview">
+            <?php if ($user_cache_available) {?>
+            <div class="leftpanel extra_margin">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">User Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache scope</td>
+                        <td class="v"><?php echo (isset($ucache_info['is_local_cache'])) ? cache_scope_text($ucache_info['is_local_cache']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache uptime</td>
+                        <td class="v"><?php echo (isset($ucache_info['total_cache_uptime'])) ? seconds_to_words($ucache_info['total_cache_uptime']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached entries</td>
+                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', UCACHE_DATA, '#filelist'; ?>"><?php echo $ucache_info['total_item_count']; ?></a></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Hits</td>
+                        <td class="v"><?php echo $ucache_info['total_hit_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Misses</td>
+                        <td class="v"><?php echo $ucache_info['total_miss_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_total']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                </table>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(UCACHE_DATA, BAR_CHART, $ucache_info['total_hit_count'], $ucache_info['total_miss_count']); ?>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(UCACHE_DATA, PIE_CHART, $ucache_mem_info['memory_total'] - $ucache_mem_info['memory_free'], $ucache_mem_info['memory_free']); ?>
+            </div>
+            <?php } ?>
+        </div>
+        <div class="overview">
+            <?php if ($session_cache_available) {?>
+            <div class="leftpanel extra_margin">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">Session Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache scope</td>
+                        <td class="v"><?php echo (isset($scache_info['is_local_cache'])) ? cache_scope_text($scache_info['is_local_cache']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache uptime</td>
+                        <td class="v"><?php echo (isset($scache_info['total_cache_uptime'])) ? seconds_to_words($scache_info['total_cache_uptime']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached entries</td>
+                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', SCACHE_DATA, '#filelist'; ?>"><?php echo $scache_info['total_item_count']; ?></a></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Hits</td>
+                        <td class="v"><?php echo $scache_info['total_hit_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Misses</td>
+                        <td class="v"><?php echo $scache_info['total_miss_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_total']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                </table>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(SCACHE_DATA, BAR_CHART, $scache_info['total_hit_count'], $scache_info['total_miss_count']); ?>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(SCACHE_DATA, PIE_CHART, $scache_mem_info['memory_total'] - $scache_mem_info['memory_free'], $scache_mem_info['memory_free']); ?>
+            </div>
+            <?php } ?>
+        </div>
+        <div class="overview">
+            <div class="leftpanel">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">Resolve Path Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached entries</td>
+                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', RCACHE_DATA, '#filelist'; ?>"><?php echo $rpcache_file_info['total_file_count']; ?></a></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_total']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                </table>
+            </div>
+        </div>
+        <?php } elseif ($page == OCACHE_DATA) {
+                init_cache_info(OCACHE_DATA);
+        ?>
+        <div class="overview">
+            <div class="leftpanel extra_margin">
+                <table width="100%">
+                    <tr>
+                        <th colspan="2">Opcode Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache scope</td>
+                        <td class="v"><?php echo (isset($ocache_file_info['is_local_cache'])) ? cache_scope_text($ocache_file_info['is_local_cache']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache uptime</td>
+                        <td class="v"><?php echo (isset($ocache_file_info['total_cache_uptime'])) ? seconds_to_words($ocache_file_info['total_cache_uptime']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached files</td>
+                        <td class="v"><?php echo $ocache_file_info['total_file_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Hits</td>
+                        <td class="v"><?php echo $ocache_file_info['total_hit_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Misses</td>
+                        <td class="v"><?php echo $ocache_file_info['total_miss_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <?php echo get_ocache_size_markup($ocache_mem_info['memory_total']); ?>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ocache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ocache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Number of functions</td>
+                        <td class="v"><?php echo $ocache_summary_info['total_functions']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Number of classes</td>
+                        <td class="v"><?php echo $ocache_summary_info['total_classes']; ?></td>
+                    </tr>
+                </table>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(OCACHE_DATA, BAR_CHART, $ocache_file_info['total_hit_count'], $ocache_file_info['total_miss_count']); ?>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(OCACHE_DATA, PIE_CHART, $ocache_mem_info['memory_total'] - $ocache_mem_info['memory_free'], $ocache_mem_info['memory_free']); ?>
+            </div>
+        </div>
+        <div class="list" id="filelist">
+            <table style="width: 100%">
+                <tr>
+                    <th colspan="7">Opcode cache entries</th>
+                </tr>
+                <tr>
+                    <th title="Name of the file">File name</th>
+                    <th title="Number of PHP functions in the file">Function count</th>
+                    <th title="Number of PHP classes in the file">Class count</th>
+                    <th title="Indicates total amount of time in seconds for which the file has been in the cache">Add time</th>
+                    <th title="Total amount of time in seconds which has elapsed since the file was last used">Use time</th>
+                    <th title="Indicates total amount of time in seconds which has elapsed since the file was last checked for file change">Last check</th>
+                    <th title="Number of times cache has been hit">Hit count</th>
+                </tr>
+                <?php 
+                $sort_key = 'file_name';
+                usort($ocache_file_info['file_entries'], 'cmp');
+                foreach ($ocache_file_info['file_entries'] as $entry) {
+                  echo '<tr title="', $entry['file_name'] ,'">', "\n";
+                  echo '<td class="e">', get_trimmed_filename($entry['file_name'], PATH_MAX_LENGTH),'</td>', "\n";
+                  echo '<td class="v">', $entry['function_count'],'</td>', "\n";
+                  echo '<td class="v">', $entry['class_count'],'</td>', "\n";
+                  echo '<td class="v">', $entry['add_time'],'</td>', "\n";
+                  echo '<td class="v">', $entry['use_time'],'</td>', "\n";
+                  echo '<td class="v">', $entry['last_check'],'</td>', "\n";
+                  echo '<td class="v">', $entry['hit_count'],'</td>', "\n";
+                  echo "</tr>\n";
+                }
+                ?>
+            </table>
+        </div>
+        <?php } elseif ($page == FCACHE_DATA) {
+                init_cache_info(FCACHE_DATA);
+        ?>
+        <div class="overview">
+            <div class="leftpanel extra_margin">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">File Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache uptime</td>
+                        <td class="v"><?php echo (isset($fcache_file_info['total_cache_uptime'])) ? seconds_to_words($fcache_file_info['total_cache_uptime']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached files</td>
+                        <td class="v"><?php echo $fcache_file_info['total_file_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total files size</td>
+                        <td class="v"><?php echo convert_bytes_to_string($fcache_summary_info['total_size']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Hits</td>
+                        <td class="v"><?php echo $fcache_file_info['total_hit_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Misses</td>
+                        <td class="v"><?php echo $fcache_file_info['total_miss_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_total']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                </table>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(FCACHE_DATA, BAR_CHART, $fcache_file_info['total_hit_count'], $fcache_file_info['total_miss_count']); ?>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(FCACHE_DATA, PIE_CHART, $fcache_mem_info['memory_total'] - $fcache_mem_info['memory_free'], $fcache_mem_info['memory_free']); ?>
+            </div>
+        </div>
+        <div class="list" id="filelist">
+            <table style="width: 100%">
+                <tr>
+                    <th colspan="6">File cache entries</th>
+                </tr>
+                <tr>
+                    <th title="Name of the file">File name</th>
+                    <th title="Size of the file in KB">File size</th>
+                    <th title="Indicates total amount of time in seconds for which the file has been in the cache">Add time</th>
+                    <th title="Total amount of time in seconds which has elapsed since the file was last used">Use time</th>
+                    <th title="Indicates total amount of time in seconds which has elapsed since the file was last checked for file change">Last check</th>
+                    <th title="Number of times the file has been served from the cache">Hit Count</th>
+                </tr>
+                <?php 
+                $sort_key = 'file_name';
+                usort($fcache_file_info['file_entries'], 'cmp');
+                foreach ($fcache_file_info['file_entries'] as $entry) {
+                  echo '<tr title="', $entry['file_name'] ,'">', "\n";
+                  echo '<td class="e">', get_trimmed_filename($entry['file_name'], PATH_MAX_LENGTH),'</td>', "\n";
+                  echo '<td class="v">', convert_bytes_to_string($entry['file_size']),'</td>', "\n";
+                  echo '<td class="v">', $entry['add_time'],'</td>', "\n";
+                  echo '<td class="v">', $entry['use_time'],'</td>', "\n";
+                  echo '<td class="v">', $entry['last_check'],'</td>', "\n";
+                  echo '<td class="v">', $entry['hit_count'],'</td>', "\n";
+                  echo "</tr>\n";
+                }
+                ?>
+            </table>
+        </div>
+        <?php } elseif ($page == UCACHE_DATA && $ucache_key == NULL) {
+                if ($user_cache_available) { 
+                  init_cache_info(UCACHE_DATA);
+        ?>
+        <div class="overview">
+            <div class="leftpanel extra_margin">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">User Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache scope</td>
+                        <td class="v"><?php echo (isset($ucache_info['is_local_cache'])) ? cache_scope_text($ucache_info['is_local_cache']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache uptime</td>
+                        <td class="v"><?php echo (isset($ucache_info['total_cache_uptime'])) ? seconds_to_words($ucache_info['total_cache_uptime']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached entries</td>
+                        <td class="v"><?php echo $ucache_info['total_item_count'];
+                                            if (USE_AUTHENTICATION && $ucache_info['total_item_count'] > 0) 
+                                              echo ' (<a href="', $PHP_SELF, '?page=', UCACHE_DATA, '&amp;clc=1">Clear All</a>)'; ?>
+                        </td>
+                    </tr>
+                    <tr>
+                        <td class="e">Hits</td>
+                        <td class="v"><?php echo $ucache_info['total_hit_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Misses</td>
+                        <td class="v"><?php echo $ucache_info['total_miss_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_total']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                </table>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(UCACHE_DATA, BAR_CHART, $ucache_info['total_hit_count'], $ucache_info['total_miss_count']); ?>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(UCACHE_DATA, PIE_CHART, $ucache_mem_info['memory_total'] - $ucache_mem_info['memory_free'], $ucache_mem_info['memory_free']); ?>
+            </div>
+        </div>
+        <div class="list" id="filelist">
+            <table style="width: 100%">
+                <tr>
+                    <th colspan="6">User cache entries</th>
+                </tr>
+                <tr>
+                    <th title="Object Key Name">Key name</th>
+                    <th title="Type of the object stored">Value type</th>
+                    <th title="Size of the object stored">Value size</th>
+                    <th title="Total amount of time in seconds which remains until the object is removed from the cache">Total TTL</th>
+                    <th title="Total amount of time in seconds which has elapsed since the object was added to the cache">Total age</th>
+                    <th title="Number of times the object has been served from the cache">Hit Count</th>
+                </tr>
+                <?php
+                  $count = 0;
+                  foreach ($ucache_info['ucache_entries'] as $entry) {
+                    echo '<tr title="', $entry['key_name'] ,'">', "\n";
+                    if (USE_AUTHENTICATION)
+                      echo '<td class="e"><a href="', $PHP_SELF, '?page=', UCACHE_DATA, '&key=', urlencode($entry['key_name']), '">', get_trimmed_string($entry['key_name'], PATH_MAX_LENGTH),'</a></td>', "\n";
+                    else
+                      echo '<td class="e">', get_trimmed_string($entry['key_name'], PATH_MAX_LENGTH),'</td>', "\n";
+                    echo '<td class="v">', $entry['value_type'], '</td>', "\n";
+                    echo '<td class="v">', convert_bytes_to_string($entry['value_size']), '</td>', "\n";        
+                    echo '<td class="v">', $entry['ttl_seconds'],'</td>', "\n";
+                    echo '<td class="v">', $entry['age_seconds'],'</td>', "\n";
+                    echo '<td class="v">', $entry['hitcount'],'</td>', "\n";
+                    echo "</tr>\n";
+                    if ($count++ > CACHE_MAX_ENTRY && !$show_all_ucache_entries) {
+                      echo '<tr><td colspan="6"><a href="', $PHP_SELF, '?page=', UCACHE_DATA, '&amp;all=1">Show all entries</td></tr>';
+                      break;
+                    }
+                  }
+                ?>
+            </table>
+        </div>
+        <?php } else { ?>
+        <div class="overview">
+            <p class="notice">
+                The user cache is not available. Enable the user cache by using <strong>wincache.ucenabled</strong>
+                directive in <strong>php.ini</strong> file.
+            </p>
+        </div>
+        <?php }?>
+        <?php } elseif ($page == UCACHE_DATA && $ucache_key != NULL && USE_AUTHENTICATION) {
+                if (!wincache_ucache_exists($ucache_key)) {
+        ?>
+        <div class="overview">
+            <p class="notice">The variable with this key does not exist in the user cache.</p>
+        </div>
+        <?php       } 
+                else{
+                  $ucache_entry_info = wincache_ucache_info(true, $ucache_key);
+        ?>
+        <div class="list">
+            <table width="60%">
+                <tr>
+                    <th colspan="2">User Cache Entry Information</th>
+                </tr>
+                <tr>
+                    <td class="e">Key</td>
+                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['key_name']; ?></td>
+                </tr>
+                <tr>
+                    <td class="e">Value Type</td>
+                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['value_type']; ?></td>
+                </tr>
+                <tr>
+                    <td class="e">Size</td>
+                    <td class="v"><?php echo convert_bytes_to_string($ucache_entry_info['ucache_entries'][1]['value_size']); ?></td>
+                </tr>
+                <tr>
+                    <td class="e">Total Time To Live (in seconds)</td>
+                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['ttl_seconds']; ?></td>
+                </tr>
+                <tr>
+                    <td class="e">Total Age (in seconds)</td>
+                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['age_seconds']; ?></td>
+                </tr>
+                <tr>
+                    <td class="e">Hit Count</td>
+                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['hitcount']; ?></td>
+                </tr>
+            </table>
+        </div>
+        <div id="panel">
+            <div id="panel_header">
+                User Cache Entry Content
+            </div>
+            <div id="panel_body">
+                <pre><?php var_dump(wincache_ucache_get($ucache_key))?></pre>
+            </div>
+        </div>
+        <?php }?>
+        <?php } elseif ($page == SCACHE_DATA) {
+                if ($session_cache_available) {
+                  init_cache_info(SCACHE_DATA);
+        ?>
+        <div class="overview">
+            <div class="leftpanel extra_margin">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">Session Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache scope</td>
+                        <td class="v"><?php echo (isset($scache_info['is_local_cache'])) ? cache_scope_text($scache_info['is_local_cache']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cache uptime</td>
+                        <td class="v"><?php echo (isset($scache_info['total_cache_uptime'])) ? seconds_to_words($scache_info['total_cache_uptime']) : 'Unknown'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached entries</td>
+                        <td class="v"><?php echo $scache_info['total_item_count'];
+                        if (USE_AUTHENTICATION && $scache_info['total_item_count'] > 0) 
+                                              echo ' (<a href="', $PHP_SELF, '?page=', UCACHE_DATA, '&amp;clsc=1">Clear All</a>)'; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Hits</td>
+                        <td class="v"><?php echo $scache_info['total_hit_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Misses</td>
+                        <td class="v"><?php echo $scache_info['total_miss_count']; ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_total']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                </table>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(SCACHE_DATA, BAR_CHART, $scache_info['total_hit_count'], $scache_info['total_miss_count']); ?>
+            </div>
+            <div class="rightpanel">
+                <?php echo get_chart_markup(SCACHE_DATA, PIE_CHART, $scache_mem_info['memory_total'] - $scache_mem_info['memory_free'], $scache_mem_info['memory_free']); ?>
+            </div>
+        </div>
+        <div class="list" id="sessionlist">
+            <table style="width: 100%">
+                <tr>
+                    <th colspan="6">Session cache entries</th>
+                </tr>
+                <tr>
+                    <th title="Object Key Name">Key name</th>
+                    <th title="Type of the object stored">Value type</th>
+                    <th title="Size of the object stored">Value size</th>
+                    <th title="Total amount of time in seconds which remains until the object is removed from the cache">Total TTL</th>
+                    <th title="Total amount of time in seconds which has elapsed since the object was added to the cache">Total age</th>
+                    <th title="Number of times the object has been served from the cache">Hit Count</th>
+                </tr>
+                <?php 
+                  $count = 0;
+                  foreach ($scache_info['scache_entries'] as $entry) {
+                    echo '<tr title="', $entry['key_name'] ,'">', "\n";
+                    echo '<td class="e">', get_trimmed_string($entry['key_name'], PATH_MAX_LENGTH),'</td>', "\n";
+                    echo '<td class="v">', $entry['value_type'], '</td>', "\n";
+                    echo '<td class="v">', convert_bytes_to_string($entry['value_size']), '</td>', "\n";
+                    echo '<td class="v">', $entry['ttl_seconds'],'</td>', "\n";
+                    echo '<td class="v">', $entry['age_seconds'],'</td>', "\n";
+                    echo '<td class="v">', $entry['hitcount'],'</td>', "\n";
+                    echo "</tr>\n";
+                    if ($count++ > CACHE_MAX_ENTRY && !$show_all_ucache_entries) {
+                      echo '<tr><td colspan="6"><a href="', $PHP_SELF, '?page=', SCACHE_DATA, '&amp;all=1">Show all entries</td></tr>';
+                      break;
+                    }
+                  }
+                ?>
+            </table>
+        </div>
+        <?php } else { ?>
+        <div class="overview">
+            <p class="notice">
+                The session cache is not enabled. To enable session cache set the session handler in <strong>php.ini</strong> to 
+        <strong>wincache</strong>, for example: <strong>session.save_handler=wincache</strong>. </p><p class="notice">
+                If you are using Drupal check the README.txt file of the <a href="https://www.drupal.org/project/wincachedrupal">WinCacheDrupal</a> module on how to enable the session cache.
+            </p>
+        </div>
+        <?php }?>
+        <?php } elseif ($page == RCACHE_DATA) {
+                init_cache_info(RCACHE_DATA);
+        ?>
+        <div class="overview">
+            <div class="wideleftpanel">
+                <table style="width: 100%">
+                    <tr>
+                        <th colspan="2">Resolve Path Cache Overview</th>
+                    </tr>
+                    <tr>
+                        <td class="e">Cached entries</td>
+                        <td class="v"><?php echo $rpcache_file_info['total_file_count'] ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Total memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_total']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Available memory</td>
+                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_free']); ?></td>
+                    </tr>
+                    <tr>
+                        <td class="e">Memory overhead</td>
+                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_overhead']); ?></td>
+                    </tr>
+                </table>
+            </div>
+        </div>
+        <div class="list" id="filelist">
+            <table style="width: 100%">
+                <tr>
+                    <th colspan="2">Resolve path cache entries</th>
+                </tr>
+                <tr>
+                    <th>Resolve path</th>
+                    <th>Subkey data</th>
+                </tr>
+                <?php 
+                $sort_key = 'resolve_path';
+                usort($rpcache_file_info['rplist_entries'], 'cmp');
+                foreach ($rpcache_file_info['rplist_entries'] as $entry) {
+                  echo '<tr title="',$entry['subkey_data'], '">', "\n";
+                  echo '<td class="e">', get_trimmed_string($entry['resolve_path'], PATH_MAX_LENGTH),'</td>', "\n";
+                  echo '<td class="v">', get_trimmed_string($entry['subkey_data'], SUBKEY_MAX_LENGTH), '</td>', "\n";
+                  echo "</tr>\n";
+                }
+                ?>
+            </table>
+        </div>
+        <?php } ?>
+        <div class="clear"></div>
+    </div>
+</body>
+
+</html>
\ No newline at end of file

From 3d15200e2ae8e9a62521e18c99048005cfe2ce78 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sun, 6 Aug 2017 23:11:52 +0200
Subject: [PATCH 05/17] Remove unused files.

---
 dev/quick/registry_rebuild.php | 289 -----------------------------------------
 1 file changed, 289 deletions(-)
 delete mode 100644 dev/quick/registry_rebuild.php

diff --git a/dev/quick/registry_rebuild.php b/dev/quick/registry_rebuild.php
deleted file mode 100644
index 2a911fc..0000000
--- a/dev/quick/registry_rebuild.php
+++ /dev/null
@@ -1,289 +0,0 @@
-<?php
-
-include_once('_secure.inc');
-
-global $registry_rebuild_start;
-$registry_rebuild_start = time();
-
-function registry_rebuild_log($message) {
-  global $registry_rebuild_start;
-  $lapsed = time() - $registry_rebuild_start;
-  print "<p>[{$lapsed}s]: {$message}</p>";
-  ob_flush();
-  flush();
-}
-
-function registry_rebuild_clear_couchbase() {
-  // Try to flush any couchbase bucket....
-  if (class_exists(\Drupal\couchbasedrupal\CouchbaseManager::class)) {
-    /** @var \Drupal\couchbasedrupal\CouchbaseManager */
-    $manager = \Drupal\couchbasedrupal\CouchbaseManager::instance();
-    foreach ($manager->listServers() as $name) {
-      try {
-        $bucket = $manager->getBucketFromConfig($name);
-        $bucket->manager()->flush();
-        registry_rebuild_log("Flushed Couchbase bucket: $name");
-      }
-      catch (\Exception $e) {
-        registry_rebuild_log("Couchbase error: {$e->getMessage()}");
-      }
-
-    }
-  }
-}
-
-function registry_rebuild_clear_wincache() {
-  // Clear al in memory cache.
-  if (function_exists('wincache_ucache_clear')) {
-    wincache_ucache_clear();
-  }
-}
-
-/**
- * Root directory of Drupal installation. Note that you can change this
- * if you need to. It just has to point to the actual root. This assumes
- * that the php file is being run in sites/all/modules/registry_rebuild.
- */
-
-header("Content-Type: text/html; charset=utf-8");
-
-ini_set('memory_limit', -1);
-define('DRUPAL_ROOT', define_drupal_root());
-chdir(DRUPAL_ROOT);
-define('MAINTENANCE_MODE', 'update');
-
-print '<html><title>Registry Rebuild</title><head></head><body> <p>Starting...</p>';
-
-registry_rebuild_log("DRUPAL_ROOT is <em>" . DRUPAL_ROOT . "</em>.");
-
-global $_SERVER;
-$_SERVER['REMOTE_ADDR'] = 'nothing';
-
-global $include_dir;
-$include_dir = DRUPAL_ROOT . '/includes';
-$module_dir = DRUPAL_ROOT . '/modules';
-// Use core directory if it exists.
-if (file_exists(DRUPAL_ROOT . '/core/includes/bootstrap.inc')) {
-  $include_dir = DRUPAL_ROOT . '/core/includes';
-  $module_dir = DRUPAL_ROOT . '/core/modules';
-}
-
-$includes = array(
-  $include_dir . '/bootstrap.inc',
-  $include_dir . '/common.inc',
-  $include_dir . '/database.inc',
-  $include_dir . '/schema.inc',
-  $include_dir . '/actions.inc',
-  $include_dir . '/entity.inc',
-  $module_dir  . '/system/system.module',
-  $include_dir . '/database/query.inc',
-  $include_dir . '/database/select.inc',
-  $include_dir . '/registry.inc',
-  $include_dir . '/module.inc',
-  $include_dir . '/menu.inc',
-  $include_dir . '/file.inc',
-  $include_dir . '/theme.inc',
-);
-
-if (function_exists('registry_rebuild')) { // == D7
-  $cache_lock_path_absolute = variable_get('lock_inc');
-  if (!empty($cache_lock_path_absolute)) {
-    $cache_lock_path_relative = DRUPAL_ROOT . '/'. variable_get('lock_inc');
-    // Ensure that the configured lock.inc really exists at that location and
-    // is accessible. Otherwise we use the core lock.inc as fallback.
-    if (is_readable($cache_lock_path_relative) && is_file($cache_lock_path_relative)) {
-      $includes[] = $cache_lock_path_relative;
-      registry_rebuild_log("We will use relative variant of lock.inc.");
-    }
-    elseif (is_readable($cache_lock_path_absolute) && is_file($cache_lock_path_absolute)) {
-      $includes[] = $cache_lock_path_absolute;
-      registry_rebuild_log("We will use absolute variant of lock.inc.");
-    }
-    else {
-      registry_rebuild_log("We will use core implementation of lock.inc as fallback.");
-      $includes[] = DRUPAL_ROOT . '/includes/lock.inc';
-    }
-  }
-  else {
-    $includes[] = DRUPAL_ROOT . '/includes/lock.inc';
-  }
-}
-elseif (!function_exists('cache_clear_all')) { // D8+
-  // TODO
-  // http://api.drupal.org/api/drupal/namespace/Drupal!Core!Lock/8
-  $includes[] = $module_dir . '/entity/entity.module';
-  $includes[] = $module_dir . '/entity/entity.controller.inc';
-}
-// In Drupal 6 the configured lock.inc is already loaded during
-// DRUSH_BOOTSTRAP_DRUPAL_DATABASE
-
-foreach ($includes as $include) {
-  if (file_exists($include)) {
-    require_once($include);
-  }
-}
-
-registry_rebuild_log("Bootstrapping to DRUPAL_BOOTSTRAP_SESSION");
-
-drupal_bootstrap(DRUPAL_BOOTSTRAP_SESSION);
-registry_rebuild_rebuild();
-registry_rebuild_clear_wincache();
-registry_rebuild_clear_couchbase();
-
-/**
- * Find the drupal root directory by looking in parent directories.
- * If unable to discover it, fail and exit.
- */
-function define_drupal_root() {
-  // This is the smallest number of directories to go up: from /sites/all/modules/registry_rebuild.
-  $parent_count = 1;
-  // 8 seems reasonably far to go looking up.
-  while ($parent_count < 8) {
-    $dir = realpath(getcwd() . str_repeat('/..', $parent_count));
-    if (file_exists($dir . '/index.php')) {
-      return $dir;
-    }
-    $parent_count++;
-  }
-  registry_rebuild_log("Failure: Unable to discover DRUPAL_ROOT. You may want to explicitly define it near the top of registry_rebuild.php");
-  exit(1);
-}
-
-/**
- * Before calling this we need to be bootstrapped to DRUPAL_BOOTSTRAP_SESSION.
- */
-function registry_rebuild_rebuild() {
-  // This section is not functionally important. It's just using the
-  // registry_get_parsed_files() so that it can report the change. Drupal 7 only.
-  if (function_exists('registry_rebuild')) {
-    $connection_info = Database::getConnectionInfo();
-    $driver = $connection_info['default']['driver'];
-    global $include_dir;
-    require_once $include_dir . '/database/' . $driver . '/query.inc';
-    $parsed_before = registry_get_parsed_files();
-  }
-
-  // Separate bootstrap cache exists only in Drupal 7 or newer.
-  // They are cleared later again via drupal_flush_all_caches().
-  if (function_exists('registry_rebuild')) { // D7
-    cache_clear_all('lookup_cache', 'cache_bootstrap');
-    cache_clear_all('variables', 'cache_bootstrap');
-    cache_clear_all('module_implements', 'cache_bootstrap');
-    registry_rebuild_log("Bootstrap caches have been cleared in DRUPAL_BOOTSTRAP_SESSION");
-  }
-  elseif (!function_exists('cache_clear_all')) { // D8+
-    cache('bootstrap')->deleteAll();
-    registry_rebuild_log("Bootstrap caches have been cleared in DRUPAL_BOOTSTRAP_SESSION");
-  }
-
-  // We later run system_rebuild_module_data() and registry_update() on Drupal 7 via
-  // D7-only registry_rebuild() wrapper, which is run inside drupal_flush_all_caches().
-  // It is an equivalent of module_rebuild_cache() in D5-D6 and is normally run via
-  // our universal wrapper registry_rebuild_cc_all() -- see further below.
-  // However, we are still on the DRUPAL_BOOTSTRAP_SESSION level here,
-  // and we want to make the initial rebuild as atomic as possible, so we can't
-  // run everything from registry_rebuild_cc_all() yet, so we run an absolute
-  // minimum we can at this stage, core specific.
-  if (function_exists('registry_rebuild')) { // D7 only
-    registry_rebuild_log("Doing registry_rebuild() in DRUPAL_BOOTSTRAP_SESSION");
-    registry_rebuild();
-  }
-  elseif (!function_exists('registry_rebuild') && function_exists('system_rebuild_module_data')) { // D8+
-    registry_rebuild_log("Doing system_rebuild_module_data() in DRUPAL_BOOTSTRAP_SESSION");
-    system_rebuild_module_data();
-  }
-  else { // D5-D6
-    registry_rebuild_log("Doing module_rebuild_cache() in DRUPAL_BOOTSTRAP_SESSION");
-    module_list(TRUE, FALSE);
-    module_rebuild_cache();
-  }
-
-  registry_rebuild_clear_wincache();
-
-  registry_rebuild_log("Bootstrapping to DRUPAL_BOOTSTRAP_FULL");
-  drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);
-  // We can run our wrapper now, since we are in a full bootstrap already.
-  registry_rebuild_log("Rebuilding registry via registry_rebuild_cc_all in DRUPAL_BOOTSTRAP_FULL");
-  registry_rebuild_cc_all();
-  registry_rebuild_log("Clearing Wincache User Cache");
-  registry_rebuild_clear_wincache();
-
-
-  // Extra cleanup available for D7 only.
-  if (function_exists('registry_rebuild')) {
-    $parsed_after = registry_get_parsed_files();
-    // Remove files which don't exist anymore.
-    $filenames = array();
-    foreach ($parsed_after as $filename => $file) {
-      if (!file_exists($filename)) {
-        $filenames[] = $filename;
-      }
-    }
-    if (!empty($filenames)) {
-      db_delete('registry_file')
-        ->condition('filename', $filenames)
-        ->execute();
-      db_delete('registry')
-        ->condition('filename', $filenames)
-        ->execute();
-      print("Deleted " . count($filenames) . ' stale files from registry manually.');
-    }
-    $parsed_after = registry_get_parsed_files();
-    registry_rebuild_log("There were " . count($parsed_before) . " files in the registry before and " . count($parsed_after) . " files now.");
-  }
-
-  // Now verify that all the enabled modules are mapped to an existing file, otherwise throw the error!
-  $query = db_select('system')
-  ->fields('system', array('filename', 'name'))
-  ->condition('status', 1, '=')
-  ->execute();
-
-  foreach ($query as $item) {
-    $full_path = DRUPAL_ROOT . '/' . $item->filename;
-    if (!file_exists($full_path)) {
-      registry_rebuild_log("The enabled system module file <b>{$item->filename}</b> does not exist for module <b>{$item->name}</b>");
-    }
-  }
-  registry_rebuild_log("If you don't see any crazy fatal errors, your registry has been rebuilt.");
-}
-
-/**
- * Registry Rebuild needs to aggressively clear all caches,
- * not just some bins (at least to attempt it) also *before*
- * attempting to rebuild registry, or it may not be able
- * to fix the problem at all, if it relies on some cached
- * and no longer valid data/paths etc. This problem has been
- * confirmed and reproduced many times with option --fire-bazooka
- * which is available only in the Drush variant, but it confirms
- * the importance of starting with real, raw and not cached
- * in any way site state. While the --no-cache-clear option
- * still disables this procedure, --fire-bazooka takes precedence
- * and forces all caches clear action. All caches are cleared
- * by default in the PHP script variant.
- */
-function registry_rebuild_cc_all() {
-  if (function_exists('cache_clear_all')) {
-    cache_clear_all('*', 'cache', TRUE);
-    cache_clear_all('*', 'cache_form', TRUE);
-  }
-  else {
-    cache('cache')->deleteAll();
-    cache('cache_form')->deleteAll();
-  }
-
-  if (function_exists('module_rebuild_cache')) { // D5-D6
-    module_list(TRUE, FALSE);
-    module_rebuild_cache();
-  }
-
-  if (function_exists('drupal_flush_all_caches')) { // D6+
-    drupal_flush_all_caches();
-  }
-  else { // D5
-    cache_clear_all();
-    system_theme_data();
-    node_types_rebuild();
-    menu_rebuild();
-  }
-  registry_rebuild_log("All caches have been cleared with registry_rebuild_cc_all.");
-}

From 81a6c9f45350df2fc873d4b0cdb4e294762c3774 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Fri, 11 Aug 2017 10:10:49 +0200
Subject: [PATCH 06/17] Add missing web.config

---
 pub/static/web.config | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)
 create mode 100644 pub/static/web.config

diff --git a/pub/static/web.config b/pub/static/web.config
new file mode 100644
index 0000000..af432d9
--- /dev/null
+++ b/pub/static/web.config
@@ -0,0 +1,20 @@
+<configuration>
+	<system.webServer>
+		<rewrite>
+			<rules>
+				<clear/>
+				<rule name="Imported Rule 1-1 - pub" stopProcessing="true">
+					<match url="^version.+?/(.+)$" ignoreCase="false" />
+					<action type="Rewrite" url="{R:1}" />
+				</rule>
+				<rule name="Imported Rule 2" stopProcessing="true">
+					<match url=".*" ignoreCase="false" />
+					<conditions logicalGrouping="MatchAll">
+						<add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
+					</conditions>
+					<action type="Rewrite" url="../static.php?resource={R:0}" appendQueryString="false" />
+				</rule>
+			</rules>
+		</rewrite>
+	</system.webServer>
+</configuration>

From ef7669b6b5d4baf65afb5a1b167489fedc75cc93 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Tue, 22 Aug 2017 16:16:53 +0200
Subject: [PATCH 07/17] Add mime types required by magento themes.

---
 web.config | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/web.config b/web.config
index b503485..5ad12aa 100644
--- a/web.config
+++ b/web.config
@@ -1,6 +1,13 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <configuration>
 	<system.webServer>
+	    <!--Just to make sure these fonts work as expected...-->
+	    <staticContent>
+          <remove fileExtension=".woff" />
+          <remove fileExtension=".woff2" />
+          <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
+          <mimeMap fileExtension=".woff2" mimeType="application/font-woff2" />
+        </staticContent>
 		<rewrite>
 			<rules>
 				<!-- HTTP_AUTHORIZATION variable removed-->

From ff139689e80b5f1f07c99c6474ca07c1cee545b2 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Fri, 15 Sep 2017 19:17:54 -0300
Subject: [PATCH 08/17] Update chef configuration file.

---
 chef/chef.yml | 14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)

diff --git a/chef/chef.yml b/chef/chef.yml
index 2f86ed3..f157413 100644
--- a/chef/chef.yml
+++ b/chef/chef.yml
@@ -27,8 +27,8 @@ deployers:
   php:
     type: 'php'
     runtime:
-      - {type: 'dl', uri: 'http://windows.php.net/downloads/releases/archives/php-7.0.17-nts-Win32-VC14-x64.zip', maps: {'*' : 'php/'}}
-      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/xdebug/2.5.3/php_xdebug-2.5.3-7.0-nts-vc14-x64.zip', maps: {'php_xdebug.dll':'php/ext/php_xdebug.dll'}}
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/releases/php-7.0.23-nts-Win32-VC14-x64.zip', maps: {'*' : 'php/'}}
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/xdebug/2.5.5/php_xdebug-2.5.5-7.0-nts-vc14-x64.zip', maps: {'php_xdebug.dll':'php/ext/php_xdebug.dll'}}
       - {type: 'dl', uri: 'https://ci.appveyor.com/api/buildjobs/7b47bfc24eynberd/artifacts/x64%2FRelease%2Fphp_tideways.dll' , maps: {'x64%2FRelease%2Fphp_tideways.dll':'php/ext/php_tideways.dll'}}
       - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/igbinary/2.0.1/php_igbinary-2.0.1-7.0-nts-vc14-x64.zip', maps: {'php_igbinary.dll': 'php/ext/php_igbinary.dll'}}
       - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/wincache/2.0.0.8/php_wincache-2.0.0.8-7.0-nts-vc14-x64.zip', maps: {'php_wincache.dll': 'php/ext/php_wincache.dll'}}
@@ -122,8 +122,16 @@ services:
         path: 'pub_media'
         mountpath: 'pub/media'
         persist_on_deploy: true
+      app_etc:
+        path: 'app_etc'
+        mountpath: 'app/etc'
+        persist_on_deploy: true
+      app_config_sandbox:
+        path: 'app_config_sandbox'
+        mountpath: 'app/config_sandbox'
+        persist_on_deploy: true       
   cron:
     type: 'scheduler'
-    commands: ['php bin\magento cron:run', 'php bin\magento setup:cron:run']
+    commands: ['php bin\magento cron:run', 'php bin\magento setup:cron:run', 'php update\cron.php']
     frequency: 5
 

From eb23d01d23044aba838ed526585da3fffef800a3 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Fri, 6 Oct 2017 21:25:16 -0300
Subject: [PATCH 09/17] Add http runtime settings.

---
 web.config | 17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)

diff --git a/web.config b/web.config
index 5ad12aa..5861e33 100644
--- a/web.config
+++ b/web.config
@@ -1,13 +1,16 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <configuration>
+	<system.web>
+		<httpRuntime maxRequestLength="65535" maxUrlLength="65535" maxQueryStringLength="65535" />
+	</system.web>
 	<system.webServer>
-	    <!--Just to make sure these fonts work as expected...-->
-	    <staticContent>
-          <remove fileExtension=".woff" />
-          <remove fileExtension=".woff2" />
-          <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
-          <mimeMap fileExtension=".woff2" mimeType="application/font-woff2" />
-        </staticContent>
+		<!--Just to make sure these fonts work as expected...-->
+		<staticContent>
+			<remove fileExtension=".woff" />
+			<remove fileExtension=".woff2" />
+			<mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
+			<mimeMap fileExtension=".woff2" mimeType="application/font-woff2" />
+		</staticContent>
 		<rewrite>
 			<rules>
 				<!-- HTTP_AUTHORIZATION variable removed-->

From c545c08c4d64135662f9fc0b47b12bca135e2b8a Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sat, 21 Oct 2017 11:50:05 -0300
Subject: [PATCH 10/17] Fix dynamic resource generation.

---
 pub/static/web.config | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/pub/static/web.config b/pub/static/web.config
index af432d9..d6efcb8 100644
--- a/pub/static/web.config
+++ b/pub/static/web.config
@@ -3,7 +3,7 @@
 		<rewrite>
 			<rules>
 				<clear/>
-				<rule name="Imported Rule 1-1 - pub" stopProcessing="true">
+				<rule name="Imported Rule 1-1 - pub" stopProcessing="false">
 					<match url="^version.+?/(.+)$" ignoreCase="false" />
 					<action type="Rewrite" url="{R:1}" />
 				</rule>

From 784de8e5c52af7ba981e79006572468a00ba6e94 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sat, 4 Nov 2017 08:27:59 -0300
Subject: [PATCH 11/17] Make clear what is the strict minimum for Magento to
 Work on IIS.

---
 .gitignore             |    2 -
 chef/chef.yml          |  137 ----
 chef/chef__local.yml   |   22 -
 dev/quick/_secure.inc  |   19 -
 dev/quick/info.php     |   87 ---
 dev/quick/memcache.php |  884 -------------------------
 dev/quick/opc.php      |  769 ----------------------
 dev/quick/request.php  |    7 -
 dev/quick/wincache.php | 1713 ------------------------------------------------
 9 files changed, 3640 deletions(-)
 delete mode 100644 chef/chef.yml
 delete mode 100644 chef/chef__local.yml
 delete mode 100644 dev/quick/_secure.inc
 delete mode 100644 dev/quick/info.php
 delete mode 100644 dev/quick/memcache.php
 delete mode 100644 dev/quick/opc.php
 delete mode 100644 dev/quick/request.php
 delete mode 100644 dev/quick/wincache.php

diff --git a/.gitignore b/.gitignore
index 10daee8..9269cef 100644
--- a/.gitignore
+++ b/.gitignore
@@ -49,5 +49,3 @@ atlassian*
 !/var/.htaccess
 /vendor/*
 !/vendor/.htaccess
-
-chef-runtime.path
diff --git a/chef/chef.yml b/chef/chef.yml
deleted file mode 100644
index f157413..0000000
--- a/chef/chef.yml
+++ /dev/null
@@ -1,137 +0,0 @@
-﻿id: 'magentocommerce'
-deployers:
-  # App is the artifact itself, other deployers
-  # depend on this one!
-  app: 
-    type: 'app'
-  iis:
-    type: 'iis'
-    pools:
-      default:
-        Enable32BitAppOnWin64: true
-        AutoStart: true
-        ManagedPipelineMode: Integrated
-        StartMode: AlwaysRunning
-        ManagedRuntimeVersion: ''
-    mounts:
-      root:
-        root: true
-        path: '/'
-    bindings:
-      local:
-        # Binding will be mounted through HOSTS file
-        # automatically when using interface = 'local'
-        hostname: 'local.magentocommerce.com'
-        port: 80
-        interface: 'local'
-  php:
-    type: 'php'
-    runtime:
-      - {type: 'dl', uri: 'http://windows.php.net/downloads/releases/php-7.0.23-nts-Win32-VC14-x64.zip', maps: {'*' : 'php/'}}
-      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/xdebug/2.5.5/php_xdebug-2.5.5-7.0-nts-vc14-x64.zip', maps: {'php_xdebug.dll':'php/ext/php_xdebug.dll'}}
-      - {type: 'dl', uri: 'https://ci.appveyor.com/api/buildjobs/7b47bfc24eynberd/artifacts/x64%2FRelease%2Fphp_tideways.dll' , maps: {'x64%2FRelease%2Fphp_tideways.dll':'php/ext/php_tideways.dll'}}
-      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/igbinary/2.0.1/php_igbinary-2.0.1-7.0-nts-vc14-x64.zip', maps: {'php_igbinary.dll': 'php/ext/php_igbinary.dll'}}
-      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/wincache/2.0.0.8/php_wincache-2.0.0.8-7.0-nts-vc14-x64.zip', maps: {'php_wincache.dll': 'php/ext/php_wincache.dll'}}
- # CERTIFICATES
-      - {type: 'dl', uri: 'http://curl.haxx.se/ca/cacert.pem', maps: {'cacert.pem': '/cacert.pem'}}
-      - {type: 'file', 'action':'copy', 'source':'php/php.ini-production', 'destination':'php/php.ini'}
-      - {type: 'ini', 'key':curl.cainfo, 'value':'%RUNTIME%/cacert.pem'}
-      - {type: 'ini', 'key':openssl.cafile, 'value':'%RUNTIME%/cacert.pem'}
- # EXTENSION DIR
-      - {type: 'ini', 'key':extension_dir, 'value':'%RUNTIME%/php/ext'}
- # EXTENSION SETTINGS
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_intl.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_bz2.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_curl.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_enchant.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_exif.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_fileinfo.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_gettext.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_gd2.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_mbstring.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_openssl.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_soap.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_xmlrpc.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_wincache.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_pdo_mysql.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_xsl.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_igbinary.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_tideways.dll}
-      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_com_dotnet.dll}
-      - {type: 'ini', multivalue: true, 'key':zend_extension, 'value':php_opcache.dll}
- # MYSQL
-      - {type: 'ini', 'key':pdo_mysql.cache_size, 'value':2000}
-      - {type: 'ini', 'key':mysql.allow_persistent, 'value':On}    
- # RUNTIME DIRECTORIES
-      - {type: 'ini', 'key':error_log, 'value':'%LOG%/php_error_%DEPLOYMENTID%.log', ensureDir: 'file'}
-      - {type: 'ini', 'key':upload_tmp_dir, 'value':'%TEMP%/upload_temp_dir', ensureDir: 'dir'}
-      - {type: 'ini', 'key':session.save_path, 'value':'%TEMP%/session_save_path/', ensureDir: 'file'}
-      - {type: 'ini', 'key':date.timezone, 'value':'Europe/Madrid'} 
- # WINCACHE...
-      - {type: 'ini', 'key':wincache.fcenabled, 'value': 0}
-      - {type: 'ini', 'key':wincache.ucenabled, 'value': 1}
-      - {type: 'ini', 'key':wincache.fcachesize , 'value': 8}
-      - {type: 'ini', 'key':wincache.maxfilesize, 'value': 3000}
-      - {type: 'ini', 'key':wincache.ucachesize , 'value': 128}
-      - {type: 'ini', 'key':wincache.scachesize , 'value': 16}
-      - {type: 'ini', 'key':wincache.reroute_enabled , 'value': 0}
-      - {type: 'ini', 'key':wincache.filemapdir , 'value':'%RUNTIME%/wincache_filemap', ensureDir: 'dir'}
-      - {type: 'ini', 'key':wincache.enablecli , 'value':'On'}
-# TIDEWAYS
-      - {type: 'ini','key':tideways.api_key , 'value': 'xxx'}
-      - {type: 'ini','key':tideways.auto_prepend_library , 'value': 0}
-      - {type: 'ini','key':tideways.connection , 'value': 'tcp://127.0.0.1:8136'}
-      - {type: 'ini','key':tideways.sample_rate , 'value': 10}
-      - {type: 'ini','key':tideways.auto_start , 'value': 1}
-# GENERIC
-      - {type: 'ini','key':fastcgi.impersonate , 'value': 1}
-      - {type: 'ini','key':cgi.fix_pathinfo , 'value': 1}
-      - {type: 'ini','key':cgi.force_redirect , 'value': 0}
-      - {type: 'ini','key':fastcgi.logging , 'value': 0}
-      - {type: 'ini','key':realpath_cache_size , 'value': '5M'}
-      - {type: 'ini','key':realpath_cache_ttl , 'value': 1800}
-      - {type: 'ini','key':max_input_vars , 'value': 6000}
-      - {type: 'ini','key':memory_limit , 'value': 2048M}
-      - {type: 'ini','key':max_input_vars , 'value': 6000}
-      - {type: 'ini','key':max_execution_time , 'value': 600}
-      - {type: 'ini','key':upload_max_filesize , 'value': 32M}
-      - {type: 'ini','key':post_max_size , 'value': 32M}
-# OPCACHE
-      - {type: 'ini','key':opcache.enable , 'value': 1}
-      - {type: 'ini','key':opcache.memory_consumption , 'value': 256}
-      - {type: 'ini','key':opcache.max_accelerated_files , 'value': 25000}
-      - {type: 'ini','key':opcache.revalidate_freq , 'value': 3600}
-      - {type: 'ini','key':opcache.interned_strings_buffer , 'value': 16}
-      - {type: 'ini','key':opcache.validate_timestamps , 'value': 0}
-      - {type: 'ini','key':opcache.enable_cli , 'value': 1}
-      - {type: 'ini','key':opcache.file_cache_only , 'value': 0}
-      - {type: 'ini','key':opcache.file_cache , 'value':'%RUNTIME%/opcache_filecache', ensureDir: 'dir'}
-services:
-  contents:
-    type: 'disk'
-    mounts:
-      var:
-        path: 'var'
-        mountpath: 'var'
-        persist_on_deploy: true
-      pub_static:
-        path: 'pub_static'
-        mountpath: 'pub/static'
-        persist_on_deploy: true
-      pub_media:
-        path: 'pub_media'
-        mountpath: 'pub/media'
-        persist_on_deploy: true
-      app_etc:
-        path: 'app_etc'
-        mountpath: 'app/etc'
-        persist_on_deploy: true
-      app_config_sandbox:
-        path: 'app_config_sandbox'
-        mountpath: 'app/config_sandbox'
-        persist_on_deploy: true       
-  cron:
-    type: 'scheduler'
-    commands: ['php bin\magento cron:run', 'php bin\magento setup:cron:run', 'php update\cron.php']
-    frequency: 5
-
diff --git a/chef/chef__local.yml b/chef/chef__local.yml
deleted file mode 100644
index 0f9365d..0000000
--- a/chef/chef__local.yml
+++ /dev/null
@@ -1,22 +0,0 @@
-﻿# Only use this for environment with name "local"
-scope-environment-regex: 'local.*'
-deployers:
-  php:
-    runtime:
-      - {type: 'ini', multivalue: true, 'key':zend_extension, 'value':php_xdebug.dll}
-      - {type: 'ini','key':opcache.revalidate_freq , 'value': 10}
-      - {type: 'ini','key':opcache.validate_timestamps , 'value': 1}
-       # XDEBUG
-      - {type: 'ini', 'key':'xdebug.remote_enable', 'value':'on'} 
-      - {type: 'ini', 'key':'xdebug.remote_handler', 'value':'dbgp'} 
-      - {type: 'ini', 'key':'xdebug.remote_host', 'value':'127.0.0.1'} 
-      - {type: 'ini', 'key':'xdebug.remote_connect_back', 'value':'0'} 
-      - {type: 'ini', 'key':'xdebug.remote_port', 'value':'9000'} 
-      - {type: 'ini', 'key':'xdebug.remote_mode', 'value':'req'} 
-      - {type: 'ini', 'key':'xdebug.remote_autostart', 'value':'0'} 
-      - {type: 'ini', 'key':'xdebug.idekey', 'value':'php-vs'}  
-      - {type: 'ini', 'key':'xdebug.profiler_output_dir', 'value':'%LOG%/xdebug_profile', ensureDir: 'dir'}
-      - {type: 'ini', 'key':'xdebug.trace_output_dir', 'value':'%LOG%/xdebug_trace', ensureDir: 'dir'}
-      - {type: 'ini', 'key':'xdebug.remote_log', 'value':'%LOG%/remote_%DEPLOYMENTID%.log', ensureDir: 'file'}
-      - {type: 'ini', 'key':'xdebug.trace_output_name', 'value':'trace.%u'}
-      - {type: 'ini', 'key':'xdebug.profiler_output_name', 'value':'profile.%u'}  
\ No newline at end of file
diff --git a/dev/quick/_secure.inc b/dev/quick/_secure.inc
deleted file mode 100644
index e7a11b8..0000000
--- a/dev/quick/_secure.inc
+++ /dev/null
@@ -1,19 +0,0 @@
-<?php
-define('ADMIN_USERNAME','magento'); 	// Admin Username
-define('ADMIN_PASSWORD','magento');  	// Admin Password
-////////// END OF DEFAULT CONFIG AREA /////////////////////////////////////////////////////////////
-
-///////////////// Password protect ////////////////////////////////////////////////////////////////
-if (!isset($_SERVER['PHP_AUTH_USER']) || !isset($_SERVER['PHP_AUTH_PW']) ||
-           $_SERVER['PHP_AUTH_USER'] != ADMIN_USERNAME ||$_SERVER['PHP_AUTH_PW'] != ADMIN_PASSWORD) {
-  Header("WWW-Authenticate: Basic realm=\"Memcache Login\"");
-  Header("HTTP/1.0 401 Unauthorized");
-
-  echo <<<EOB
-				<html><body>
-				<h1>Rejected!</h1>
-				<big>Wrong Username or Password!</big>
-				</body></html>
-EOB;
-  exit;
-}
\ No newline at end of file
diff --git a/dev/quick/info.php b/dev/quick/info.php
deleted file mode 100644
index 7ad7382..0000000
--- a/dev/quick/info.php
+++ /dev/null
@@ -1,87 +0,0 @@
-<?php
-include_once('_secure.inc');
-?>
-
-<?php
-$extras = [
-  'get_current_user()' => get_current_user(),
-  'getmyuid()' => getmyuid(),
-  'getmygid()' => getmygid(),
-  'getmypid()' => getmypid(),
-  'getmyinode()' => getmyinode(),
-  'getlastmod()' => getlastmod(),
-  'realpath_cache_size() [Kb]' => round(realpath_cache_size() / 1024, 0),
-  ];
-
-$extras = array_merge($extras, openssl_get_cert_locations());
-
-/**
- * Loads the chef runtime settings.
- */
-if (!function_exists('loadChefSettings')) {
-  function loadChefSettings() {
-    $salt = $_SERVER['DOCUMENT_ROOT'] ?? ($_SERVER['APPL_PHYSICAL_PATH'] ?? __FILE__);
-    $cache_key = $salt . ':chefsettings';
-    if ($settings = @wincache_ucache_get($cache_key)) {
-      $_SERVER['CHEF_SETTINGS'] = $settings;
-      return;
-    }
-    // Look for the file a couple of levels up...
-    $depth = 0;
-    $contentsFile = NULL;
-    $contentsDir = NULL;
-    while ($contentsFile == NULL && $depth < 3) {
-      $prefix = '';
-      for ($x = 0; $x < $depth; $x++) {
-        $prefix .= '../';
-      }
-      if ($contentsDir = @file_get_contents($prefix . 'chef-runtime.path')) {
-        break;
-      }
-      $depth++;
-    }
-    if ($settingsFile = @file_get_contents($contentsDir . '\\chef-settings.json')) {
-      $_SERVER['CHEF_SETTINGS'] = json_decode($settingsFile, TRUE);
-      if ($_SERVER['CHEF_SETTINGS'] == NULL
-        && json_last_error() !== \JSON_ERROR_NONE) {
-        throw new \Exception("Error parsing chef settings file: " . json_last_error_msg());
-      }
-      @wincache_ucache_set($cache_key, $_SERVER['CHEF_SETTINGS']);
-    }
-  }
-}
-
-loadChefSettings();
-
-?>
-
-<center>
-  <h2>General settings</h2>
-  <table>
-    <?php foreach ($extras as $name => $value) { ?>
-    <tr>
-      <td>
-        <?=$name?>
-      </td>
-      <td>
-        <?=$value?>
-      </td>
-    </tr>
-    <?php } ?>
-  </table>
-  <h2>Chef settings</h2>
-  <table>
-    <?php foreach ($_SERVER['CHEF_SETTINGS'] ?? [] as $name => $value) { ?>
-    <tr>
-      <td>
-        <?=$name?>
-      </td>
-      <td>
-        <?=$value?>
-      </td>
-    </tr>
-    <?php } ?>
-  </table>
-</center>
-
-<?php echo phpinfo(); ?>
\ No newline at end of file
diff --git a/dev/quick/memcache.php b/dev/quick/memcache.php
deleted file mode 100644
index 031dfd2..0000000
--- a/dev/quick/memcache.php
+++ /dev/null
@@ -1,884 +0,0 @@
-<?php
-include_once('_secure.inc');
-
-/*
-  +----------------------------------------------------------------------+
-  | PHP Version 5                                                        |
-  +----------------------------------------------------------------------+
-  | Copyright (c) 1997-2004 The PHP Group                                |
-  +----------------------------------------------------------------------+
-  | This source file is subject to version 3.0 of the PHP license,       |
-  | that is bundled with this package in the file LICENSE, and is        |
-  | available through the world-wide-web at the following url:           |
-  | http://www.php.net/license/3_0.txt.                                  |
-  | If you did not receive a copy of the PHP license and are unable to   |
-  | obtain it through the world-wide-web, please send a note to          |
-  | license@php.net so we can mail you a copy immediately.               |
-  +----------------------------------------------------------------------+
-  | Author:  Harun Yayli <harunyayli at gmail.com>                       |
-  +----------------------------------------------------------------------+
-*/
-
-$VERSION='$Id: memcache.php 326707 2012-07-19 19:02:42Z ab $';
-
-define('DATE_FORMAT','Y/m/d H:i:s');
-define('GRAPH_SIZE',200);
-define('MAX_ITEM_DUMP',50);
-
-$MEMCACHE_SERVERS[] = '127.0.0.1:11211'; // add more as an array
-//$MEMCACHE_SERVERS[] = 'mymemcache-server2:11211'; // add more as an array
-
-
-////////// END OF DEFAULT CONFIG AREA /////////////////////////////////////////////////////////////
-
-///////////MEMCACHE FUNCTIONS /////////////////////////////////////////////////////////////////////
-
-function get_host_port_from_server($server){
-	$values = explode(':', $server);
-	if (($values[0] == 'unix') && (!is_numeric( $values[1]))) {
-		return array($server, 0);
-	}
-	else {
-		return $values;
-	}
-}
-
-function sendMemcacheCommands($command){
-    global $MEMCACHE_SERVERS;
-	$result = array();
-
-	foreach($MEMCACHE_SERVERS as $server){
-		$strs = get_host_port_from_server($server);
-		$host = $strs[0];
-		$port = $strs[1];
-		$result[$server] = sendMemcacheCommand($host,$port,$command);
-	}
-	return $result;
-}
-function sendMemcacheCommand($server,$port,$command){
-
-	$s = @fsockopen($server,$port);
-	if (!$s){
-		die("Cant connect to:".$server.':'.$port);
-	}
-
-	fwrite($s, $command."\r\n");
-
-	$buf='';
-	while ((!feof($s))) {
-		$buf .= fgets($s, 256);
-		if (strpos($buf,"END\r\n")!==false){ // stat says end
-		    break;
-		}
-		if (strpos($buf,"DELETED\r\n")!==false || strpos($buf,"NOT_FOUND\r\n")!==false){ // delete says these
-		    break;
-		}
-		if (strpos($buf,"OK\r\n")!==false){ // flush_all says ok
-		    break;
-		}
-	}
-    fclose($s);
-    return parseMemcacheResults($buf);
-}
-function parseMemcacheResults($str){
-    
-	$res = array();
-	$lines = explode("\r\n",$str);
-	$cnt = count($lines);
-	for($i=0; $i< $cnt; $i++){
-	    $line = $lines[$i];
-		$l = explode(' ',$line,3);
-		if (count($l)==3){
-			$res[$l[0]][$l[1]]=$l[2];
-			if ($l[0]=='VALUE'){ // next line is the value
-			    $res[$l[0]][$l[1]] = array();
-			    list ($flag,$size)=explode(' ',$l[2]);
-			    $res[$l[0]][$l[1]]['stat']=array('flag'=>$flag,'size'=>$size);
-			    $res[$l[0]][$l[1]]['value']=$lines[++$i];
-			}
-		}elseif($line=='DELETED' || $line=='NOT_FOUND' || $line=='OK'){
-		    return $line;
-		}
-	}
-	return $res;
-
-}
-
-function dumpCacheSlab($server,$slabId,$limit){
-    list($host,$port) = get_host_port_from_server($server);
-    $resp = sendMemcacheCommand($host,$port,'stats cachedump '.$slabId.' '.$limit);
-
-   return $resp;
-
-}
-
-function flushServer($server){
-    list($host,$port) = get_host_port_from_server($server);
-    $resp = sendMemcacheCommand($host,$port,'flush_all');
-    return $resp;
-}
-function getCacheItems(){
- $items = sendMemcacheCommands('stats items');
- $serverItems = array();
- $totalItems = array();
- foreach ($items as $server=>$itemlist){
-    $serverItems[$server] = array();
-    $totalItems[$server]=0;
-    if (!isset($itemlist['STAT'])){
-        continue;
-    }
-
-    $iteminfo = $itemlist['STAT'];
-
-    foreach($iteminfo as $keyinfo=>$value){
-        if (preg_match('/items\:(\d+?)\:(.+?)$/',$keyinfo,$matches)){
-            $serverItems[$server][$matches[1]][$matches[2]] = $value;
-            if ($matches[2]=='number'){
-                $totalItems[$server] +=$value;
-            }
-        }
-    }
- }
- return array('items'=>$serverItems,'counts'=>$totalItems);
-}
-function getMemcacheStats($total=true){
-	$resp = sendMemcacheCommands('stats');
-	if ($total){
-		$res = array();
-		foreach($resp as $server=>$r){
-			foreach($r['STAT'] as $key=>$row){
-				if (!isset($res[$key])){
-					$res[$key]=null;
-				}
-				switch ($key){
-					case 'pid':
-						$res['pid'][$server]=$row;
-						break;
-					case 'uptime':
-						$res['uptime'][$server]=$row;
-						break;
-					case 'time':
-						$res['time'][$server]=$row;
-						break;
-					case 'version':
-						$res['version'][$server]=$row;
-						break;
-					case 'pointer_size':
-						$res['pointer_size'][$server]=$row;
-						break;
-					case 'rusage_user':
-						$res['rusage_user'][$server]=$row;
-						break;
-					case 'rusage_system':
-						$res['rusage_system'][$server]=$row;
-						break;
-					case 'curr_items':
-						$res['curr_items']+=$row;
-						break;
-					case 'total_items':
-						$res['total_items']+=$row;
-						break;
-					case 'bytes':
-						$res['bytes']+=$row;
-						break;
-					case 'curr_connections':
-						$res['curr_connections']+=$row;
-						break;
-					case 'total_connections':
-						$res['total_connections']+=$row;
-						break;
-					case 'connection_structures':
-						$res['connection_structures']+=$row;
-						break;
-					case 'cmd_get':
-						$res['cmd_get']+=$row;
-						break;
-					case 'cmd_set':
-						$res['cmd_set']+=$row;
-						break;
-					case 'get_hits':
-						$res['get_hits']+=$row;
-						break;
-					case 'get_misses':
-						$res['get_misses']+=$row;
-						break;
-					case 'evictions':
-						$res['evictions']+=$row;
-						break;
-					case 'bytes_read':
-						$res['bytes_read']+=$row;
-						break;
-					case 'bytes_written':
-						$res['bytes_written']+=$row;
-						break;
-					case 'limit_maxbytes':
-						$res['limit_maxbytes']+=$row;
-						break;
-					case 'threads':
-						$res['rusage_system'][$server]=$row;
-						break;
-				}
-			}
-		}
-		return $res;
-	}
-	return $resp;
-}
-
-//////////////////////////////////////////////////////
-
-//
-// don't cache this page
-//
-header("Cache-Control: no-store, no-cache, must-revalidate");  // HTTP/1.1
-header("Cache-Control: post-check=0, pre-check=0", false);
-header("Pragma: no-cache");                                    // HTTP/1.0
-
-function duration($ts) {
-    global $time;
-    $years = (int)((($time - $ts)/(7*86400))/52.177457);
-    $rem = (int)(($time-$ts)-($years * 52.177457 * 7 * 86400));
-    $weeks = (int)(($rem)/(7*86400));
-    $days = (int)(($rem)/86400) - $weeks*7;
-    $hours = (int)(($rem)/3600) - $days*24 - $weeks*7*24;
-    $mins = (int)(($rem)/60) - $hours*60 - $days*24*60 - $weeks*7*24*60;
-    $str = '';
-    if($years==1) $str .= "$years year, ";
-    if($years>1) $str .= "$years years, ";
-    if($weeks==1) $str .= "$weeks week, ";
-    if($weeks>1) $str .= "$weeks weeks, ";
-    if($days==1) $str .= "$days day,";
-    if($days>1) $str .= "$days days,";
-    if($hours == 1) $str .= " $hours hour and";
-    if($hours>1) $str .= " $hours hours and";
-    if($mins == 1) $str .= " 1 minute";
-    else $str .= " $mins minutes";
-    return $str;
-}
-
-// create graphics
-//
-function graphics_avail() {
-	return extension_loaded('gd');
-}
-
-function bsize($s) {
-	foreach (array('','K','M','G') as $i => $k) {
-		if ($s < 1024) break;
-		$s/=1024;
-	}
-	return sprintf("%5.1f %sBytes",$s,$k);
-}
-
-// create menu entry
-function menu_entry($ob,$title) {
-	global $PHP_SELF;
-	if ($ob==$_GET['op']){
-	    return "<li><a class=\"child_active\" href=\"$PHP_SELF&op=$ob\">$title</a></li>";
-	}
-	return "<li><a class=\"active\" href=\"$PHP_SELF&op=$ob\">$title</a></li>";
-}
-
-function getHeader(){
-    $header = <<<EOB
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
-<html>
-<head><title>MEMCACHE INFO</title>
-<style type="text/css"><!--
-body { background:white; font-size:100.01%; margin:0; padding:0; }
-body,p,td,th,input,submit { font-size:0.8em;font-family:arial,helvetica,sans-serif; }
-* html body   {font-size:0.8em}
-* html p      {font-size:0.8em}
-* html td     {font-size:0.8em}
-* html th     {font-size:0.8em}
-* html input  {font-size:0.8em}
-* html submit {font-size:0.8em}
-td { vertical-align:top }
-a { color:black; font-weight:none; text-decoration:none; }
-a:hover { text-decoration:underline; }
-div.content { padding:1em 1em 1em 1em; position:absolute; width:97%; z-index:100; }
-
-h1.memcache { background:rgb(153,153,204); margin:0; padding:0.5em 1em 0.5em 1em; }
-* html h1.memcache { margin-bottom:-7px; }
-h1.memcache a:hover { text-decoration:none; color:rgb(90,90,90); }
-h1.memcache span.logo {
-	background:rgb(119,123,180);
-	color:black;
-	border-right: solid black 1px;
-	border-bottom: solid black 1px;
-	font-style:italic;
-	font-size:1em;
-	padding-left:1.2em;
-	padding-right:1.2em;
-	text-align:right;
-	display:block;
-	width:130px;
-	}
-h1.memcache span.logo span.name { color:white; font-size:0.7em; padding:0 0.8em 0 2em; }
-h1.memcache span.nameinfo { color:white; display:inline; font-size:0.4em; margin-left: 3em; }
-h1.memcache div.copy { color:black; font-size:0.4em; position:absolute; right:1em; }
-hr.memcache {
-	background:white;
-	border-bottom:solid rgb(102,102,153) 1px;
-	border-style:none;
-	border-top:solid rgb(102,102,153) 10px;
-	height:12px;
-	margin:0;
-	margin-top:1px;
-	padding:0;
-}
-
-ol,menu { margin:1em 0 0 0; padding:0.2em; margin-left:1em;}
-ol.menu li { display:inline; margin-right:0.7em; list-style:none; font-size:85%}
-ol.menu a {
-	background:rgb(153,153,204);
-	border:solid rgb(102,102,153) 2px;
-	color:white;
-	font-weight:bold;
-	margin-right:0em;
-	padding:0.1em 0.5em 0.1em 0.5em;
-	text-decoration:none;
-	margin-left: 5px;
-	}
-ol.menu a.child_active {
-	background:rgb(153,153,204);
-	border:solid rgb(102,102,153) 2px;
-	color:white;
-	font-weight:bold;
-	margin-right:0em;
-	padding:0.1em 0.5em 0.1em 0.5em;
-	text-decoration:none;
-	border-left: solid black 5px;
-	margin-left: 0px;
-	}
-ol.menu span.active {
-	background:rgb(153,153,204);
-	border:solid rgb(102,102,153) 2px;
-	color:black;
-	font-weight:bold;
-	margin-right:0em;
-	padding:0.1em 0.5em 0.1em 0.5em;
-	text-decoration:none;
-	border-left: solid black 5px;
-	}
-ol.menu span.inactive {
-	background:rgb(193,193,244);
-	border:solid rgb(182,182,233) 2px;
-	color:white;
-	font-weight:bold;
-	margin-right:0em;
-	padding:0.1em 0.5em 0.1em 0.5em;
-	text-decoration:none;
-	margin-left: 5px;
-	}
-ol.menu a:hover {
-	background:rgb(193,193,244);
-	text-decoration:none;
-	}
-
-
-div.info {
-	background:rgb(204,204,204);
-	border:solid rgb(204,204,204) 1px;
-	margin-bottom:1em;
-	}
-div.info h2 {
-	background:rgb(204,204,204);
-	color:black;
-	font-size:1em;
-	margin:0;
-	padding:0.1em 1em 0.1em 1em;
-	}
-div.info table {
-	border:solid rgb(204,204,204) 1px;
-	border-spacing:0;
-	width:100%;
-	}
-div.info table th {
-	background:rgb(204,204,204);
-	color:white;
-	margin:0;
-	padding:0.1em 1em 0.1em 1em;
-	}
-div.info table th a.sortable { color:black; }
-div.info table tr.tr-0 { background:rgb(238,238,238); }
-div.info table tr.tr-1 { background:rgb(221,221,221); }
-div.info table td { padding:0.3em 1em 0.3em 1em; }
-div.info table td.td-0 { border-right:solid rgb(102,102,153) 1px; white-space:nowrap; }
-div.info table td.td-n { border-right:solid rgb(102,102,153) 1px; }
-div.info table td h3 {
-	color:black;
-	font-size:1.1em;
-	margin-left:-0.3em;
-	}
-.td-0 a , .td-n a, .tr-0 a , tr-1 a {
-    text-decoration:underline;
-}
-div.graph { margin-bottom:1em }
-div.graph h2 { background:rgb(204,204,204);; color:black; font-size:1em; margin:0; padding:0.1em 1em 0.1em 1em; }
-div.graph table { border:solid rgb(204,204,204) 1px; color:black; font-weight:normal; width:100%; }
-div.graph table td.td-0 { background:rgb(238,238,238); }
-div.graph table td.td-1 { background:rgb(221,221,221); }
-div.graph table td { padding:0.2em 1em 0.4em 1em; }
-
-div.div1,div.div2 { margin-bottom:1em; width:35em; }
-div.div3 { position:absolute; left:40em; top:1em; width:580px; }
-//div.div3 { position:absolute; left:37em; top:1em; right:1em; }
-
-div.sorting { margin:1.5em 0em 1.5em 2em }
-.center { text-align:center }
-.aright { position:absolute;right:1em }
-.right { text-align:right }
-.ok { color:rgb(0,200,0); font-weight:bold}
-.failed { color:rgb(200,0,0); font-weight:bold}
-
-span.box {
-	border: black solid 1px;
-	border-right:solid black 2px;
-	border-bottom:solid black 2px;
-	padding:0 0.5em 0 0.5em;
-	margin-right:1em;
-}
-span.green { background:#60F060; padding:0 0.5em 0 0.5em}
-span.red { background:#D06030; padding:0 0.5em 0 0.5em }
-
-div.authneeded {
-	background:rgb(238,238,238);
-	border:solid rgb(204,204,204) 1px;
-	color:rgb(200,0,0);
-	font-size:1.2em;
-	font-weight:bold;
-	padding:2em;
-	text-align:center;
-	}
-
-input {
-	background:rgb(153,153,204);
-	border:solid rgb(102,102,153) 2px;
-	color:white;
-	font-weight:bold;
-	margin-right:1em;
-	padding:0.1em 0.5em 0.1em 0.5em;
-	}
-//-->
-</style>
-</head>
-<body>
-<div class="head">
-	<h1 class="memcache">
-		<span class="logo"><a href="http://pecl.php.net/package/memcache">memcache</a></span>
-		<span class="nameinfo">memcache.php by <a href="http://livebookmark.net">Harun Yayli</a></span>
-	</h1>
-	<hr class="memcache">
-</div>
-<div class=content>
-EOB;
-
-    return $header;
-}
-function getFooter(){
-    global $VERSION;
-    $footer = '</div><!-- Based on apc.php '.$VERSION.'--></body>
-</html>
-';
-
-    return $footer;
-
-}
-function getMenu(){
-    global $PHP_SELF;
-echo "<ol class=menu>";
-if ($_GET['op']!=4){
-echo <<<EOB
-    <li><a href="$PHP_SELF&op={$_GET['op']}">Refresh Data</a></li>
-EOB;
-}
-else {
-echo <<<EOB
-    <li><a href="$PHP_SELF&op=2}">Back</a></li>
-EOB;
-}
-echo
-	menu_entry(1,'View Host Stats'),
-	menu_entry(2,'Variables');
-
-echo <<<EOB
-	</ol>
-	<br/>
-EOB;
-}
-
-// TODO, AUTH
-
-$_GET['op'] = !isset($_GET['op'])? '1':$_GET['op'];
-$PHP_SELF= isset($_SERVER['PHP_SELF']) ? htmlentities(strip_tags($_SERVER['PHP_SELF'],'')) : '';
-
-$PHP_SELF=$PHP_SELF.'?';
-$time = time();
-// sanitize _GET
-
-foreach($_GET as $key=>$g){
-    $_GET[$key]=htmlentities($g);
-}
-
-
-// singleout
-// when singleout is set, it only gives details for that server.
-if (isset($_GET['singleout']) && $_GET['singleout']>=0 && $_GET['singleout'] <count($MEMCACHE_SERVERS)){
-    $MEMCACHE_SERVERS = array($MEMCACHE_SERVERS[$_GET['singleout']]);
-}
-
-// display images
-if (isset($_GET['IMG'])){
-    $memcacheStats = getMemcacheStats();
-    $memcacheStatsSingle = getMemcacheStats(false);
-
-    if (!graphics_avail()) {
-		exit(0);
-	}
-
-	function fill_box($im, $x, $y, $w, $h, $color1, $color2,$text='',$placeindex='') {
-		global $col_black;
-		$x1=$x+$w-1;
-		$y1=$y+$h-1;
-
-		imagerectangle($im, $x, $y1, $x1+1, $y+1, $col_black);
-		if($y1>$y) imagefilledrectangle($im, $x, $y, $x1, $y1, $color2);
-		else imagefilledrectangle($im, $x, $y1, $x1, $y, $color2);
-		imagerectangle($im, $x, $y1, $x1, $y, $color1);
-		if ($text) {
-			if ($placeindex>0) {
-
-				if ($placeindex<16)
-				{
-					$px=5;
-					$py=$placeindex*12+6;
-					imagefilledrectangle($im, $px+90, $py+3, $px+90-4, $py-3, $color2);
-					imageline($im,$x,$y+$h/2,$px+90,$py,$color2);
-					imagestring($im,2,$px,$py-6,$text,$color1);
-
-				} else {
-					if ($placeindex<31) {
-						$px=$x+40*2;
-						$py=($placeindex-15)*12+6;
-					} else {
-						$px=$x+40*2+100*intval(($placeindex-15)/15);
-						$py=($placeindex%15)*12+6;
-					}
-					imagefilledrectangle($im, $px, $py+3, $px-4, $py-3, $color2);
-					imageline($im,$x+$w,$y+$h/2,$px,$py,$color2);
-					imagestring($im,2,$px+2,$py-6,$text,$color1);
-				}
-			} else {
-				imagestring($im,4,$x+5,$y1-16,$text,$color1);
-			}
-		}
-	}
-
-
-    function fill_arc($im, $centerX, $centerY, $diameter, $start, $end, $color1,$color2,$text='',$placeindex=0) {
-		$r=$diameter/2;
-		$w=deg2rad((360+$start+($end-$start)/2)%360);
-
-
-		if (function_exists("imagefilledarc")) {
-			// exists only if GD 2.0.1 is avaliable
-			imagefilledarc($im, $centerX+1, $centerY+1, $diameter, $diameter, $start, $end, $color1, IMG_ARC_PIE);
-			imagefilledarc($im, $centerX, $centerY, $diameter, $diameter, $start, $end, $color2, IMG_ARC_PIE);
-			imagefilledarc($im, $centerX, $centerY, $diameter, $diameter, $start, $end, $color1, IMG_ARC_NOFILL|IMG_ARC_EDGED);
-		} else {
-			imagearc($im, $centerX, $centerY, $diameter, $diameter, $start, $end, $color2);
-			imageline($im, $centerX, $centerY, $centerX + cos(deg2rad($start)) * $r, $centerY + sin(deg2rad($start)) * $r, $color2);
-			imageline($im, $centerX, $centerY, $centerX + cos(deg2rad($start+1)) * $r, $centerY + sin(deg2rad($start)) * $r, $color2);
-			imageline($im, $centerX, $centerY, $centerX + cos(deg2rad($end-1))   * $r, $centerY + sin(deg2rad($end))   * $r, $color2);
-			imageline($im, $centerX, $centerY, $centerX + cos(deg2rad($end))   * $r, $centerY + sin(deg2rad($end))   * $r, $color2);
-			imagefill($im,$centerX + $r*cos($w)/2, $centerY + $r*sin($w)/2, $color2);
-		}
-		if ($text) {
-			if ($placeindex>0) {
-				imageline($im,$centerX + $r*cos($w)/2, $centerY + $r*sin($w)/2,$diameter, $placeindex*12,$color1);
-				imagestring($im,4,$diameter, $placeindex*12,$text,$color1);
-
-			} else {
-				imagestring($im,4,$centerX + $r*cos($w)/2, $centerY + $r*sin($w)/2,$text,$color1);
-			}
-		}
-	}
-	$size = GRAPH_SIZE; // image size
-	$image = imagecreate($size+50, $size+10);
-
-	$col_white = imagecolorallocate($image, 0xFF, 0xFF, 0xFF);
-	$col_red   = imagecolorallocate($image, 0xD0, 0x60,  0x30);
-	$col_green = imagecolorallocate($image, 0x60, 0xF0, 0x60);
-	$col_black = imagecolorallocate($image,   0,   0,   0);
-
-	imagecolortransparent($image,$col_white);
-
-    switch ($_GET['IMG']){
-        case 1: // pie chart
-            $tsize=$memcacheStats['limit_maxbytes'];
-    		$avail=$tsize-$memcacheStats['bytes'];
-    		$x=$y=$size/2;
-    		$angle_from = 0;
-    		$fuzz = 0.000001;
-
-            foreach($memcacheStatsSingle as $serv=>$mcs) {
-    			$free = $mcs['STAT']['limit_maxbytes']-$mcs['STAT']['bytes'];
-    			$used = $mcs['STAT']['bytes'];
-
-
-                if ($free>0){
-    			// draw free
-    			    $angle_to = ($free*360)/$tsize;
-                    $perc =sprintf("%.2f%%", ($free *100) / $tsize) ;
-
-        			fill_arc($image,$x,$y,$size,$angle_from,$angle_from + $angle_to ,$col_black,$col_green,$perc);
-        			$angle_from = $angle_from + $angle_to ;
-                }
-    			if ($used>0){
-    			// draw used
-        			$angle_to = ($used*360)/$tsize;
-        			$perc =sprintf("%.2f%%", ($used *100) / $tsize) ;
-        			fill_arc($image,$x,$y,$size,$angle_from,$angle_from + $angle_to ,$col_black,$col_red, '('.$perc.')' );
-                    $angle_from = $angle_from+ $angle_to ;
-    			}
-    			}
-
-        break;
-
-        case 2: // hit miss
-
-            $hits = ($memcacheStats['get_hits']==0) ? 1:$memcacheStats['get_hits'];
-            $misses = ($memcacheStats['get_misses']==0) ? 1:$memcacheStats['get_misses'];
-            $total = $hits + $misses ;
-
-	       	fill_box($image, 30,$size,50,-$hits*($size-21)/$total,$col_black,$col_green,sprintf("%.1f%%",$hits*100/$total));
-		    fill_box($image,130,$size,50,-max(4,($total-$hits)*($size-21)/$total),$col_black,$col_red,sprintf("%.1f%%",$misses*100/$total));
-		break;
-		
-    }
-    header("Content-type: image/png");
-	imagepng($image);
-	exit;
-}
-
-echo getHeader();
-echo getMenu();
-
-switch ($_GET['op']) {
-
-    case 1: // host stats
-    	$phpversion = phpversion();
-        $memcacheStats = getMemcacheStats();
-        $memcacheStatsSingle = getMemcacheStats(false);
-
-        $mem_size = $memcacheStats['limit_maxbytes'];
-    	$mem_used = $memcacheStats['bytes'];
-	    $mem_avail= $mem_size-$mem_used;
-	    $startTime = time()-array_sum($memcacheStats['uptime']);
-
-        $curr_items = $memcacheStats['curr_items'];
-        $total_items = $memcacheStats['total_items'];
-        $hits = ($memcacheStats['get_hits']==0) ? 1:$memcacheStats['get_hits'];
-        $misses = ($memcacheStats['get_misses']==0) ? 1:$memcacheStats['get_misses'];
-        $sets = $memcacheStats['cmd_set'];
-
-       	$req_rate = sprintf("%.2f",($hits+$misses)/($time-$startTime));
-	    $hit_rate = sprintf("%.2f",($hits)/($time-$startTime));
-	    $miss_rate = sprintf("%.2f",($misses)/($time-$startTime));
-	    $set_rate = sprintf("%.2f",($sets)/($time-$startTime));
-
-	    echo <<< EOB
-		<div class="info div1"><h2>General Cache Information</h2>
-		<table cellspacing=0><tbody>
-		<tr class=tr-1><td class=td-0>PHP Version</td><td>$phpversion</td></tr>
-EOB;
-		echo "<tr class=tr-0><td class=td-0>Memcached Host". ((count($MEMCACHE_SERVERS)>1) ? 's':'')."</td><td>";
-		$i=0;
-		if (!isset($_GET['singleout']) && count($MEMCACHE_SERVERS)>1){
-    		foreach($MEMCACHE_SERVERS as $server){
-    		      echo ($i+1).'. <a href="'.$PHP_SELF.'&singleout='.$i++.'">'.$server.'</a><br/>';
-    		}
-		}
-		else{
-		    echo '1.'.$MEMCACHE_SERVERS[0];
-		}
-		if (isset($_GET['singleout'])){
-		      echo '<a href="'.$PHP_SELF.'">(all servers)</a><br/>';
-		}
-		echo "</td></tr>\n";
-		echo "<tr class=tr-1><td class=td-0>Total Memcache Cache</td><td>".bsize($memcacheStats['limit_maxbytes'])."</td></tr>\n";
-
-	echo <<<EOB
-		</tbody></table>
-		</div>
-
-		<div class="info div1"><h2>Memcache Server Information</h2>
-EOB;
-        foreach($MEMCACHE_SERVERS as $server){
-            echo '<table cellspacing=0><tbody>';
-            echo '<tr class=tr-1><td class=td-1>'.$server.'</td><td><a href="'.$PHP_SELF.'&server='.array_search($server,$MEMCACHE_SERVERS).'&op=6">[<b>Flush this server</b>]</a></td></tr>';
-    		echo '<tr class=tr-0><td class=td-0>Start Time</td><td>',date(DATE_FORMAT,$memcacheStatsSingle[$server]['STAT']['time']-$memcacheStatsSingle[$server]['STAT']['uptime']),'</td></tr>';
-    		echo '<tr class=tr-1><td class=td-0>Uptime</td><td>',duration($memcacheStatsSingle[$server]['STAT']['time']-$memcacheStatsSingle[$server]['STAT']['uptime']),'</td></tr>';
-    		echo '<tr class=tr-0><td class=td-0>Memcached Server Version</td><td>'.$memcacheStatsSingle[$server]['STAT']['version'].'</td></tr>';
-    		echo '<tr class=tr-1><td class=td-0>Used Cache Size</td><td>',bsize($memcacheStatsSingle[$server]['STAT']['bytes']),'</td></tr>';
-    		echo '<tr class=tr-0><td class=td-0>Total Cache Size</td><td>',bsize($memcacheStatsSingle[$server]['STAT']['limit_maxbytes']),'</td></tr>';
-    		echo '</tbody></table>';
-	   }
-    echo <<<EOB
-
-		</div>
-		<div class="graph div3"><h2>Host Status Diagrams</h2>
-		<table cellspacing=0><tbody>
-EOB;
-
-	$size='width='.(GRAPH_SIZE+50).' height='.(GRAPH_SIZE+10);
-	echo <<<EOB
-		<tr>
-		<td class=td-0>Cache Usage</td>
-		<td class=td-1>Hits &amp; Misses</td>
-		</tr>
-EOB;
-
-	echo
-		graphics_avail() ?
-			  '<tr>'.
-			  "<td class=td-0><img alt=\"\" $size src=\"$PHP_SELF&IMG=1&".(isset($_GET['singleout'])? 'singleout='.$_GET['singleout'].'&':'')."$time\"></td>".
-			  "<td class=td-1><img alt=\"\" $size src=\"$PHP_SELF&IMG=2&".(isset($_GET['singleout'])? 'singleout='.$_GET['singleout'].'&':'')."$time\"></td></tr>\n"
-			: "",
-		'<tr>',
-		'<td class=td-0><span class="green box">&nbsp;</span>Free: ',bsize($mem_avail).sprintf(" (%.1f%%)",$mem_avail*100/$mem_size),"</td>\n",
-		'<td class=td-1><span class="green box">&nbsp;</span>Hits: ',$hits.sprintf(" (%.1f%%)",$hits*100/($hits+$misses)),"</td>\n",
-		'</tr>',
-		'<tr>',
-		'<td class=td-0><span class="red box">&nbsp;</span>Used: ',bsize($mem_used ).sprintf(" (%.1f%%)",$mem_used *100/$mem_size),"</td>\n",
-		'<td class=td-1><span class="red box">&nbsp;</span>Misses: ',$misses.sprintf(" (%.1f%%)",$misses*100/($hits+$misses)),"</td>\n";
-		echo <<< EOB
-	</tr>
-	</tbody></table>
-<br/>
-	<div class="info"><h2>Cache Information</h2>
-		<table cellspacing=0><tbody>
-		<tr class=tr-0><td class=td-0>Current Items(total)</td><td>$curr_items ($total_items)</td></tr>
-		<tr class=tr-1><td class=td-0>Hits</td><td>{$hits}</td></tr>
-		<tr class=tr-0><td class=td-0>Misses</td><td>{$misses}</td></tr>
-		<tr class=tr-1><td class=td-0>Request Rate (hits, misses)</td><td>$req_rate cache requests/second</td></tr>
-		<tr class=tr-0><td class=td-0>Hit Rate</td><td>$hit_rate cache requests/second</td></tr>
-		<tr class=tr-1><td class=td-0>Miss Rate</td><td>$miss_rate cache requests/second</td></tr>
-		<tr class=tr-0><td class=td-0>Set Rate</td><td>$set_rate cache requests/second</td></tr>
-		</tbody></table>
-		</div>
-
-EOB;
-
-    break;
-
-    case 2: // variables
-
-		$m=0;
-		$cacheItems= getCacheItems();
-		$items = $cacheItems['items'];
-		$totals = $cacheItems['counts'];
-		$maxDump = MAX_ITEM_DUMP;
-		foreach($items as $server => $entries) {
-
-    	echo <<< EOB
-
-			<div class="info"><table cellspacing=0><tbody>
-			<tr><th colspan="2">$server</th></tr>
-			<tr><th>Slab Id</th><th>Info</th></tr>
-EOB;
-
-			foreach($entries as $slabId => $slab) {
-			    $dumpUrl = $PHP_SELF.'&op=2&server='.(array_search($server,$MEMCACHE_SERVERS)).'&dumpslab='.$slabId;
-				echo
-					"<tr class=tr-$m>",
-					"<td class=td-0><center>",'<a href="',$dumpUrl,'">',$slabId,'</a>',"</center></td>",
-					"<td class=td-last><b>Item count:</b> ",$slab['number'],'<br/><b>Age:</b>',duration($time-$slab['age']),'<br/> <b>Evicted:</b>',((isset($slab['evicted']) && $slab['evicted']==1)? 'Yes':'No');
-					if ((isset($_GET['dumpslab']) && $_GET['dumpslab']==$slabId) &&  (isset($_GET['server']) && $_GET['server']==array_search($server,$MEMCACHE_SERVERS))){
-					    echo "<br/><b>Items: item</b><br/>";
-					    $items = dumpCacheSlab($server,$slabId,$slab['number']);
-                        // maybe someone likes to do a pagination here :)
-					    $i=1;
-                        foreach($items['ITEM'] as $itemKey=>$itemInfo){
-                            $itemInfo = trim($itemInfo,'[ ]');
-
-
-                            echo '<a href="',$PHP_SELF,'&op=4&server=',(array_search($server,$MEMCACHE_SERVERS)),'&key=',base64_encode($itemKey).'">',$itemKey,'</a>';
-                            if ($i++ % 10 == 0) {
-                                echo '<br/>';
-                            }
-                            elseif ($i!=$slab['number']+1){
-                                echo ',';
-                            }
-                        }
-					}
-
-					echo "</td></tr>";
-				$m=1-$m;
-			}
-		echo <<<EOB
-			</tbody></table>
-			</div><hr/>
-EOB;
-}
-		break;
-
-    break;
-
-    case 4: //item dump
-        if (!isset($_GET['key']) || !isset($_GET['server'])){
-            echo "No key set!";
-            break;
-        }
-        // I'm not doing anything to check the validity of the key string.
-        // probably an exploit can be written to delete all the files in key=base64_encode("\n\r delete all").
-        // somebody has to do a fix to this.
-        $theKey = htmlentities(base64_decode($_GET['key']));
-
-        $theserver = $MEMCACHE_SERVERS[(int)$_GET['server']];
-        list($h,$p) = get_host_port_from_server($theserver);
-        $r = sendMemcacheCommand($h,$p,'get '.$theKey);
-        echo <<<EOB
-        <div class="info"><table cellspacing=0><tbody>
-			<tr><th>Server<th>Key</th><th>Value</th><th>Delete</th></tr>
-EOB;
-        if (!isset($r['VALUE'])) {
-            echo "<tr><td class=td-0>",$theserver,"</td><td class=td-0>",$theKey,
-                 "</td><td>[The requested item was not found or has expired]</td>",
-                 "<td></td>","</tr>";
-        }
-        else {
-
-            echo "<tr><td class=td-0>",$theserver,"</td><td class=td-0>",$theKey,
-                 " <br/>flag:",$r['VALUE'][$theKey]['stat']['flag'],
-                 " <br/>Size:",bsize($r['VALUE'][$theKey]['stat']['size']),
-                 "</td><td>",chunk_split($r['VALUE'][$theKey]['value'],40),"</td>",
-                 '<td><a href="',$PHP_SELF,'&op=5&server=',(int)$_GET['server'],'&key=',base64_encode($theKey),"\">Delete</a></td>","</tr>";
-        }
-        echo <<<EOB
-			</tbody></table>
-			</div><hr/>
-EOB;
-    break;
-    case 5: // item delete
-    	if (!isset($_GET['key']) || !isset($_GET['server'])){
-			echo "No key set!";
-			break;
-        }
-        $theKey = htmlentities(base64_decode($_GET['key']));
-		$theserver = $MEMCACHE_SERVERS[(int)$_GET['server']];
-		list($h,$p) = get_host_port_from_server($theserver);
-        $r = sendMemcacheCommand($h,$p,'delete '.$theKey);
-        echo 'Deleting '.$theKey.':'.$r;
-	break;
-    
-   case 6: // flush server
-        $theserver = $MEMCACHE_SERVERS[(int)$_GET['server']];
-        $r = flushServer($theserver);
-        echo 'Flush  '.$theserver.":".$r;
-   break;
-}
-echo getFooter();
-
-?>
diff --git a/dev/quick/opc.php b/dev/quick/opc.php
deleted file mode 100644
index b8eff20..0000000
--- a/dev/quick/opc.php
+++ /dev/null
@@ -1,769 +0,0 @@
-<?php
-
-include_once('_secure.inc');
-
-/**
- * OPcache GUI
- *
- * A simple but effective single-file GUI for the OPcache PHP extension.
- *
- * @author Andrew Collington, andy@amnuts.com
- * @version 2.2.3
- * @link https://github.com/amnuts/opcache-gui
- * @license MIT, http://acollington.mit-license.org/
- */
-
-
-/*
- * User configuration
- */
-
-$options = [
-    'allow_filelist'   => true,  // show/hide the files tab
-    'allow_invalidate' => true,  // give a link to invalidate files
-    'allow_reset'      => true,  // give option to reset the whole cache
-    'allow_realtime'   => true,  // give option to enable/disable real-time updates
-    'refresh_time'     => 5,     // how often the data will refresh, in seconds
-    'size_precision'   => 2,     // Digits after decimal point
-    'size_space'       => false, // have '1MB' or '1 MB' when showing sizes
-    'charts'           => true,  // show gauge chart or just big numbers
-    'debounce_rate'    => 250    // milliseconds after key press to send keyup event when filtering
-];
-
-/*
- * Shouldn't need to alter anything else below here
- */
-
-if (!extension_loaded('Zend OPcache')) {
-    die('The Zend OPcache extension does not appear to be installed');
-}
-
-if (empty(ini_get('opcache.enable'))) {
-    die('The Zend OPcache extension is installed but not turned on');
-}
-
-class OpCacheService
-{
-    protected $data;
-    protected $options;
-    protected $defaults = [
-        'allow_filelist'   => true,
-        'allow_invalidate' => true,
-        'allow_reset'      => true,
-        'allow_realtime'   => true,
-        'refresh_time'     => 5,
-        'size_precision'   => 2,
-        'size_space'       => false,
-        'charts'           => true,
-        'debounce_rate'    => 250
-    ];
-
-    private function __construct($options = [])
-    {
-        $this->options = array_merge($this->defaults, $options);
-        $this->data = $this->compileState();
-    }
-
-    public static function init($options = [])
-    {
-        $self = new self($options);
-        if (!empty($_SERVER['HTTP_X_REQUESTED_WITH'])
-            && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest'
-        ) {
-            if (isset($_GET['reset']) && $self->getOption('allow_reset')) {
-                echo '{ "success": "' . ($self->resetCache() ? 'yes' : 'no') . '" }';
-            } else if (isset($_GET['invalidate']) && $self->getOption('allow_invalidate')) {
-                echo '{ "success": "' . ($self->resetCache($_GET['invalidate']) ? 'yes' : 'no') . '" }';
-            } else {
-                echo json_encode($self->getData((empty($_GET['section']) ? null : $_GET['section'])));
-            }
-            exit;
-        } else if (isset($_GET['reset']) && $self->getOption('allow_reset')) {
-            $self->resetCache();
-            header('Location: ?');
-            exit;
-        } else if (isset($_GET['invalidate']) && $self->getOption('allow_invalidate')) {
-            $self->resetCache($_GET['invalidate']);
-            header('Location: ?');
-            exit;
-        }
-        return $self;
-    }
-
-    public function getOption($name = null)
-    {
-        if ($name === null) {
-            return $this->options;
-        }
-        return (isset($this->options[$name])
-            ? $this->options[$name]
-            : null
-        );
-    }
-
-    public function getData($section = null, $property = null)
-    {
-        if ($section === null) {
-            return $this->data;
-        }
-        $section = strtolower($section);
-        if (isset($this->data[$section])) {
-            if ($property === null || !isset($this->data[$section][$property])) {
-                return $this->data[$section];
-            }
-            return $this->data[$section][$property];
-        }
-        return null;
-    }
-
-    public function canInvalidate()
-    {
-        return ($this->getOption('allow_invalidate') && function_exists('opcache_invalidate'));
-    }
-
-    public function resetCache($file = null)
-    {
-        $success = false;
-        if ($file === null) {
-            $success = opcache_reset();
-        } else if (function_exists('opcache_invalidate')) {
-            $success = opcache_invalidate(urldecode($file), true);
-        }
-        if ($success) {
-            $this->compileState();
-        }
-        return $success;
-    }
-
-    protected function size($size)
-    {
-        $i = 0;
-        $val = array('b', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB');
-        while (($size / 1024) > 1) {
-            $size /= 1024;
-            ++$i;
-        }
-        return sprintf('%.'.$this->getOption('size_precision').'f%s%s',
-            $size, ($this->getOption('size_space') ? ' ' : ''), $val[$i]
-        );
-    }
-
-    protected function compileState()
-    {
-        $status = opcache_get_status();
-        $config = opcache_get_configuration();
-
-        $files = [];
-        if (!empty($status['scripts']) && $this->getOption('allow_filelist')) {
-            uasort($status['scripts'], function($a, $b) {
-                return $a['hits'] < $b['hits'];
-            });
-            foreach ($status['scripts'] as &$file) {
-                $file['full_path'] = str_replace('\\', '/', $file['full_path']);
-                $file['readable'] = [
-                    'hits'               => number_format($file['hits']),
-                    'memory_consumption' => $this->size($file['memory_consumption'])
-                ];
-            }
-            $files = array_values($status['scripts']);
-        }
-
-        $overview = array_merge(
-            $status['memory_usage'], $status['opcache_statistics'], [
-                'used_memory_percentage'  => round(100 * (
-                        ($status['memory_usage']['used_memory'] + $status['memory_usage']['wasted_memory'])
-                        / $config['directives']['opcache.memory_consumption'])),
-                'hit_rate_percentage'     => round($status['opcache_statistics']['opcache_hit_rate']),
-                'wasted_percentage'       => round($status['memory_usage']['current_wasted_percentage'], 2),
-                'readable' => [
-                    'total_memory'       => $this->size($config['directives']['opcache.memory_consumption']),
-                    'used_memory'        => $this->size($status['memory_usage']['used_memory']),
-                    'free_memory'        => $this->size($status['memory_usage']['free_memory']),
-                    'wasted_memory'      => $this->size($status['memory_usage']['wasted_memory']),
-                    'num_cached_scripts' => number_format($status['opcache_statistics']['num_cached_scripts']),
-                    'hits'               => number_format($status['opcache_statistics']['hits']),
-                    'misses'             => number_format($status['opcache_statistics']['misses']),
-                    'blacklist_miss'     => number_format($status['opcache_statistics']['blacklist_misses']),
-                    'num_cached_keys'    => number_format($status['opcache_statistics']['num_cached_keys']),
-                    'max_cached_keys'    => number_format($status['opcache_statistics']['max_cached_keys']),
-                    'start_time'         => date('Y-m-d H:i:s', $status['opcache_statistics']['start_time']),
-                    'last_restart_time'  => ($status['opcache_statistics']['last_restart_time'] == 0
-                            ? 'never'
-                            : date('Y-m-d H:i:s', $status['opcache_statistics']['last_restart_time'])
-                        )
-                ]
-            ]
-        );
-
-        $directives = [];
-        ksort($config['directives']);
-        foreach ($config['directives'] as $k => $v) {
-            $directives[] = ['k' => $k, 'v' => $v];
-        }
-
-        $version = array_merge(
-            $config['version'],
-            [
-                'php'    => phpversion(),
-                'server' => $_SERVER['SERVER_SOFTWARE'],
-                'host'   => (function_exists('gethostname')
-                    ? gethostname()
-                    : (php_uname('n')
-                        ?: (empty($_SERVER['SERVER_NAME'])
-                            ? $_SERVER['HOST_NAME']
-                            : $_SERVER['SERVER_NAME']
-                        )
-                    )
-                )
-            ]
-        );
-
-        return [
-            'version'    => $version,
-            'overview'   => $overview,
-            'files'      => $files,
-            'directives' => $directives,
-            'blacklist'  => $config['blacklist'],
-            'functions'  => get_extension_funcs('Zend OPcache')
-        ];
-    }
-}
-
-$opcache = OpCacheService::init($options);
-
-?>
-<!doctype html>
-<html>
-<head>
-    <meta charset="UTF-8"/>
-    <meta name="viewport" content="width=device-width,initial-scale=1.0">
-    <title>OPcache statistics on <?php echo $opcache->getData('version', 'host'); ?></title>
-    <script src="//cdn.jsdelivr.net/react/15.0.1/react.min.js"></script>
-    <script src="//cdn.jsdelivr.net/react/15.0.1/react-dom.min.js"></script>
-    <script src="//code.jquery.com/jquery-2.2.3.min.js"></script>
-    <style type="text/css">
-        body { font-family:sans-serif; font-size:90%; padding: 0; margin: 0 }
-        nav { padding-top: 20px; }
-        nav > ul { list-style-type: none; padding-left: 8px; margin: 0; border-bottom: 1px solid #ccc; }
-        nav > ul > li { display: inline-block; padding: 0; margin: 0 0 -1px 0; }
-        nav > ul > li > a { display: block; margin: 0 10px; padding: 15px 30px; border: 1px solid transparent; border-bottom-color: #ccc; text-decoration: none; }
-        nav > ul > li > a:hover { background-color: #f4f4f4; text-decoration: underline; }
-        nav > ul > li > a.active:hover { background-color: initial; }
-        nav > ul > li > a[data-for].active { border: 1px solid #ccc; border-bottom-color: #ffffff; border-top: 3px solid #6ca6ef; }
-        table { margin: 0 0 1em 0; border-collapse: collapse; border-color: #fff; width: 100%; table-layout: fixed; }
-        table caption { text-align: left; font-size: 1.5em; }
-        table tr { background-color: #99D0DF; border-color: #fff; }
-        table th { text-align: left; padding: 6px; background-color: #6ca6ef; color: #fff; border-color: #fff; font-weight: normal; }
-        table td { padding: 4px 6px; line-height: 1.4em; vertical-align: top; border-color: #fff; }
-        table tr:nth-child(odd) { background-color: #EFFEFF; }
-        table tr:nth-child(even) { background-color: #E0ECEF; }
-        #filelist table tr { background-color: #EFFEFF; }
-        #filelist table tr.alternate { background-color: #E0ECEF; }
-        td.pathname { width: 70%; }
-        footer { border-top: 1px solid #ccc; padding: 1em 2em; }
-        footer a { padding: 2em; text-decoration: none; opacity: 0.7; }
-        footer a:hover { opacity: 1; }
-        canvas { display: block; width: 250px; height: 250px; margin: 0 auto; }
-        #tabs { padding: 2em; }
-        #tabs > div { display: none; }
-        #tabs > div#overview { display:block; }
-        #resetCache, #toggleRealtime, footer > a { background-position: 5px 50%; background-repeat: no-repeat; background-color: transparent; }
-        footer > a { background-position: 0 50%; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAQCAYAAAAbBi9cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjE2MENCRkExNzVBQjExRTQ5NDBGRTUzMzQyMDVDNzFFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjE2MENCRkEyNzVBQjExRTQ5NDBGRTUzMzQyMDVDNzFFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTYwQ0JGOUY3NUFCMTFFNDk0MEZFNTMzNDIwNUM3MUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTYwQ0JGQTA3NUFCMTFFNDk0MEZFNTMzNDIwNUM3MUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7HtUU1AAABN0lEQVR42qyUvWoCQRSF77hCLLKC+FOlCKTyIbYQUuhbWPkSFnZ2NpabUvANLGyz5CkkYGMlFtFAUmiSM8lZOVkWsgm58K079+fMnTusZl92BXbgDrTtZ2szd8fas/XBOzmBKaiCEFyTkL4pc9L8vgpNJJDyWtDna61EoXpO+xcFfXUVqtrf7Vx7m9Pub/EatvgHoYXD4ylztC14BBVwydvydgDPHPgNaErN3jLKIxAUmEvAXK21I18SJpXBGAxyBAaMlblOWOs1bMXFkMGeBFsi0pJNe/QNuV7563+gs8LfhrRfE6GaHLuRqfnUiKi6lJ034B44EXL0baTTJWujNGkG3kBX5uRyZuRkPl3WzDTBtzjnxxiDDq83yNxUk7GYuXM53jeLuMNavvAXkv4zrJkTaeGHAAMAIal3icPMsyQAAAAASUVORK5CYII='); font-size: 80%; }
-        #resetCache { background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjBFMUMyMjI3NDlGMTFFNEE3QzNGNjQ0OEFDQzQ1MkMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjBFMUMyMjM3NDlGMTFFNEE3QzNGNjQ0OEFDQzQ1MkMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MEUxQzIyMDc0OUYxMUU0QTdDM0Y2NDQ4QUNDNDUyQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2MEUxQzIyMTc0OUYxMUU0QTdDM0Y2NDQ4QUNDNDUyQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PplZ+ZkAAAD1SURBVHjazFPtDYJADIUJZAMZ4UbACWQENjBO4Ao6AW5AnODcADZQJwAnwJ55NbWhB/6zycsdpX39uDZNpsURtjgzwkDoCBecs5ITPGGMwCNAkIrQw+8ri36GhBHsavFdpILEo4wEpZxRigy009EhG760gr0VhFoyZfvJKPwsheIWIeGejBZRIxRVhMRFevbuUXBew/iE/lhlBduV0j8Jx+TvJEWPphq8n5li9utgaw6cW/h6NSt/JcnVBhQxotIgKTBrbNvIHo2G0x1rwlKqTDusxiAz6hHNL1zayTVqVKRKpa/LPljPH1sJh6l/oNSrZfwSYABtq3tFdZA5BAAAAABJRU5ErkJggg=='); }
-        #toggleRealtime { position: relative; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODE5RUU4NUE3NDlGMTFFNDkyMzA4QzY1RjRBQkIzQjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODE5RUU4NUI3NDlGMTFFNDkyMzA4QzY1RjRBQkIzQjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MTlFRTg1ODc0OUYxMUU0OTIzMDhDNjVGNEFCQjNCNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4MTlFRTg1OTc0OUYxMUU0OTIzMDhDNjVGNEFCQjNCNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpXjpvMAAAD2SURBVHjarFQBEcMgDKR3E1AJldA5wMEqAQmTgINqmILdFCChdUAdMAeMcukuSwnQbbnLlZLwJPkQIcrSiT/IGNQHNb8CGQDyRw+2QWUBqC+luzo4OKQZIAVrB+ssyKp3Bkijf0+ijzIh4wQppoBauMSjyDZfMSCDxYZMsfHF120T36AqWZMkgyguQ3GOfottJ5TKnHC+wfeRsC2oDVayPgr3bbN2tHBH3tWuJCPa0JUgKtFzMQrcZH3FNHAc0yOp1cCASALyngoN6lhDopkJWxdifwY9A3u7l29ImpxOFSWIOVsGwHKENIWxss2eBVKdOeeXAAMAk/Z9h4QhXmUAAAAASUVORK5CYII='); }
-        #counts { width: 270px; float: right; }
-        #counts > div > div { background-color: #ededed; margin-bottom: 10px; }
-        #counts > div > div > h3 { background-color: #cdcdcd; padding: 4px 6px; margin: 0; text-align: center; }
-        #counts > div > div > p { margin: 0; text-align: center; }
-        #counts > div > div > p span.large + span { font-size: 20pt; margin: 0; color: #6ca6ef; }
-        #counts > div > div > p span.large { color: #6ca6ef; font-size: 80pt; margin: 0; padding: 0; text-align: center; }
-        #info { margin-right: 280px; }
-        #frmFilter { width: 520px; }
-        #moreinfo { padding: 10px; }
-        #moreinfo > p { text-align: left !important; line-height: 180%; }
-        .metainfo { font-size: 80%; }
-        .hide { display: none; }
-        #toggleRealtime.pulse::before {
-            content: ""; position: absolute;
-            top: 13px; left: 3px; width: 18px; height: 18px;
-            z-index: 10; opacity: 0; background-color: transparent;
-            border: 2px solid rgb(255, 116, 0); border-radius: 100%;
-            -webkit-animation: pulse 1s linear 2;
-            -moz-animation: pulse 1s linear 2;
-            animation: pulse 1s linear 2;
-        }
-        @media screen and (max-width: 750px) {
-            #info { margin-right:auto; clear:both; }
-            nav > ul { border-bottom: 0; }
-            nav > ul > li { display: block; margin: 0; }
-            nav > ul > li > a { display: block; margin: 0 10px; padding: 10px 0 10px 30px; border: 0; }
-            nav > ul > li > a[data-for].active { border-bottom-color: #ccc; }
-            #counts { position:relative; display:block; width:100%; }
-            #toggleRealtime.pulse::before { top: 8px; }
-        }
-        @media screen and (max-width: 550px) {
-            #frmFilter { width: 100%; }
-        }
-        @keyframes pulse {
-            0% {transform: scale(1); opacity: 0;}
-            50% {transform: scale(1.3); opacity: 0.7;}
-            100% {transform: scale(1.6); opacity: 1;}
-        }
-        @-webkit-keyframes pulse {
-            0% {-webkit-transform: scale(1); opacity: 0;}
-            50% {-webkit-transform: scale(1.3); opacity: 0.7;}
-            100% {-webkit-transform: scale(1.6); opacity: 0;}
-        }
-        @-moz-keyframes pulse {
-            0% {-moz-transform: scale(1); opacity: 0;}
-            50% {-moz-transform: scale(1.3); opacity: 0.7;}
-            100% {-moz-transform: scale(1.6); opacity: 0;}
-        }
-    </style>
-</head>
-
-<body>
-
-<header>
-    <nav>
-        <ul>
-            <li><a data-for="overview" href="#overview" class="active">Overview</a></li>
-            <?php if ($opcache->getOption('allow_filelist')): ?>
-            <li><a data-for="files" href="#files">File usage</a></li>
-            <?php endif; ?>
-            <?php if ($opcache->getOption('allow_reset')): ?>
-            <li><a href="?reset=1" id="resetCache" onclick="return confirm('Are you sure you want to reset the cache?');">Reset cache</a></li>
-            <?php endif; ?>
-            <?php if ($opcache->getOption('allow_realtime')): ?>
-            <li><a href="#" id="toggleRealtime">Enable real-time update</a></li>
-            <?php endif; ?>
-        </ul>
-    </nav>
-</header>
-
-<div id="tabs">
-    <div id="overview">
-        <div class="container">
-            <div id="counts"></div>
-            <div id="info">
-                <div id="generalInfo"></div>
-                <div id="directives"></div>
-                <div id="functions">
-                    <table>
-                        <thead>
-                            <tr><th>Available functions</th></tr>
-                        </thead>
-                        <tbody>
-                            <?php foreach ($opcache->getData('functions') as $func): ?>
-                            <tr><td><a href="http://php.net/<?php echo $func; ?>" title="View manual page" target="_blank"><?php echo $func; ?></a></td></tr>
-                            <?php endforeach; ?>
-                        </tbody>
-                    </table>
-                </div>
-                <br style="clear:both;" />
-            </div>
-        </div>
-    </div>
-    <div id="files">
-        <?php if ($opcache->getOption('allow_filelist')): ?>
-        <p><label>Start typing to filter on script path<br/><input type="text" name="filter" id="frmFilter" /><label></p>
-        <?php endif; ?>
-        <div class="container" id="filelist"></div>
-    </div>
-</div>
-
-<footer>
-    <a href="https://github.com/amnuts/opcache-gui" target="_blank">https://github.com/amnuts/opcache-gui</a>
-</footer>
-
-<script type="text/javascript">
-    var realtime = false;
-    var opstate = <?php echo json_encode($opcache->getData()); ?>;
-    var canInvalidate = <?php echo json_encode($opcache->canInvalidate()); ?>;
-    var useCharts = <?php echo json_encode($opcache->getOption('charts')); ?>;
-    var allowFiles = <?php echo json_encode($opcache->getOption('allow_filelist')); ?>;
-    var debounce = function(func, wait, immediate) {
-        var timeout;
-        wait = wait || 250;
-        return function() {
-            var context = this, args = arguments;
-            var later = function() {
-                timeout = null;
-                if (!immediate) {
-                    func.apply(context, args);
-                }
-            };
-            var callNow = immediate && !timeout;
-            clearTimeout(timeout);
-            timeout = setTimeout(later, wait);
-            if (callNow) {
-                func.apply(context, args);
-            }
-        };
-    };
-    function keyUp(event){
-        var compare = $('#frmFilter').val().toLowerCase();
-        $('#filelist').find('table tbody tr').each(function(index){
-            if ($(this).data('path').indexOf(compare) == -1) {
-                $(this).addClass('hide');
-            } else {
-                $(this).removeClass('hide');
-            }
-        });
-        $('#filelist table tbody').trigger('paint');
-    };
-
-    <?php if ($opcache->getOption('charts')): ?>
-    var Gauge = function(el, colour) {
-        this.canvas  = $(el).get(0);
-        this.ctx     = this.canvas.getContext('2d');
-        this.width   = this.canvas.width;
-        this.height  = this.canvas.height;
-        this.colour  = colour || '#6ca6ef';
-        this.loop    = null;
-        this.degrees = 0;
-        this.newdegs = 0;
-        this.text    = '';
-        this.init = function() {
-            this.ctx.clearRect(0, 0, this.width, this.height);
-            this.ctx.beginPath();
-            this.ctx.strokeStyle = '#e2e2e2';
-            this.ctx.lineWidth = 30;
-            this.ctx.arc(this.width/2, this.height/2, 100, 0, Math.PI*2, false);
-            this.ctx.stroke();
-            this.ctx.beginPath();
-            this.ctx.strokeStyle = this.colour;
-            this.ctx.lineWidth = 30;
-            this.ctx.arc(this.width/2, this.height/2, 100, 0 - (90 * Math.PI / 180), (this.degrees * Math.PI / 180) - (90 * Math.PI / 180), false);
-            this.ctx.stroke();
-            this.ctx.fillStyle = this.colour;
-            this.ctx.font = '60px sans-serif';
-            this.text = Math.round((this.degrees/360)*100) + '%';
-            this.ctx.fillText(this.text, (this.width/2) - (this.ctx.measureText(this.text).width/2), (this.height/2) + 20);
-        };
-        this.draw = function() {
-            if (typeof this.loop != 'undefined') {
-                clearInterval(this.loop);
-            }
-            var self = this;
-            self.loop = setInterval(function(){ self.animate(); }, 1000/(this.newdegs - this.degrees));
-        };
-        this.animate = function() {
-            if (this.degrees == this.newdegs) {
-                clearInterval(this.loop);
-            }
-            if (this.degrees < this.newdegs) {
-                ++this.degrees;
-            } else {
-                --this.degrees;
-            }
-            this.init();
-        };
-        this.setValue = function(val) {
-            this.newdegs = Math.round(3.6 * val);
-            this.draw();
-        };
-    }
-    <?php endif; ?>
-
-    $(function(){
-        <?php if ($opcache->getOption('allow_realtime')): ?>
-        function updateStatus() {
-            $('#toggleRealtime').removeClass('pulse');
-            $.ajax({
-                url: "#",
-                dataType: "json",
-                cache: false,
-                success: function(data) {
-                    $('#toggleRealtime').addClass('pulse');
-                    opstate = data;
-                    overviewCountsObj.setState({
-                        data : opstate.overview
-                    });
-                    generalInfoObj.setState({
-                        version : opstate.version,
-                        start : opstate.overview.readable.start_time,
-                        reset : opstate.overview.readable.last_restart_time
-                    });
-                    filesObj.setState({
-                        data : opstate.files,
-                        count_formatted : opstate.overview.readable.num_cached_scripts,
-                        count : opstate.overview.num_cached_scripts
-                    });
-                    keyUp();
-                }
-            });
-        }
-        $('#toggleRealtime').click(function(){
-            if (realtime === false) {
-                realtime = setInterval(function(){updateStatus()}, <?php echo (int)$opcache->getOption('refresh_time') * 1000; ?>);
-                $(this).text('Disable real-time update');
-            } else {
-                clearInterval(realtime);
-                realtime = false;
-                $(this).text('Enable real-time update').removeClass('pulse');
-            }
-        });
-        <?php endif; ?>
-        $('nav a[data-for]').click(function(){
-            $('#tabs > div').hide();
-            $('#' + $(this).data('for')).show();
-            $('nav a[data-for]').removeClass('active');
-            $(this).addClass('active');
-            return false;
-        });
-        $(document).on('paint', '#filelist table tbody', function(event, params) {
-            var trs = $('#filelist').find('tbody tr');
-            trs.removeClass('alternate');
-            trs.filter(':not(.hide):odd').addClass('alternate');
-            filesObj.setState({showing: trs.filter(':not(.hide)').length});
-        });
-        $('#frmFilter').bind('keyup', debounce(keyUp, <?php echo $opcache->getOption('debounce_rate'); ?>));
-    });
-
-    var MemoryUsage = React.createClass({displayName: "MemoryUsage",
-        getInitialState: function() {
-            return {
-                memoryUsageGauge : null
-            };
-        },
-        componentDidMount: function() {
-            if (this.props.chart) {
-                this.state.memoryUsageGauge = new Gauge('#memoryUsageCanvas');
-                this.state.memoryUsageGauge.setValue(this.props.value);
-            }
-        },
-        componentDidUpdate: function() {
-            if (this.state.memoryUsageGauge != null) {
-                this.state.memoryUsageGauge.setValue(this.props.value);
-            }
-        },
-        render: function() {
-            if (this.props.chart == true) {
-                return(React.createElement("canvas", {id: "memoryUsageCanvas", width: "250", height: "250", "data-value": this.props.value}));
-            }
-            return(React.createElement("p", null, React.createElement("span", {className: "large"}, this.props.value), React.createElement("span", null, "%")));
-        }
-    });
-
-    var HitRate = React.createClass({displayName: "HitRate",
-        getInitialState: function() {
-            return {
-                hitRateGauge : null
-            };
-        },
-        componentDidMount: function() {
-            if (this.props.chart) {
-                this.state.hitRateGauge = new Gauge('#hitRateCanvas');
-                this.state.hitRateGauge.setValue(this.props.value)
-            }
-        },
-        componentDidUpdate: function() {
-            if (this.state.hitRateGauge != null) {
-                this.state.hitRateGauge.setValue(this.props.value);
-            }
-        },
-        render: function() {
-            if (this.props.chart == true) {
-                return(React.createElement("canvas", {id: "hitRateCanvas", width: "250", height: "250", "data-value": this.props.value}));
-            }
-            return(React.createElement("p", null, React.createElement("span", {className: "large"}, this.props.value), React.createElement("span", null, "%")));
-        }
-    });
-
-    var OverviewCounts = React.createClass({displayName: "OverviewCounts",
-        getInitialState: function() {
-            return {
-                data  : opstate.overview,
-                chart : useCharts
-            };
-        },
-        render: function() {
-            return (
-                React.createElement("div", null,
-                    React.createElement("div", null,
-                        React.createElement("h3", null, "memory usage"),
-                        React.createElement("p", null, React.createElement(MemoryUsage, {chart: this.state.chart, value: this.state.data.used_memory_percentage}))
-                    ),
-                    React.createElement("div", null,
-                        React.createElement("h3", null, "hit rate"),
-                        React.createElement("p", null, React.createElement(HitRate, {chart: this.state.chart, value: this.state.data.hit_rate_percentage}))
-                    ),
-                    React.createElement("div", {id: "moreinfo"},
-                        React.createElement("p", null, React.createElement("b", null, "total memory:"), " ", this.state.data.readable.total_memory),
-                        React.createElement("p", null, React.createElement("b", null, "used memory:"), " ", this.state.data.readable.used_memory),
-                        React.createElement("p", null, React.createElement("b", null, "free memory:"), " ", this.state.data.readable.free_memory),
-                        React.createElement("p", null, React.createElement("b", null, "wasted memory:"), " ", this.state.data.readable.wasted_memory, " (", this.state.data.wasted_percentage, "%)"),
-                        React.createElement("p", null, React.createElement("b", null, "number of cached files:"), " ", this.state.data.readable.num_cached_scripts),
-                        React.createElement("p", null, React.createElement("b", null, "number of hits:"), " ", this.state.data.readable.hits),
-                        React.createElement("p", null, React.createElement("b", null, "number of misses:"), " ", this.state.data.readable.misses),
-                        React.createElement("p", null, React.createElement("b", null, "blacklist misses:"), " ", this.state.data.readable.blacklist_miss),
-                        React.createElement("p", null, React.createElement("b", null, "number of cached keys:"), " ", this.state.data.readable.num_cached_keys),
-                        React.createElement("p", null, React.createElement("b", null, "max cached keys:"), " ", this.state.data.readable.max_cached_keys)
-                    )
-                )
-            );
-        }
-    });
-
-    var GeneralInfo = React.createClass({displayName: "GeneralInfo",
-        getInitialState: function() {
-            return {
-                version : opstate.version,
-                start : opstate.overview.readable.start_time,
-                reset : opstate.overview.readable.last_restart_time
-            };
-        },
-        render: function() {
-            return (
-                React.createElement("table", null,
-                    React.createElement("thead", null,
-                        React.createElement("tr", null, React.createElement("th", {colSpan: "2"}, "General info"))
-                    ),
-                    React.createElement("tbody", null,
-                        React.createElement("tr", null, React.createElement("td", null, "Zend OPcache"), React.createElement("td", null, this.state.version.version)),
-                        React.createElement("tr", null, React.createElement("td", null, "PHP"), React.createElement("td", null, this.state.version.php)),
-                        React.createElement("tr", null, React.createElement("td", null, "Host"), React.createElement("td", null, this.state.version.host)),
-                        React.createElement("tr", null, React.createElement("td", null, "Server Software"), React.createElement("td", null, this.state.version.server)),
-                        React.createElement("tr", null, React.createElement("td", null, "Start time"), React.createElement("td", null, this.state.start)),
-                        React.createElement("tr", null, React.createElement("td", null, "Last reset"), React.createElement("td", null, this.state.reset))
-                    )
-                )
-            );
-        }
-    });
-
-    var Directives = React.createClass({displayName: "Directives",
-        getInitialState: function() {
-            return { data : opstate.directives };
-        },
-        render: function() {
-            var directiveNodes = this.state.data.map(function(directive) {
-                var map = { 'opcache.':'', '_':' ' };
-                var dShow = directive.k.replace(/opcache\.|_/gi, function(matched){
-                    return map[matched];
-                });
-                var vShow;
-                if (directive.v === true || directive.v === false) {
-                    vShow = React.createElement('i', {}, directive.v.toString());
-                } else if (directive.v === '') {
-                    vShow = React.createElement('i', {}, 'no value');
-                } else {
-                    vShow = directive.v;
-                }
-                return (
-                    React.createElement("tr", {key: directive.k},
-                        React.createElement("td", {title: 'View ' + directive.k + ' manual entry'}, React.createElement("a", {href: 'http://php.net/manual/en/opcache.configuration.php#ini.'
-                        + (directive.k).replace(/_/g,'-'), target: "_blank"}, dShow)),
-                        React.createElement("td", null, vShow)
-                    )
-                );
-            });
-            return (
-                React.createElement("table", null,
-                    React.createElement("thead", null,
-                        React.createElement("tr", null, React.createElement("th", {colSpan: "2"}, "Directives"))
-                    ),
-                    React.createElement("tbody", null, directiveNodes)
-                )
-            );
-        }
-    });
-
-    var Files = React.createClass({displayName: "Files",
-        getInitialState: function() {
-            return {
-                data : opstate.files,
-                showing: null,
-                allowFiles: allowFiles
-            };
-        },
-        handleInvalidate: function(e) {
-            e.preventDefault();
-            if (realtime) {
-                $.get('#', { invalidate: e.currentTarget.getAttribute('data-file') }, function(data) {
-                    console.log('success: ' + data.success);
-                }, 'json');
-            } else {
-                window.location.href = e.currentTarget.href;
-            }
-        },
-        render: function() {
-            if (this.state.allowFiles) {
-                var fileNodes = this.state.data.map(function(file, i) {
-                    var invalidate, invalidated;
-                    if (file.timestamp == 0) {
-                        invalidated = React.createElement("span", null, React.createElement("i", {className: "invalid metainfo"}, " - has been invalidated"));
-                    }
-                    if (canInvalidate) {
-                        invalidate = React.createElement("span", null, ",", React.createElement("a", {className: "metainfo", href: '?invalidate='
-                        + file.full_path, "data-file": file.full_path, onClick: this.handleInvalidate}, "force file invalidation"));
-                    }
-                    return (
-                        React.createElement("tr", {key: file.full_path, "data-path": file.full_path.toLowerCase(), className: i%2?'alternate':''},
-                            React.createElement("td", null,
-                                React.createElement("div", null,
-                                    React.createElement("span", {className: "pathname"}, file.full_path), React.createElement("br", null),
-                                    React.createElement(FilesMeta, {data: [file.readable.hits, file.readable.memory_consumption, file.last_used]}),
-                                    invalidate,
-                                    invalidated
-                                )
-                            )
-                        )
-                    );
-                }.bind(this));
-                return (
-                    React.createElement("div", null,
-                        React.createElement(FilesListed, {showing: this.state.showing}),
-                        React.createElement("table", null,
-                            React.createElement("thead", null,
-                                React.createElement("tr", null,
-                                    React.createElement("th", null, "Script")
-                                )
-                            ),
-                            React.createElement("tbody", null, fileNodes)
-                        )
-                    )
-                );
-            } else {
-                return React.createElement("span", null);
-            }
-        }
-    });
-
-    var FilesMeta = React.createClass({displayName: "FilesMeta",
-        render: function() {
-            return (
-                React.createElement("span", {className: "metainfo"},
-                    React.createElement("b", null, "hits: "), React.createElement("span", null, this.props.data[0], ", "),
-                    React.createElement("b", null, "memory: "), React.createElement("span", null, this.props.data[1], ", "),
-                    React.createElement("b", null, "last used: "), React.createElement("span", null, this.props.data[2])
-                )
-            );
-        }
-    });
-
-    var FilesListed = React.createClass({displayName: "FilesListed",
-        getInitialState: function() {
-            return {
-                formatted : opstate.overview.readable.num_cached_scripts,
-                total     : opstate.overview.num_cached_scripts
-            };
-        },
-        render: function() {
-            var display = this.state.formatted + ' file' + (this.state.total == 1 ? '' : 's') + ' cached';
-            if (this.props.showing !== null && this.props.showing != this.state.total) {
-                display += ', ' + this.props.showing + ' showing due to filter';
-            }
-            return (React.createElement("h3", null, display));
-        }
-    });
-
-    var overviewCountsObj = ReactDOM.render(React.createElement(OverviewCounts, null), document.getElementById('counts'));
-    var generalInfoObj = ReactDOM.render(React.createElement(GeneralInfo, null), document.getElementById('generalInfo'));
-    var filesObj = ReactDOM.render(React.createElement(Files, null), document.getElementById('filelist'));
-    ReactDOM.render(React.createElement(Directives, null), document.getElementById('directives'));
-</script>
-
-</body>
-</html>
diff --git a/dev/quick/request.php b/dev/quick/request.php
deleted file mode 100644
index b603aea..0000000
--- a/dev/quick/request.php
+++ /dev/null
@@ -1,7 +0,0 @@
-<?php
-
-include_once('_secure.inc');
-
-header("Content-Type: text/html; charset=utf-8");
-
-echo json_encode($_SERVER);
\ No newline at end of file
diff --git a/dev/quick/wincache.php b/dev/quick/wincache.php
deleted file mode 100644
index d2fdb30..0000000
--- a/dev/quick/wincache.php
+++ /dev/null
@@ -1,1713 +0,0 @@
-<?php
-
-include_once('_secure.inc');
-
-/**
- * @file
- * Wincache Statistics report. 
- */
-
-/**
- * Windows Cache for PHP
- *
- * Copyright (c) 2009, Microsoft Corporation. All rights reserved.
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following
- * conditions are met:
- *
- * - Redistributions of source code must retain the above
- * copyright notice, this list of conditions and the following disclaimer.
- *
- * - Redistributions in binary form must reproduce the above copyright notice,
- * this list of conditions and the following disclaimer in the documentation
- * and/or other materials provided with the distribution.
- *
- * - Neither the name of the Microsoft Corporation nor the names of its
- * contributors may be used to endorse or promote products derived from
- * this software without specific prior written permission.
- * 
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
- * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
- * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
- * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
- * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
- * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
- * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
- * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
- * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
- * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
- * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
- *
- * ---------------------------------------------------------------------------
- * Module: wincache.php
- * ---------------------------------------------------------------------------
- * Authors:
- * ---------------------------------------------------------------------------
- * Don Venkat Raman <don.raman@microsoft.com>
- * Ruslan Yakushev <ruslany@microsoft.com>
- */
-
-/**
- * Configuration settings.
- *
- * If you do not want to use authentication for this page,
- * set USE_AUTHENTICATION to 0.
- * If you use authentication then replace the default password.
- */
-define('USE_AUTHENTICATION', 1);
-//define('USERNAME', 'wincache');
-//define('PASSWORD', 'wincache');
-
-/**
- * Authentication.
- *
- * The Basic PHP authentication will work only when IIS is
- * configured to support Anonymous Authentication' and nothing else.
- * If IIS is configured to support/use any other kind of authentication
- * like Basic/Negotiate/Digest etc, this will not work.
- * In that case use the array below to define the names of users in your 
- * domain/network/workgroup which you want to grant access to.
- */
-//$user_allowed = array('DOMAIN\user1', 'DOMAIN\user2', 'DOMAIN\user3');
-
-/**
- * If the array contains string 'all', then all the users authenticated by IIS
- * will have access to the page. Uncomment the below line and comment above line
- * to grant access to all users who gets authenticated by IIS.
- */
-/* $user_allowed = array('all'); */
-
-/** ===================== END OF CONFIGURATION SETTINGS ========================== */
-
-//if (!extension_loaded('wincache')) {
-//  die('The extension WINCACHE (php_wincache.dll) is not loaded. No statistics to show. ');
-//}
-
-//if (!defined('BYPASS_SECURITY_CHECK')) {
-//  define('BYPASS_SECURITY_CHECK', FALSE);
-//}
-
-//if (USE_AUTHENTICATION == 1 && !(BYPASS_SECURITY_CHECK === TRUE)) {
-//  if (!empty($_SERVER['AUTH_TYPE']) && !empty($_SERVER['REMOTE_USER']) && strcasecmp($_SERVER['REMOTE_USER'], 'anonymous')) {
-//    if (!in_array(strtolower($_SERVER['REMOTE_USER']), array_map('strtolower', $user_allowed))
-//    && !in_array('all', array_map('strtolower', $user_allowed))) {
-//      echo 'You are not authorised to view this page. Please contact server admin to get permission. Exiting. ';
-//      exit;
-//    }
-//  }
-//  elseif (!isset($_SERVER['PHP_AUTH_USER']) || !isset($_SERVER['PHP_AUTH_PW']) || $_SERVER['PHP_AUTH_USER'] != USERNAME || $_SERVER['PHP_AUTH_PW'] != PASSWORD) {
-//    header('WWW-Authenticate: Basic realm="WINCACHE Log In!"');
-//    header('HTTP/1.0 401 Unauthorized');
-//    exit;
-//  }
-//  elseif ($_SERVER['PHP_AUTH_PW'] == 'wincache') {
-//    echo "Please change the default password to get this page worPking. Exiting.";
-//    exit;
-//  }
-//}
-
-// Global variables.
-global  $ocache_mem_info, 
-$ocache_file_info,
-$ocache_summary_info,
-$fcache_mem_info,
-$fcache_file_info,
-$fcache_summary_info,
-$rpcache_mem_info,
-$rpcache_file_info,
-$ucache_mem_info,
-$ucache_info,
-$scache_mem_info,
-$scache_info,
-$user_cache_available,
-$session_cache_available;
-
-define('IMG_WIDTH', 320);
-define('IMG_HEIGHT', 220);
-define('SUMMARY_DATA', 1);
-// Opcode cache.
-define('OCACHE_DATA', 2);
-// File cache.
-define('FCACHE_DATA', 3);
-// User cache.
-define('UCACHE_DATA', 4);
-// Session cache.
-define('SCACHE_DATA', 5);
-// Resolve file cache.
-define('RCACHE_DATA', 6);
-define('BAR_CHART', 1);
-define('PIE_CHART', 2);
-define('PATH_MAX_LENGTH', 45);
-define('INI_MAX_LENGTH', 45);
-define('SUBKEY_MAX_LENGTH', 90);
-define('CACHE_MAX_ENTRY', 250);
-
-// WinCache settings that are used for debugging purposes.
-$settings_to_hide = array('wincache.localheap', 'wincache.debuglevel', 'wincache.olocaltest');
-
-// Input parameters check.
-//$PHP_SELF = isset($_SERVER['PHP_SELF']) ? htmlentities(strip_tags($_SERVER['PHP_SELF'],''), ENT_QUOTES, 'UTF-8') : '';
-$PHP_SELF = strtok($_SERVER['REQUEST_URI'],'?');
-$page = isset($_GET['page']) ? $_GET['page'] : SUMMARY_DATA;
-if (!is_numeric($page) || $page < SUMMARY_DATA || $page > RCACHE_DATA)
-  $page = SUMMARY_DATA;
-
-$img = 0;
-if (isset($_GET['img']) && is_numeric($_GET['img'])) {
-  $img = $_GET['img'];
-  if ($img < OCACHE_DATA || $img > SCACHE_DATA)
-    $img = 0;
-}
-$chart_type = BAR_CHART;
-if (isset($_GET['type']) && is_numeric($_GET['type'])) {
-  $chart_type = $_GET['type'];
-  if ($chart_type < BAR_CHART || $chart_type > PIE_CHART)
-    $chart_type = BAR_CHART;
-}
-$chart_param1 = 0;
-if (isset($_GET['p1']) && is_numeric($_GET['p1'])) {
-  $chart_param1 = $_GET['p1'];
-  if ($chart_param1 < 0) 
-    $chart_param1 = 0;
-  elseif ($chart_param1 > PHP_INT_MAX)
-    $chart_param1 = PHP_INT_MAX;
-}
-$chart_param2 = 0;
-if (isset($_GET['p2']) && is_numeric($_GET['p2'])) {
-  $chart_param2 = $_GET['p2'];
-  if ($chart_param2 < 0) 
-    $chart_param2 = 0;
-  elseif ($chart_param2 > PHP_INT_MAX)
-    $chart_param2 = PHP_INT_MAX;
-}
-
-$show_all_ucache_entries = 0;
-if (isset($_GET['all']) && is_numeric($_GET['all'])) {
-  $show_all_ucache_entries = $_GET['all'];
-  if ($show_all_ucache_entries < 0 || $show_all_ucache_entries > 1)
-    $show_all_ucache_entries = 0;
-}
-
-$clear_user_cache = 0;
-if (isset($_GET['clc']) && is_numeric($_GET['clc'])) {
-  $clear_user_cache = $_GET['clc'];
-  if ($clear_user_cache < 0 || $clear_user_cache > 1)
-    $clear_user_cache = 0;
-}
-
-$clear_session_cache = 0;
-if (isset($_GET['clsc']) && is_numeric($_GET['clsc'])) {
-  $clear_session_cache = $_GET['clsc'];
-  if ($clear_session_cache < 0 || $clear_session_cache > 1)
-    $clear_session_cache = 0;
-}
-
-$ucache_key = NULL;
-if (isset($_GET['key']))
-  $ucache_key = $_GET['key'];
-// End of input parameters check.
-
-// Initialize global variables.
-$user_cache_available = function_exists('wincache_ucache_info') && !strcmp(ini_get('wincache.ucenabled'), "1");
-$session_cache_available = function_exists('wincache_scache_info') && (!strcasecmp(ini_get('session.save_handler'), "wincache") || (isset($GLOBALS['WINCACHE_SESSION_ACTIVE']) && $GLOBALS['WINCACHE_SESSION_ACTIVE'] == TRUE));
-$ocache_mem_info = NULL;
-$ocache_file_info = NULL;
-$ocache_summary_info = NULL;
-$fcache_mem_info = NULL;
-$fcache_file_info = NULL;
-$fcache_summary_info = NULL;
-$rpcache_mem_info = NULL;
-$rpcache_file_info = NULL;
-$ucache_mem_info = NULL;
-$ucache_info = NULL;
-$scache_mem_info = NULL;
-$scache_info = NULL;
-$sort_key = NULL;
-
-if ($session_cache_available && ($page == SUMMARY_DATA || $page == SCACHE_DATA) && (session_status() == PHP_SESSION_NONE)) {
-  @session_name('WINCACHE_SESSION');
-  session_start();
-}
-
-function cmp($a, $b)
-{
-  global $sort_key;
-  if ($sort_key == 'file_name')
-    return strcmp(get_trimmed_filename($a[$sort_key], PATH_MAX_LENGTH), get_trimmed_filename($b[$sort_key], PATH_MAX_LENGTH));
-  elseif ($sort_key == 'resolve_path')
-    return strcmp(get_trimmed_string($a[$sort_key], PATH_MAX_LENGTH), get_trimmed_string($b[$sort_key], PATH_MAX_LENGTH));
-  else
-    return 0;
-}
-
-function convert_bytes_to_string($bytes) {
-  $units = array(0 => 'B', 1 => 'kB', 2 => 'MB', 3 => 'GB');
-  $log = log($bytes, 1024);
-  $power = (int) $log;
-  $size = pow(1024, $log - $power);
-  return round($size, 2) . ' ' . $units[$power];
-}
-
-function seconds_to_words($seconds) {
-  // Return value.
-  $ret = "";
-  // Get the hours.
-  $hours = intval(intval($seconds) / 3600);
-  if ($hours > 0) {
-    $ret .= "$hours hours ";
-  }
-  // Get the minutes.
-  $minutes = bcmod((intval($seconds) / 60), 60);
-  if ($hours > 0 || $minutes > 0) {
-    $ret .= "$minutes minutes ";
-  }
-  // Get the seconds.
-  $seconds = bcmod(intval($seconds), 60);
-  $ret .= "$seconds seconds";
-
-  return $ret;
-}
-
-function get_trimmed_filename($filepath, $max_len) {
-  if ($max_len <= 0) {
-    die ('The maximum allowed length must be bigger than 0');
-  }
-  $result = basename($filepath);
-  if (strlen($result) > $max_len) 
-    $result = substr($result, -1 * $max_len);
-
-  return $result;
-}
-
-function get_trimmed_string($input, $max_len) {
-  if ($max_len <= 3) {
-    die ('The maximum allowed length must be bigger than 3');
-  }
-
-  $result = $input;
-  if (strlen($result) > $max_len) 
-    $result = substr($result, 0, $max_len - 3). ' ... ';
-
-  return $result;
-}
-
-function get_trimmed_ini_value($input, $max_len, $separators = array('|', ',')) {
-  if ($max_len <= 3) {
-    die ('The maximum allowed length must be bigger than 3');
-  }
-
-  $result = $input;
-  $lastindex = 0;
-  if (strlen($result) > $max_len) {
-    $result = substr($result, 0, $max_len - 3). ' ... ';
-    if (!is_array($separators)) die('The separators must be in an array');
-    foreach ($separators as $separator) {
-      $index = strripos($result, $separator);
-      if ($index !== FALSE  && $index > $lastindex) {
-        $lastindex = $index;
-      }
-    }
-    if (0 < $lastindex && $lastindex < ($max_len - 3)) {
-      $result = substr($result, 0, $lastindex + 1). ' ... ';
-    }
-  }
-  return $result;
-}
-
-function get_ocache_summary($entries) {
-  $result = array();
-  $result['total_classes'] = 0;
-  $result['total_functions'] = 0;
-  $result['oldest_entry'] = '';
-  $result['recent_entry'] = '';
-
-  if (isset($entries) && count($entries) > 0 && isset($entries[1]['file_name'])) {
-    foreach ((array)$entries as $entry) {
-      $result['total_classes'] += $entry['class_count'];
-      $result['total_functions'] += $entry['function_count'];
-    }
-  }
-  return $result;
-}
-function get_fcache_summary($entries) {
-  $result = array();
-  $result['total_size'] = 0;
-  $result['oldest_entry'] = '';
-  $result['recent_entry'] = '';
-
-  if (isset($entries) && count($entries) > 0 && isset($entries[1]['file_name'])) {
-    foreach ((array)$entries as $entry) {
-      $result['total_size'] += $entry['file_size'];
-    }
-  }
-  return $result;
-}
-
-function get_ocache_size_markup($size) {
-  $size_string = convert_bytes_to_string($size);
-
-  if ($size > (ini_get('wincache.ocachesize') * pow(1024, 2))) {
-    return '<td class="n" title="The opcode cache size has been automatically increased to be at least 3 times bigger than file cache size.">' .$size_string. '</td>';
-  }
-
-  return '<td class="v">' .$size_string. '</td>';    
-}
-
-function get_chart_title($chart_data) {
-  $chart_title = '';
-  switch($chart_data) {
-    case OCACHE_DATA:
-      $chart_title = 'Opcode Cache';
-      break;
-    case FCACHE_DATA:
-      $chart_title = 'File Cache';
-      break;
-    case UCACHE_DATA:
-      $chart_title = 'User Cache';
-      break;
-    case SCACHE_DATA:
-      $chart_title = 'Session Cache';
-  }
-  return $chart_title;
-}
-
-function gd_loaded() {
-  return extension_loaded('gd');
-}
-
-if ($img > 0) {
-  if (!gd_loaded())
-    exit(0);
-
-  function create_hit_miss_chart($width, $height, $hits, $misses, $title = 'Hits & Misses (in %)') {
-    
-    $hit_percent = 0;
-    $miss_percent = 0;
-    if ($hits < 0) $hits = 0;
-    if ($misses < 0) $misses = 0;
-    if ($hits > 0 || $misses > 0) {
-      $hit_percent = round($hits / ($hits + $misses) * 100, 2);
-      $miss_percent = round($misses / ($hits + $misses) * 100, 2);
-    }
-    $data = array('Hits' => $hit_percent, 'Misses' => $miss_percent);
-    
-    $image = imagecreate($width, $height); 
-
-    // colors 
-    $white = imagecolorallocate($image, 0xFF, 0xFF, 0xFF);
-    $phpblue = imagecolorallocate($image, 0x5C, 0x87, 0xB2);
-    $black = imagecolorallocate($image, 0x00, 0x00, 0x00);
-    $gray = imagecolorallocate($image, 0xC0, 0xC0, 0xC0);
-
-    $maxval = max($data);
-    $nval = sizeof($data);
-
-    // Draw something here.
-    // Left horizontal margin for y-labels.
-    $hmargin = 38;
-    // Top (bottom) vertical margin for title (x-labels).
-    $vmargin = 20; 
-
-    $base = floor(($width - $hmargin) / $nval);
-
-    // X-size of plot.
-    $xsize = $nval * $base - 1;
-    // Y-size of plot.
-    $ysize = $height - 2 * $vmargin;
-    
-    // Plot frame.
-    imagerectangle($image, $hmargin, $vmargin, $hmargin + $xsize, $vmargin + $ysize, $black); 
-
-    // Top label.
-    $titlefont = 3;
-    $txtsize = imagefontwidth($titlefont) * strlen($title);
-    $xpos = (int)($hmargin + ($xsize - $txtsize) / 2);
-    // Force positive coordinates.
-    $xpos = max(1, $xpos);
-    // Distance from top.
-    $ypos = 3;
-    imagestring($image, $titlefont, $xpos, $ypos, $title , $black);
-
-    // Grid lines.
-    $labelfont = 2;
-    $ngrid = 4;
-
-    $dydat = 100 / $ngrid;
-    $dypix = $ysize / $ngrid;
-
-    for ($i = 0; $i <= $ngrid; $i++) {
-      $ydat = (int)($i * $dydat);
-      $ypos = $vmargin + $ysize - (int)($i * $dypix);
-
-      $txtsize = imagefontwidth($labelfont) * strlen($ydat);
-      $txtheight = imagefontheight($labelfont);
-
-      $xpos = (int)(($hmargin - $txtsize) / 2);
-      $xpos = max(1, $xpos);
-
-      imagestring($image, $labelfont, $xpos, $ypos - (int)($txtheight/2), $ydat, $black);
-
-      if (!($i == 0) && !($i >= $ngrid)) 
-        imageline($image, $hmargin - 3, $ypos, $hmargin + $xsize, $ypos, $gray); 
-      // Don't draw at Y=0 and top.
-    }
-
-    // Graph bars.
-    // Columns and x labels.
-    // Galf of spacing between columns.
-    $padding = 30;
-    // Pixels per data unit.
-    $yscale = $ysize / ($ngrid * $dydat);
-
-    for ($i = 0; list($xval, $yval) = each($data); $i++) {
-
-      // Vertical columns.
-      $ymax = $vmargin + $ysize; 
-      $ymin = $ymax - (int)($yval * $yscale); 
-      $xmax = $hmargin + ($i + 1) * $base - $padding; 
-      $xmin = $hmargin + $i * $base + $padding; 
-
-      imagefilledrectangle($image, $xmin, $ymin, $xmax, $ymax, $phpblue); 
-
-      // X labels.
-      $xlabel = $xval. ': ' .$yval. '%';
-      $txtsize = imagefontwidth($labelfont) * strlen($xlabel);
-
-      $xpos = ($xmin + $xmax - $txtsize) / 2;
-      $xpos = max($xmin, $xpos);
-      // Distance from x axis.
-      $ypos = $ymax + 3; 
-
-      imagestring($image, $labelfont, $xpos, $ypos, $xlabel, $black); 
-    }
-    return $image;
-  }
-  
-  function create_used_free_chart($width, $height, $used_memory, $free_memory, $title = 'Free & Used Memory (in %)') {
-    // Check the input parameters to avoid division by zero and weird cases.
-    if ($free_memory <= 0 && $used_memory <= 0) {
-      $free_memory = 1;
-      $used_memory = 0;
-    }
-    
-    $centerX = 120;
-    $centerY = 120;
-    $diameter = 120;
-
-    // Left (right) horizontal margin.
-    $hmargin = 5;
-    // Top (bottom) vertical margin.
-    $vmargin = 20;
-
-    $image = imagecreate($width, $height);
-
-    // Colors. 
-    $white = imagecolorallocate($image, 0xFF, 0xFF, 0xFF);
-    $black = imagecolorallocate($image, 0x00, 0x00, 0x00);
-    $pie_color[1] = imagecolorallocate($image, 0x5C, 0x87, 0xB2);
-    $pie_color[2] = imagecolorallocate($image, 0xCB, 0xE1, 0xEF);
-    $pie_color[3] = imagecolorallocate($image, 0xC0, 0xC0, 0xC0);
-
-    // Label font size.
-    $labelfont = 2;
-    $hfw = imagefontwidth($labelfont);
-    $vfw = imagefontheight($labelfont);
-
-    // Border.
-    imagerectangle($image, $hmargin, $vmargin, $width - $hmargin, $height - $vmargin, $black); 
-
-    // Top label.
-    $titlefont = 3;
-    $txtsize = imagefontwidth($titlefont) * strlen($title);
-    $hpos = (int)(($width - $txtsize) / 2);
-    // Distance from top.
-    $vpos = 3; 
-    imagestring($image, $titlefont, $hpos, $vpos, $title , $black);
-
-    $total = 0;
-    $n = 0;
-    $items = array('Used memory' => $used_memory, 'Free memory' => $free_memory);
-
-    // Read the arguments into different arrays:
-    foreach($items as $key => $val) {
-      $n++;
-      $label[$n] = $key;
-      $value[$n] = $val;
-      $total += $val;
-      $arc_dec[$n] = $total*360;
-      $arc_rad[$n] = $total*2*pi();
-    }
-
-    // The base:
-    $arc_rad[0] = 0;
-    $arc_dec[0] = 0;
-
-    // Count the labels:
-    for ($i = 1; $i <= $n; $i++) {
-      
-      // Calculate the percents:
-      $perc[$i] = $value[$i] / $total;
-      $percstr[$i] = (string) number_format($perc[$i] * 100, 2)."%";
-      // Label with percentage:
-      $label[$i] = $percstr[$i];
-
-      // Calculate the arc and line positions:
-      $arc_rad[$i] = $arc_rad[$i] / $total;
-      $arc_dec[$i] = $arc_dec[$i] / $total;
-      $hpos = round($centerX + ($diameter / 2) * sin($arc_rad[$i]));
-      $vpos = round($centerY + ($diameter / 2) * cos($arc_rad[$i]));
-      imageline($image, $centerX, $centerY, $hpos, $vpos, $black);
-      imagearc($image, $centerX, $centerY, $diameter, $diameter, $arc_dec[$i-1], $arc_dec[$i], $black);
-
-      // Calculate the positions for the labels:
-      $arc_rad_label = $arc_rad[$i-1] + 0.5 * $perc[$i] * 2 * pi();
-      $hpos = $centerX + 1.1 * ($diameter / 2) * sin($arc_rad_label);
-      $vpos = $centerY + 1.1 * ($diameter / 2) * cos($arc_rad_label);
-      if (($arc_rad_label > 0.5 * pi()) && ($arc_rad_label < 1.5 * pi())) {
-        $vpos = $vpos - $vfw;
-      }
-      if ($arc_rad_label > pi()) {
-        $hpos = $hpos - $hfw * strlen($label[$i]);
-      }
-      // Display the labels:
-      imagestring($image, $labelfont, $hpos, $vpos, $label[$i], $black);
-    }
-
-    // Fill the parts with their colors:
-    for ($i = 1; $i <= $n; $i++) {
-      if (round($arc_dec[$i] - $arc_dec[$i-1]) != 0) {
-        $arc_rad_label = $arc_rad[$i - 1] + 0.5 * $perc[$i] * 2 * pi();
-        $hpos = $centerX + 0.8 * ($diameter / 2) * sin($arc_rad_label);
-        $vpos = $centerY + 0.8 * ($diameter / 2) * cos($arc_rad_label);
-        imagefilltoborder($image, $hpos, $vpos, $black, $pie_color[$i]);
-      }
-    }
-
-    // Legend.
-    $hpos = $centerX + 1.1 * ($diameter / 2) + $hfw * strlen('50.00%');
-    $vpos = $centerY - ($diameter / 2);
-    $i = 1;
-    $thumb_size = 5;
-    foreach ($items as $key => $value) {
-      imagefilledrectangle($image, $hpos, $vpos, $hpos + $thumb_size, $vpos + $thumb_size, $pie_color[$i++]);
-      imagestring($image, $labelfont, $hpos + $thumb_size + 5, $vpos, $key, $black);
-      $vpos += $vfw + 2;
-    }
-    return $image;
-  }
-
-  $png_image = NULL;
-  $chart_title = get_chart_title($img);
-  
-  if ($chart_type == PIE_CHART) {
-    $png_image = create_used_free_chart(IMG_WIDTH, IMG_HEIGHT, $chart_param1, $chart_param2, 'Memory Usage by ' .$chart_title. ' (in %)');
-  }
-  else{
-    $png_image = create_hit_miss_chart(IMG_WIDTH, IMG_HEIGHT,  $chart_param1, $chart_param2, $chart_title. ' Hits & Misses (in %)');
-  }
-
-  if ($png_image !== NULL) {
-    // Flush image.
-    header('Content-type: image/png');
-    imagepng($png_image);
-    imagedestroy($png_image); 
-  }
-  exit;
-}
-
-function get_chart_markup($data_type, $chart_type, $chart_param1, $chart_param2) {
-  global	$PHP_SELF;
-
-  $result = '';
-  $alt_title = '';
-
-  if (gd_loaded()) {
-    $alt_title = get_chart_title($data_type);
-    if ($alt_title == '') {
-      return '';
-    }
-
-    if ($chart_type == BAR_CHART)
-      $alt_title .= ' hit and miss percentage chart';
-    elseif ($chart_type == PIE_CHART)
-      $alt_title .= ' memory usage percentage chart';
-    else
-      return '';
-
-    $result = '<img src="' . $PHP_SELF;
-    $result .= '?img=' . $data_type . '&amp;type=' . $chart_type;
-    $result .= '&amp;p1=' . $chart_param1 . '&amp;p2=' . $chart_param2 . '" ';
-    $result .= 'alt="' . $alt_title . '" width="' . IMG_WIDTH . '" height="' . IMG_HEIGHT . '" />';
-  }
-  else {
-    $result = '<p class="notice">Enable GD library (<em>php_gd2.dll</em>) in order to see the charts.</p>';
-  }
-
-  return $result;
-}
-
-function cache_scope_text($is_local)
-{
-  return ($is_local == true) ? 'local' : 'global';
-}
-
-function init_cache_info($cache_data = SUMMARY_DATA)
-{
-  // Redeclare globals to keep scope.
-  global  $ocache_mem_info, 
-  $ocache_file_info,
-  $ocache_summary_info,
-  $fcache_mem_info,
-  $fcache_file_info,
-  $fcache_summary_info,
-  $rpcache_mem_info,
-  $rpcache_file_info,
-  $ucache_mem_info,
-  $ucache_info,
-  $scache_mem_info,
-  $scache_info,
-  $user_cache_available,
-  $session_cache_available;
-
-  if ($cache_data == SUMMARY_DATA || $cache_data == OCACHE_DATA) {
-    $ocache_mem_info = wincache_ocache_meminfo();
-    $ocache_file_info = wincache_ocache_fileinfo();
-    $ocache_summary_info = get_ocache_summary($ocache_file_info['file_entries']);
-  }
-  if ($cache_data == SUMMARY_DATA || $cache_data == FCACHE_DATA) {
-    $fcache_mem_info = wincache_fcache_meminfo();
-    $fcache_file_info = wincache_fcache_fileinfo();
-    $fcache_summary_info = get_fcache_summary($fcache_file_info['file_entries']);
-  }
-  if ($cache_data == SUMMARY_DATA || $cache_data == RCACHE_DATA) {
-    $rpcache_mem_info = wincache_rplist_meminfo();
-    $rpcache_file_info = wincache_rplist_fileinfo();
-  }
-  if ($user_cache_available && ($cache_data == SUMMARY_DATA || $cache_data == UCACHE_DATA)) {
-    $ucache_mem_info = wincache_ucache_meminfo();
-    $ucache_info = wincache_ucache_info();
-  }
-  if ($session_cache_available && ($cache_data == SUMMARY_DATA || $cache_data == SCACHE_DATA)) {
-    $scache_mem_info = wincache_scache_meminfo();
-    $scache_info = wincache_scache_info();
-  }
-}
-
-if (USE_AUTHENTICATION && $user_cache_available && $clear_user_cache) {
-  wincache_ucache_clear();
-  header('Location: ' . $PHP_SELF . '?page=' . UCACHE_DATA);
-  exit;
-}
-
-if (USE_AUTHENTICATION && $session_cache_available && $clear_session_cache) {
-  init_cache_info(SCACHE_DATA);
-  $current_id = session_id();
-  // Destroy all session.
-  foreach ($scache_info['scache_entries'] as $entry) {
-    // Do not delete own session.
-    if ($current_id == $entry['key_name']) {
-      continue;
-    }
-    session_id($entry['key_name']);
-    session_start();
-    session_destroy();
-    session_write_close();
-    $no_session = TRUE;
-  }
-  // When there is only one session and that is ours,
-  // calling session_start will fail because current
-  // session was not destroyed.
-  if (session_status() == PHP_SESSION_NONE) {
-    session_id($current_id);
-    session_start();
-  }
-  header('Location: ' . $PHP_SELF . '?page=' . SCACHE_DATA);
-  exit;
-}
-
-?>
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml">
-
-<head>
-    <style type="text/css">
-        body {
-            background-color: #ffffff;
-            color: #000000;
-            font-family: sans-serif;
-            font-size: 0.8em;
-        }
-
-        h1 {
-            font-size: 2em;
-        }
-
-        #content {
-            width: 960px;
-            margin: 5px;
-        }
-
-        #header {
-            color: #ffffff;
-            border: 1px solid black;
-            background-color: #5C87B2;
-            margin-bottom: 1em;
-            padding: 1em 2em;
-        }
-        /*The #menu element credits: */
-        /*Credits: Dynamic Drive CSS Library */
-        /*URL: http://www.dynamicdrive.com/style/ */
-        #menu {
-            width: 100%;
-            overflow: hidden;
-            border-bottom: 1px solid black;
-            margin-bottom: 1em; /*bottom horizontal line that runs beneath tabs*/
-        }
-
-            #menu ul {
-                margin: 0;
-                padding: 0;
-                padding-left: 10px; /*offset of tabs relative to browser left edge*/
-                ;
-                font-weight: bold;
-                font-size: 1.2em;
-                list-style-type: none;
-            }
-
-            #menu li {
-                display: inline;
-                margin: 0;
-            }
-
-                #menu li a {
-                    float: left;
-                    display: block;
-                    text-decoration: none;
-                    margin: 0;
-                    padding: 7px 8px;
-                    border-right: 1px solid white; /*padding inside each tab*/
-                    color: white; /*right divider between tabs*/
-                    background: #5C87B2; /*background of tabs (default state)*/
-                }
-
-                    #menu li a:visited {
-                        color: white;
-                    }
-
-                    #menu li a:hover, #menu li.selected a {
-                        background: #336699;
-                    }
-        /*The end of the menu elements credits */
-        #panel {
-            float: left;
-            width: 100%;
-            margin-bottom: 2em;
-            border: 1px solid black;
-        }
-
-        #panel_header {
-            background-color: #5C87B2;
-            font-weight: bold;
-            color: #ffffff;
-            border-bottom: 1px solid black;
-            padding: 0.5em;
-        }
-
-        #panel_body {
-            background-color: #E7E7E7;
-            padding: 0.5em;
-            white-space:;
-        }
-
-        pre {
-            white-space: pre-wrap; /* css-3 */
-            white-space: -moz-pre-wrap !important; /* Mozilla, since 1999 */
-            white-space: -pre-wrap; /* Opera 4-6 */
-            white-space: -o-pre-wrap; /* Opera 7 */
-            word-wrap: break-word; /* Internet Explorer 5.5+ */
-        }
-
-        .overview {
-            float: left;
-            width: inherit;
-            margin-bottom: 2em;
-        }
-
-        .list {
-            float: left;
-            width: 100%;
-            margin-bottom: 2em;
-        }
-
-        .wideleftpanel {
-            float: left;
-            width: 520px;
-            margin-right: 20px;
-        }
-
-        .widerightpanel {
-            float: left;
-            width: 420px;
-        }
-
-        .leftpanel {
-            float: left;
-            width: 310px;
-        }
-
-        .rightpanel {
-            float: left;
-            width: 320px;
-            margin-left: 5px;
-        }
-
-        .extra_margin {
-            margin-top: 20px;
-        }
-
-        table {
-            border-collapse: collapse;
-        }
-
-        td, th {
-            border: 1px solid black;
-            vertical-align: baseline;
-        }
-
-        th {
-            background-color: #5C87B2;
-            font-weight: bold;
-            color: #ffffff;
-        }
-
-        .e {
-            background-color: #cbe1ef;
-            font-weight: bold;
-            color: #000000;
-            width: 40%;
-        }
-
-        .leftpanel .e {
-            width: 50%;
-        }
-
-        .v {
-            background-color: #E7E7E7;
-            color: #000000;
-        }
-
-        .n {
-            background-color: #FFFF00;
-            color: #000000;
-            font-weight: bold;
-        }
-
-        .notice {
-            display: block;
-            margin-top: 1.5em;
-            padding: 1em;
-            background-color: #ffffe0;
-            border: 1px solid #dddddd;
-        }
-
-        .clear {
-            clear: both;
-        }
-    </style>
-    <title>Windows Cache Extension for PHP - Statistics</title>
-</head>
-
-<body>
-
-    <div id="content">
-        <div id="header">
-            <h1>Windows Cache Extension for PHP - Statistics</h1>
-        </div>
-        <div id="menu">
-            <ul>
-                <li <?php echo ($page == SUMMARY_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', SUMMARY_DATA; ?>">Summary</a></li>
-                <li <?php echo ($page == OCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', OCACHE_DATA; ?>">Opcode Cache</a></li>
-                <li <?php echo ($page == FCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', FCACHE_DATA; ?>">File System Cache</a></li>
-                <li <?php echo ($page == UCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', UCACHE_DATA; ?>">User Cache</a></li>
-                <li <?php echo ($page == SCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', SCACHE_DATA; ?>">Session Cache</a></li>
-                <li <?php echo ($page == RCACHE_DATA)? 'class="selected"' : ''; ?>><a href="<?php echo $PHP_SELF , '?page=', RCACHE_DATA; ?>">Resolve Path Cache</a></li>
-            </ul>
-        </div>
-        <?php if ($page == SUMMARY_DATA) { 
-                init_cache_info(SUMMARY_DATA);
-        ?>
-        <div class="overview">
-            <div class="wideleftpanel">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">General Information</th>
-                    </tr>
-                    <tr>
-                        <td class="e">WinCache version</td>
-                        <td class="v"><?php echo phpversion('wincache'); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">PHP version</td>
-                        <td class="v"><?php echo phpversion(); ?></td>
-                    </tr>
-                    <tr title="<?php echo $_SERVER['DOCUMENT_ROOT']; ?>">
-                        <td class="e">Document root</td>
-                        <td class="v"><?php echo get_trimmed_string($_SERVER['DOCUMENT_ROOT'], PATH_MAX_LENGTH); ?></td>
-                    </tr>
-                    <tr title="<?php echo isset($_SERVER['PHPRC']) ? $_SERVER['PHPRC'] : 'Not defined'; ?>">
-                        <td class="e">PHPRC</td>
-                        <td class="v"><?php echo isset($_SERVER['PHPRC']) ? get_trimmed_string($_SERVER['PHPRC'], PATH_MAX_LENGTH) : 'Not defined'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Server software</td>
-                        <td class="v"><?php echo isset($_SERVER['SERVER_SOFTWARE']) ? $_SERVER['SERVER_SOFTWARE']: 'Not set'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Operating System</td>
-                        <td class="v"><?php echo php_uname('s'), ' ', php_uname('r'); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Processor information</td>
-                        <td class="v"><?php echo isset($_SERVER['PROCESSOR_IDENTIFIER']) ? $_SERVER['PROCESSOR_IDENTIFIER']: 'Not set'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Number of processors</td>
-                        <td class="v"><?php echo isset($_SERVER['NUMBER_OF_PROCESSORS']) ? $_SERVER['NUMBER_OF_PROCESSORS']: 'Not set'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Machine name</td>
-                        <td class="v"><?php echo (getenv('COMPUTERNAME') != FALSE) ? getenv('COMPUTERNAME') : 'Not set'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Host name</td>
-                        <td class="v"><?php echo isset($_SERVER['HTTP_HOST']) ? $_SERVER['HTTP_HOST'] : 'Not set'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">PHP session handler</td>
-                        <td class="v"><?php echo ini_get('session.save_handler'); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Application Pool ID</td>
-                        <td class="v"><?php echo (getenv('APP_POOL_ID') != FALSE) ? getenv('APP_POOL_ID') : 'Not available'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Site ID</td>
-                        <td class="v"><?php echo isset($_SERVER['INSTANCE_ID']) ? $_SERVER['INSTANCE_ID'] : 'Not available'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">FastCGI impersonation</td>
-                        <td class="v"><?php echo (ini_get('fastcgi.impersonate') === '1') ? 'enabled' : 'disabled'; ?></td>
-                    </tr>
-                </table>
-            </div>
-            <div class="widerightpanel">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">Cache Settings</th>
-                    </tr>
-                    <?php 
-                foreach (ini_get_all('wincache') as $ini_name => $ini_value) {
-                  // Do not show the settings used for debugging
-                  if (in_array($ini_name, $settings_to_hide))
-                    continue;
-                  echo '<tr title="', $ini_value['local_value'], '"><td class="e">', $ini_name, '</td><td class="v">';
-                  if (!is_numeric($ini_value['local_value']))
-                    echo get_trimmed_ini_value($ini_value['local_value'], INI_MAX_LENGTH);
-                  else
-                    echo $ini_value['local_value'];
-                  echo '</td></tr>', "\n";
-                } 
-                    ?>
-                </table>
-            </div>
-        </div>
-        <div class="overview">
-            <div class="leftpanel extra_margin">
-                <table width="100%">
-                    <tr>
-                        <th colspan="2">Opcode Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache scope</td>
-                        <td class="v"><?php echo (isset($ocache_file_info['is_local_cache'])) ? cache_scope_text($ocache_file_info['is_local_cache']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache uptime</td>
-                        <td class="v"><?php echo (isset($ocache_file_info['total_cache_uptime'])) ? seconds_to_words($ocache_file_info['total_cache_uptime']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached files</td>
-                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', OCACHE_DATA, '#filelist'; ?>"><?php echo $ocache_file_info['total_file_count']; ?></a></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Hits</td>
-                        <td class="v"><?php echo $ocache_file_info['total_hit_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Misses</td>
-                        <td class="v"><?php echo $ocache_file_info['total_miss_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <?php echo get_ocache_size_markup($ocache_mem_info['memory_total']); ?>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ocache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ocache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Number of functions</td>
-                        <td class="v"><?php echo $ocache_summary_info['total_functions']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Number of classes</td>
-                        <td class="v"><?php echo $ocache_summary_info['total_classes']; ?></td>
-                    </tr>
-                </table>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(OCACHE_DATA, BAR_CHART, $ocache_file_info['total_hit_count'], $ocache_file_info['total_miss_count']); ?>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(OCACHE_DATA, PIE_CHART, $ocache_mem_info['memory_total'] - $ocache_mem_info['memory_free'], $ocache_mem_info['memory_free']); ?>
-            </div>
-        </div>
-        <div class="overview">
-            <div class="leftpanel extra_margin">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">File Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache uptime</td>
-                        <td class="v"><?php echo (isset($fcache_file_info['total_cache_uptime'])) ? seconds_to_words($fcache_file_info['total_cache_uptime']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached files</td>
-                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', FCACHE_DATA, '#filelist'; ?>"><?php echo $fcache_file_info['total_file_count']; ?></a></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total files size</td>
-                        <td class="v"><?php echo convert_bytes_to_string($fcache_summary_info['total_size']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Hits</td>
-                        <td class="v"><?php echo $fcache_file_info['total_hit_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Misses</td>
-                        <td class="v"><?php echo $fcache_file_info['total_miss_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_total']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                </table>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(FCACHE_DATA, BAR_CHART, $fcache_file_info['total_hit_count'], $fcache_file_info['total_miss_count']); ?>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(FCACHE_DATA, PIE_CHART, $fcache_mem_info['memory_total'] - $fcache_mem_info['memory_free'], $fcache_mem_info['memory_free']); ?>
-            </div>
-        </div>
-        <div class="overview">
-            <?php if ($user_cache_available) {?>
-            <div class="leftpanel extra_margin">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">User Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache scope</td>
-                        <td class="v"><?php echo (isset($ucache_info['is_local_cache'])) ? cache_scope_text($ucache_info['is_local_cache']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache uptime</td>
-                        <td class="v"><?php echo (isset($ucache_info['total_cache_uptime'])) ? seconds_to_words($ucache_info['total_cache_uptime']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached entries</td>
-                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', UCACHE_DATA, '#filelist'; ?>"><?php echo $ucache_info['total_item_count']; ?></a></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Hits</td>
-                        <td class="v"><?php echo $ucache_info['total_hit_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Misses</td>
-                        <td class="v"><?php echo $ucache_info['total_miss_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_total']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                </table>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(UCACHE_DATA, BAR_CHART, $ucache_info['total_hit_count'], $ucache_info['total_miss_count']); ?>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(UCACHE_DATA, PIE_CHART, $ucache_mem_info['memory_total'] - $ucache_mem_info['memory_free'], $ucache_mem_info['memory_free']); ?>
-            </div>
-            <?php } ?>
-        </div>
-        <div class="overview">
-            <?php if ($session_cache_available) {?>
-            <div class="leftpanel extra_margin">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">Session Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache scope</td>
-                        <td class="v"><?php echo (isset($scache_info['is_local_cache'])) ? cache_scope_text($scache_info['is_local_cache']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache uptime</td>
-                        <td class="v"><?php echo (isset($scache_info['total_cache_uptime'])) ? seconds_to_words($scache_info['total_cache_uptime']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached entries</td>
-                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', SCACHE_DATA, '#filelist'; ?>"><?php echo $scache_info['total_item_count']; ?></a></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Hits</td>
-                        <td class="v"><?php echo $scache_info['total_hit_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Misses</td>
-                        <td class="v"><?php echo $scache_info['total_miss_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_total']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                </table>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(SCACHE_DATA, BAR_CHART, $scache_info['total_hit_count'], $scache_info['total_miss_count']); ?>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(SCACHE_DATA, PIE_CHART, $scache_mem_info['memory_total'] - $scache_mem_info['memory_free'], $scache_mem_info['memory_free']); ?>
-            </div>
-            <?php } ?>
-        </div>
-        <div class="overview">
-            <div class="leftpanel">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">Resolve Path Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached entries</td>
-                        <td class="v"><a href="<?php echo $PHP_SELF, '?page=', RCACHE_DATA, '#filelist'; ?>"><?php echo $rpcache_file_info['total_file_count']; ?></a></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_total']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                </table>
-            </div>
-        </div>
-        <?php } elseif ($page == OCACHE_DATA) {
-                init_cache_info(OCACHE_DATA);
-        ?>
-        <div class="overview">
-            <div class="leftpanel extra_margin">
-                <table width="100%">
-                    <tr>
-                        <th colspan="2">Opcode Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache scope</td>
-                        <td class="v"><?php echo (isset($ocache_file_info['is_local_cache'])) ? cache_scope_text($ocache_file_info['is_local_cache']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache uptime</td>
-                        <td class="v"><?php echo (isset($ocache_file_info['total_cache_uptime'])) ? seconds_to_words($ocache_file_info['total_cache_uptime']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached files</td>
-                        <td class="v"><?php echo $ocache_file_info['total_file_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Hits</td>
-                        <td class="v"><?php echo $ocache_file_info['total_hit_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Misses</td>
-                        <td class="v"><?php echo $ocache_file_info['total_miss_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <?php echo get_ocache_size_markup($ocache_mem_info['memory_total']); ?>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ocache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ocache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Number of functions</td>
-                        <td class="v"><?php echo $ocache_summary_info['total_functions']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Number of classes</td>
-                        <td class="v"><?php echo $ocache_summary_info['total_classes']; ?></td>
-                    </tr>
-                </table>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(OCACHE_DATA, BAR_CHART, $ocache_file_info['total_hit_count'], $ocache_file_info['total_miss_count']); ?>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(OCACHE_DATA, PIE_CHART, $ocache_mem_info['memory_total'] - $ocache_mem_info['memory_free'], $ocache_mem_info['memory_free']); ?>
-            </div>
-        </div>
-        <div class="list" id="filelist">
-            <table style="width: 100%">
-                <tr>
-                    <th colspan="7">Opcode cache entries</th>
-                </tr>
-                <tr>
-                    <th title="Name of the file">File name</th>
-                    <th title="Number of PHP functions in the file">Function count</th>
-                    <th title="Number of PHP classes in the file">Class count</th>
-                    <th title="Indicates total amount of time in seconds for which the file has been in the cache">Add time</th>
-                    <th title="Total amount of time in seconds which has elapsed since the file was last used">Use time</th>
-                    <th title="Indicates total amount of time in seconds which has elapsed since the file was last checked for file change">Last check</th>
-                    <th title="Number of times cache has been hit">Hit count</th>
-                </tr>
-                <?php 
-                $sort_key = 'file_name';
-                usort($ocache_file_info['file_entries'], 'cmp');
-                foreach ($ocache_file_info['file_entries'] as $entry) {
-                  echo '<tr title="', $entry['file_name'] ,'">', "\n";
-                  echo '<td class="e">', get_trimmed_filename($entry['file_name'], PATH_MAX_LENGTH),'</td>', "\n";
-                  echo '<td class="v">', $entry['function_count'],'</td>', "\n";
-                  echo '<td class="v">', $entry['class_count'],'</td>', "\n";
-                  echo '<td class="v">', $entry['add_time'],'</td>', "\n";
-                  echo '<td class="v">', $entry['use_time'],'</td>', "\n";
-                  echo '<td class="v">', $entry['last_check'],'</td>', "\n";
-                  echo '<td class="v">', $entry['hit_count'],'</td>', "\n";
-                  echo "</tr>\n";
-                }
-                ?>
-            </table>
-        </div>
-        <?php } elseif ($page == FCACHE_DATA) {
-                init_cache_info(FCACHE_DATA);
-        ?>
-        <div class="overview">
-            <div class="leftpanel extra_margin">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">File Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache uptime</td>
-                        <td class="v"><?php echo (isset($fcache_file_info['total_cache_uptime'])) ? seconds_to_words($fcache_file_info['total_cache_uptime']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached files</td>
-                        <td class="v"><?php echo $fcache_file_info['total_file_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total files size</td>
-                        <td class="v"><?php echo convert_bytes_to_string($fcache_summary_info['total_size']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Hits</td>
-                        <td class="v"><?php echo $fcache_file_info['total_hit_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Misses</td>
-                        <td class="v"><?php echo $fcache_file_info['total_miss_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_total']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($fcache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                </table>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(FCACHE_DATA, BAR_CHART, $fcache_file_info['total_hit_count'], $fcache_file_info['total_miss_count']); ?>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(FCACHE_DATA, PIE_CHART, $fcache_mem_info['memory_total'] - $fcache_mem_info['memory_free'], $fcache_mem_info['memory_free']); ?>
-            </div>
-        </div>
-        <div class="list" id="filelist">
-            <table style="width: 100%">
-                <tr>
-                    <th colspan="6">File cache entries</th>
-                </tr>
-                <tr>
-                    <th title="Name of the file">File name</th>
-                    <th title="Size of the file in KB">File size</th>
-                    <th title="Indicates total amount of time in seconds for which the file has been in the cache">Add time</th>
-                    <th title="Total amount of time in seconds which has elapsed since the file was last used">Use time</th>
-                    <th title="Indicates total amount of time in seconds which has elapsed since the file was last checked for file change">Last check</th>
-                    <th title="Number of times the file has been served from the cache">Hit Count</th>
-                </tr>
-                <?php 
-                $sort_key = 'file_name';
-                usort($fcache_file_info['file_entries'], 'cmp');
-                foreach ($fcache_file_info['file_entries'] as $entry) {
-                  echo '<tr title="', $entry['file_name'] ,'">', "\n";
-                  echo '<td class="e">', get_trimmed_filename($entry['file_name'], PATH_MAX_LENGTH),'</td>', "\n";
-                  echo '<td class="v">', convert_bytes_to_string($entry['file_size']),'</td>', "\n";
-                  echo '<td class="v">', $entry['add_time'],'</td>', "\n";
-                  echo '<td class="v">', $entry['use_time'],'</td>', "\n";
-                  echo '<td class="v">', $entry['last_check'],'</td>', "\n";
-                  echo '<td class="v">', $entry['hit_count'],'</td>', "\n";
-                  echo "</tr>\n";
-                }
-                ?>
-            </table>
-        </div>
-        <?php } elseif ($page == UCACHE_DATA && $ucache_key == NULL) {
-                if ($user_cache_available) { 
-                  init_cache_info(UCACHE_DATA);
-        ?>
-        <div class="overview">
-            <div class="leftpanel extra_margin">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">User Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache scope</td>
-                        <td class="v"><?php echo (isset($ucache_info['is_local_cache'])) ? cache_scope_text($ucache_info['is_local_cache']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache uptime</td>
-                        <td class="v"><?php echo (isset($ucache_info['total_cache_uptime'])) ? seconds_to_words($ucache_info['total_cache_uptime']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached entries</td>
-                        <td class="v"><?php echo $ucache_info['total_item_count'];
-                                            if (USE_AUTHENTICATION && $ucache_info['total_item_count'] > 0) 
-                                              echo ' (<a href="', $PHP_SELF, '?page=', UCACHE_DATA, '&amp;clc=1">Clear All</a>)'; ?>
-                        </td>
-                    </tr>
-                    <tr>
-                        <td class="e">Hits</td>
-                        <td class="v"><?php echo $ucache_info['total_hit_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Misses</td>
-                        <td class="v"><?php echo $ucache_info['total_miss_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_total']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($ucache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                </table>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(UCACHE_DATA, BAR_CHART, $ucache_info['total_hit_count'], $ucache_info['total_miss_count']); ?>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(UCACHE_DATA, PIE_CHART, $ucache_mem_info['memory_total'] - $ucache_mem_info['memory_free'], $ucache_mem_info['memory_free']); ?>
-            </div>
-        </div>
-        <div class="list" id="filelist">
-            <table style="width: 100%">
-                <tr>
-                    <th colspan="6">User cache entries</th>
-                </tr>
-                <tr>
-                    <th title="Object Key Name">Key name</th>
-                    <th title="Type of the object stored">Value type</th>
-                    <th title="Size of the object stored">Value size</th>
-                    <th title="Total amount of time in seconds which remains until the object is removed from the cache">Total TTL</th>
-                    <th title="Total amount of time in seconds which has elapsed since the object was added to the cache">Total age</th>
-                    <th title="Number of times the object has been served from the cache">Hit Count</th>
-                </tr>
-                <?php
-                  $count = 0;
-                  foreach ($ucache_info['ucache_entries'] as $entry) {
-                    echo '<tr title="', $entry['key_name'] ,'">', "\n";
-                    if (USE_AUTHENTICATION)
-                      echo '<td class="e"><a href="', $PHP_SELF, '?page=', UCACHE_DATA, '&key=', urlencode($entry['key_name']), '">', get_trimmed_string($entry['key_name'], PATH_MAX_LENGTH),'</a></td>', "\n";
-                    else
-                      echo '<td class="e">', get_trimmed_string($entry['key_name'], PATH_MAX_LENGTH),'</td>', "\n";
-                    echo '<td class="v">', $entry['value_type'], '</td>', "\n";
-                    echo '<td class="v">', convert_bytes_to_string($entry['value_size']), '</td>', "\n";        
-                    echo '<td class="v">', $entry['ttl_seconds'],'</td>', "\n";
-                    echo '<td class="v">', $entry['age_seconds'],'</td>', "\n";
-                    echo '<td class="v">', $entry['hitcount'],'</td>', "\n";
-                    echo "</tr>\n";
-                    if ($count++ > CACHE_MAX_ENTRY && !$show_all_ucache_entries) {
-                      echo '<tr><td colspan="6"><a href="', $PHP_SELF, '?page=', UCACHE_DATA, '&amp;all=1">Show all entries</td></tr>';
-                      break;
-                    }
-                  }
-                ?>
-            </table>
-        </div>
-        <?php } else { ?>
-        <div class="overview">
-            <p class="notice">
-                The user cache is not available. Enable the user cache by using <strong>wincache.ucenabled</strong>
-                directive in <strong>php.ini</strong> file.
-            </p>
-        </div>
-        <?php }?>
-        <?php } elseif ($page == UCACHE_DATA && $ucache_key != NULL && USE_AUTHENTICATION) {
-                if (!wincache_ucache_exists($ucache_key)) {
-        ?>
-        <div class="overview">
-            <p class="notice">The variable with this key does not exist in the user cache.</p>
-        </div>
-        <?php       } 
-                else{
-                  $ucache_entry_info = wincache_ucache_info(true, $ucache_key);
-        ?>
-        <div class="list">
-            <table width="60%">
-                <tr>
-                    <th colspan="2">User Cache Entry Information</th>
-                </tr>
-                <tr>
-                    <td class="e">Key</td>
-                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['key_name']; ?></td>
-                </tr>
-                <tr>
-                    <td class="e">Value Type</td>
-                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['value_type']; ?></td>
-                </tr>
-                <tr>
-                    <td class="e">Size</td>
-                    <td class="v"><?php echo convert_bytes_to_string($ucache_entry_info['ucache_entries'][1]['value_size']); ?></td>
-                </tr>
-                <tr>
-                    <td class="e">Total Time To Live (in seconds)</td>
-                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['ttl_seconds']; ?></td>
-                </tr>
-                <tr>
-                    <td class="e">Total Age (in seconds)</td>
-                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['age_seconds']; ?></td>
-                </tr>
-                <tr>
-                    <td class="e">Hit Count</td>
-                    <td class="v"><?php echo $ucache_entry_info['ucache_entries'][1]['hitcount']; ?></td>
-                </tr>
-            </table>
-        </div>
-        <div id="panel">
-            <div id="panel_header">
-                User Cache Entry Content
-            </div>
-            <div id="panel_body">
-                <pre><?php var_dump(wincache_ucache_get($ucache_key))?></pre>
-            </div>
-        </div>
-        <?php }?>
-        <?php } elseif ($page == SCACHE_DATA) {
-                if ($session_cache_available) {
-                  init_cache_info(SCACHE_DATA);
-        ?>
-        <div class="overview">
-            <div class="leftpanel extra_margin">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">Session Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache scope</td>
-                        <td class="v"><?php echo (isset($scache_info['is_local_cache'])) ? cache_scope_text($scache_info['is_local_cache']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cache uptime</td>
-                        <td class="v"><?php echo (isset($scache_info['total_cache_uptime'])) ? seconds_to_words($scache_info['total_cache_uptime']) : 'Unknown'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached entries</td>
-                        <td class="v"><?php echo $scache_info['total_item_count'];
-                        if (USE_AUTHENTICATION && $scache_info['total_item_count'] > 0) 
-                                              echo ' (<a href="', $PHP_SELF, '?page=', UCACHE_DATA, '&amp;clsc=1">Clear All</a>)'; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Hits</td>
-                        <td class="v"><?php echo $scache_info['total_hit_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Misses</td>
-                        <td class="v"><?php echo $scache_info['total_miss_count']; ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_total']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($scache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                </table>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(SCACHE_DATA, BAR_CHART, $scache_info['total_hit_count'], $scache_info['total_miss_count']); ?>
-            </div>
-            <div class="rightpanel">
-                <?php echo get_chart_markup(SCACHE_DATA, PIE_CHART, $scache_mem_info['memory_total'] - $scache_mem_info['memory_free'], $scache_mem_info['memory_free']); ?>
-            </div>
-        </div>
-        <div class="list" id="sessionlist">
-            <table style="width: 100%">
-                <tr>
-                    <th colspan="6">Session cache entries</th>
-                </tr>
-                <tr>
-                    <th title="Object Key Name">Key name</th>
-                    <th title="Type of the object stored">Value type</th>
-                    <th title="Size of the object stored">Value size</th>
-                    <th title="Total amount of time in seconds which remains until the object is removed from the cache">Total TTL</th>
-                    <th title="Total amount of time in seconds which has elapsed since the object was added to the cache">Total age</th>
-                    <th title="Number of times the object has been served from the cache">Hit Count</th>
-                </tr>
-                <?php 
-                  $count = 0;
-                  foreach ($scache_info['scache_entries'] as $entry) {
-                    echo '<tr title="', $entry['key_name'] ,'">', "\n";
-                    echo '<td class="e">', get_trimmed_string($entry['key_name'], PATH_MAX_LENGTH),'</td>', "\n";
-                    echo '<td class="v">', $entry['value_type'], '</td>', "\n";
-                    echo '<td class="v">', convert_bytes_to_string($entry['value_size']), '</td>', "\n";
-                    echo '<td class="v">', $entry['ttl_seconds'],'</td>', "\n";
-                    echo '<td class="v">', $entry['age_seconds'],'</td>', "\n";
-                    echo '<td class="v">', $entry['hitcount'],'</td>', "\n";
-                    echo "</tr>\n";
-                    if ($count++ > CACHE_MAX_ENTRY && !$show_all_ucache_entries) {
-                      echo '<tr><td colspan="6"><a href="', $PHP_SELF, '?page=', SCACHE_DATA, '&amp;all=1">Show all entries</td></tr>';
-                      break;
-                    }
-                  }
-                ?>
-            </table>
-        </div>
-        <?php } else { ?>
-        <div class="overview">
-            <p class="notice">
-                The session cache is not enabled. To enable session cache set the session handler in <strong>php.ini</strong> to 
-        <strong>wincache</strong>, for example: <strong>session.save_handler=wincache</strong>. </p><p class="notice">
-                If you are using Drupal check the README.txt file of the <a href="https://www.drupal.org/project/wincachedrupal">WinCacheDrupal</a> module on how to enable the session cache.
-            </p>
-        </div>
-        <?php }?>
-        <?php } elseif ($page == RCACHE_DATA) {
-                init_cache_info(RCACHE_DATA);
-        ?>
-        <div class="overview">
-            <div class="wideleftpanel">
-                <table style="width: 100%">
-                    <tr>
-                        <th colspan="2">Resolve Path Cache Overview</th>
-                    </tr>
-                    <tr>
-                        <td class="e">Cached entries</td>
-                        <td class="v"><?php echo $rpcache_file_info['total_file_count'] ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Total memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_total']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Available memory</td>
-                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_free']); ?></td>
-                    </tr>
-                    <tr>
-                        <td class="e">Memory overhead</td>
-                        <td class="v"><?php echo convert_bytes_to_string($rpcache_mem_info['memory_overhead']); ?></td>
-                    </tr>
-                </table>
-            </div>
-        </div>
-        <div class="list" id="filelist">
-            <table style="width: 100%">
-                <tr>
-                    <th colspan="2">Resolve path cache entries</th>
-                </tr>
-                <tr>
-                    <th>Resolve path</th>
-                    <th>Subkey data</th>
-                </tr>
-                <?php 
-                $sort_key = 'resolve_path';
-                usort($rpcache_file_info['rplist_entries'], 'cmp');
-                foreach ($rpcache_file_info['rplist_entries'] as $entry) {
-                  echo '<tr title="',$entry['subkey_data'], '">', "\n";
-                  echo '<td class="e">', get_trimmed_string($entry['resolve_path'], PATH_MAX_LENGTH),'</td>', "\n";
-                  echo '<td class="v">', get_trimmed_string($entry['subkey_data'], SUBKEY_MAX_LENGTH), '</td>', "\n";
-                  echo "</tr>\n";
-                }
-                ?>
-            </table>
-        </div>
-        <?php } ?>
-        <div class="clear"></div>
-    </div>
-</body>
-
-</html>
\ No newline at end of file

From 1b5c3d012f5c82dc18dc42f99ae9cedcee23e2df Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sat, 25 Nov 2017 19:55:03 -0300
Subject: [PATCH 12/17] Relocate the rewrite rules that affect the pub/static
 directory.

---
 pub/static/web.config | 20 --------------------
 pub/web.config        | 20 ++++++++++++++++++++
 2 files changed, 20 insertions(+), 20 deletions(-)
 delete mode 100644 pub/static/web.config

diff --git a/pub/static/web.config b/pub/static/web.config
deleted file mode 100644
index d6efcb8..0000000
--- a/pub/static/web.config
+++ /dev/null
@@ -1,20 +0,0 @@
-<configuration>
-	<system.webServer>
-		<rewrite>
-			<rules>
-				<clear/>
-				<rule name="Imported Rule 1-1 - pub" stopProcessing="false">
-					<match url="^version.+?/(.+)$" ignoreCase="false" />
-					<action type="Rewrite" url="{R:1}" />
-				</rule>
-				<rule name="Imported Rule 2" stopProcessing="true">
-					<match url=".*" ignoreCase="false" />
-					<conditions logicalGrouping="MatchAll">
-						<add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
-					</conditions>
-					<action type="Rewrite" url="../static.php?resource={R:0}" appendQueryString="false" />
-				</rule>
-			</rules>
-		</rewrite>
-	</system.webServer>
-</configuration>
diff --git a/pub/web.config b/pub/web.config
index 608c3d0..4d9c837 100644
--- a/pub/web.config
+++ b/pub/web.config
@@ -24,4 +24,24 @@
 			</rules>
 		</rewrite>
 	</system.webServer>
+	<location path="static">
+		<system.webServer>
+		<rewrite>
+			<rules>
+				<clear/>
+				<rule name="Imported Rule 1-1 - pub" stopProcessing="false">
+					<match url="^static/version.+?/(.+)$" ignoreCase="false" />
+					<action type="Rewrite" url="{R:1}" />
+				</rule>
+				<rule name="Imported Rule 2" stopProcessing="false">
+					<match url=".*" ignoreCase="false" />
+					<conditions logicalGrouping="MatchAll">
+						<add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
+					</conditions>
+					<action type="Rewrite" url="static.php?resource={R:0}" appendQueryString="false" />
+				</rule>
+			</rules>
+		</rewrite>
+	</system.webServer>
+	</location>
 </configuration>
\ No newline at end of file

From dc3b99f07db84fe235090109a123b9826ce2ae55 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sat, 25 Nov 2017 21:36:58 -0300
Subject: [PATCH 13/17] Fix component detection failing when /etc is mounted on
 a symlink.

---
 app/NonComposerComponentRegistration.php | 22 ++++++++++++++++++++++
 composer.json                            |  3 ++-
 2 files changed, 24 insertions(+), 1 deletion(-)
 create mode 100644 app/NonComposerComponentRegistration.php

diff --git a/app/NonComposerComponentRegistration.php b/app/NonComposerComponentRegistration.php
new file mode 100644
index 0000000..418e49d
--- /dev/null
+++ b/app/NonComposerComponentRegistration.php
@@ -0,0 +1,22 @@
+<?php
+/**
+ * Copyright © 2013-2017 Magento, Inc. All rights reserved.
+ * See COPYING.txt for license details.
+ */
+
+$pathList[] = __DIR__ . '/code/*/*/cli_commands.php';
+$pathList[] = __DIR__ . '/code/*/*/registration.php';
+$pathList[] = __DIR__ . '/design/*/*/*/registration.php';
+$pathList[] = __DIR__ . '/i18n/*/*/registration.php';
+$pathList[] = dirname(__DIR__) . '/lib/internal/*/*/registration.php';
+$pathList[] = dirname(__DIR__) . '/lib/internal/*/*/*/registration.php';
+foreach ($pathList as $path) {
+    // Sorting is disabled intentionally for performance improvement
+    $files = glob($path, GLOB_NOSORT);
+    if ($files === false) {
+        throw new \RuntimeException('glob() returned error while searching in \'' . $path . '\'');
+    }
+    foreach ($files as $file) {
+        include $file;
+    }
+}
diff --git a/composer.json b/composer.json
index 1d78e9f..10ab4db 100644
--- a/composer.json
+++ b/composer.json
@@ -33,7 +33,8 @@
             "": "app/code/"
         },
         "files": [
-            "app/etc/NonComposerComponentRegistration.php"
+            "app/etc/NonComposerComponentRegistration.php",
+            "app/NonComposerComponentRegistration.php"
         ]
     },
     "autoload-dev": {

From bfd529b71be131871cc3b25c9f848dd0f41f7735 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sun, 10 Dec 2017 21:31:54 +0100
Subject: [PATCH 14/17] Consolidate web.config files.

---
 pub/web.config   | 47 ---------------------------------------
 setup/web.config |  9 --------
 web.config       | 68 ++++++++++++++++++++++++++++++++++++++++++++++++--------
 3 files changed, 59 insertions(+), 65 deletions(-)
 delete mode 100644 pub/web.config
 delete mode 100644 setup/web.config

diff --git a/pub/web.config b/pub/web.config
deleted file mode 100644
index 4d9c837..0000000
--- a/pub/web.config
+++ /dev/null
@@ -1,47 +0,0 @@
-<configuration>
-	<system.webServer>
-		<rewrite>
-			<rules>
-				<clear />
-				<!-- HTTP_AUTHORIZATION variable removed-->
-				<rule name="TRACE and TRACK HTTP methods 2" stopProcessing="true">
-					<match url=".*" ignoreCase="false" />
-					<conditions>
-						<!-- TRACE and TRACK HTTP methods disabled to prevent XSS attacks-->
-						<add input="{REQUEST_METHOD}" pattern="^TRAC[EK]" ignoreCase="false" />
-					</conditions>
-					<action type="Redirect" redirectType="Temporary" url="{R:0}" />
-				</rule>
-				<rule name="Route requests to index.php 2" stopProcessing="true">
-					<match url=".*" ignoreCase="false" />
-					<conditions>
-						<add input="{URL}" pattern="^/(media|skin|js)/" ignoreCase="false" negate="true" />
-						<add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
-						<add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
-					</conditions>
-					<action type="Rewrite" url="index.php" />
-				</rule>
-			</rules>
-		</rewrite>
-	</system.webServer>
-	<location path="static">
-		<system.webServer>
-		<rewrite>
-			<rules>
-				<clear/>
-				<rule name="Imported Rule 1-1 - pub" stopProcessing="false">
-					<match url="^static/version.+?/(.+)$" ignoreCase="false" />
-					<action type="Rewrite" url="{R:1}" />
-				</rule>
-				<rule name="Imported Rule 2" stopProcessing="false">
-					<match url=".*" ignoreCase="false" />
-					<conditions logicalGrouping="MatchAll">
-						<add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
-					</conditions>
-					<action type="Rewrite" url="static.php?resource={R:0}" appendQueryString="false" />
-				</rule>
-			</rules>
-		</rewrite>
-	</system.webServer>
-	</location>
-</configuration>
\ No newline at end of file
diff --git a/setup/web.config b/setup/web.config
deleted file mode 100644
index 0d59be0..0000000
--- a/setup/web.config
+++ /dev/null
@@ -1,9 +0,0 @@
-<configuration>
-	<system.webServer>
-		<rewrite>
-			<rules>
-				<clear/>
-			</rules>
-		</rewrite>
-	</system.webServer>
-</configuration>
diff --git a/web.config b/web.config
index 5861e33..6d0cf67 100644
--- a/web.config
+++ b/web.config
@@ -45,6 +45,65 @@
 			</authorization>
 		</security>-->
 	</system.webServer>
+	<!--Custom configuration for the pub directory-->
+	<location path="pub">
+		<system.webServer>
+			<rewrite>
+				<rules>
+					<clear />
+					<!-- HTTP_AUTHORIZATION variable removed-->
+					<rule name="TRACE and TRACK HTTP methods 2" stopProcessing="true">
+						<match url=".*" ignoreCase="false" />
+						<conditions>
+							<!-- TRACE and TRACK HTTP methods disabled to prevent XSS attacks-->
+							<add input="{REQUEST_METHOD}" pattern="^TRAC[EK]" ignoreCase="false" />
+						</conditions>
+						<action type="Redirect" redirectType="Temporary" url="{R:0}" />
+					</rule>
+					<rule name="Route requests to index.php 2" stopProcessing="true">
+						<match url=".*" ignoreCase="false" />
+						<conditions>
+							<add input="{URL}" pattern="^/(media|skin|js)/" ignoreCase="false" negate="true" />
+							<add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
+							<add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
+						</conditions>
+						<action type="Rewrite" url="pub/index.php" />
+					</rule>
+				</rules>
+			</rewrite>
+		</system.webServer>
+	</location>
+	<!--Custom configuration for the pub/static directory-->
+	<location path="pub/static">
+		<system.webServer>
+			<rewrite>
+				<rules>
+					<clear/>
+					<rule name="Imported Rule 1-1 - pub" stopProcessing="false">
+						<match url="^pub/static/version.+?/(.+)$" ignoreCase="false" />
+						<action type="Rewrite" url="{R:1}" />
+					</rule>
+					<rule name="Imported Rule 2" stopProcessing="false">
+						<match url=".*" ignoreCase="false" />
+						<conditions logicalGrouping="MatchAll">
+							<add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
+						</conditions>
+						<action type="Rewrite" url="pub/static.php?resource={R:0}" appendQueryString="false" />
+					</rule>
+				</rules>
+			</rewrite>
+		</system.webServer>
+	</location>
+	<!--Custom configuration for the setup directory-->
+	<location path="setup">
+		<system.webServer>
+			<rewrite>
+				<rules>
+					<clear/>
+				</rules>
+			</rewrite>
+		</system.webServer>
+	</location>
 	<!--https://stackoverflow.com/questions/37078383/deny-all-files-in-a-directory-via-web-config-setting/37080857#37080857-->
 	<location path="app">
 		<system.webServer>
@@ -100,13 +159,4 @@
 			</security>
 		</system.webServer>
 	</location>
-	<!--<location path="index.php">
-		<system.webServer>
-			<security>
-				<authorization>
-					<add accessType="Allow" users="*" roles="" />
-				</authorization>
-			</security>
-		</system.webServer>
-	</location>-->
 </configuration>
\ No newline at end of file

From 56a605a011758c8ab299a9dec6de2baae8f9f8d7 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sat, 13 Jan 2018 09:40:54 +0100
Subject: [PATCH 15/17] Add chef deployment settings.

---
 chef/chef.yml        | 137 +++++++++++++++++++++++++++++++++++++++++++++++++++
 chef/chef__local.yml |  22 +++++++++
 2 files changed, 159 insertions(+)
 create mode 100644 chef/chef.yml
 create mode 100644 chef/chef__local.yml

diff --git a/chef/chef.yml b/chef/chef.yml
new file mode 100644
index 0000000..660d026
--- /dev/null
+++ b/chef/chef.yml
@@ -0,0 +1,137 @@
+﻿id: 'magentocommerce'
+deployers:
+  # App is the artifact itself, other deployers
+  # depend on this one!
+  app: 
+    type: 'app'
+  iis:
+    type: 'iis'
+    pools:
+      default:
+        Enable32BitAppOnWin64: true
+        AutoStart: true
+        ManagedPipelineMode: Integrated
+        StartMode: AlwaysRunning
+        ManagedRuntimeVersion: ''
+    mounts:
+      root:
+        root: true
+        path: '/'
+    bindings:
+      local:
+        # Binding will be mounted through HOSTS file
+        # automatically when using interface = 'local'
+        hostname: 'local.magentocommerce.com'
+        port: 80
+        interface: 'local'
+  php:
+    type: 'php'
+    runtime:
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/releases/php-7.0.23-nts-Win32-VC14-x64.zip', maps: {'*' : 'php/'}}
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/xdebug/2.5.5/php_xdebug-2.5.5-7.0-nts-vc14-x64.zip', maps: {'php_xdebug.dll':'php/ext/php_xdebug.dll'}}
+      - {type: 'dl', uri: 'https://ci.appveyor.com/api/buildjobs/7b47bfc24eynberd/artifacts/x64%2FRelease%2Fphp_tideways.dll' , maps: {'x64%2FRelease%2Fphp_tideways.dll':'php/ext/php_tideways.dll'}}
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/igbinary/2.0.1/php_igbinary-2.0.1-7.0-nts-vc14-x64.zip', maps: {'php_igbinary.dll': 'php/ext/php_igbinary.dll'}}
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/wincache/2.0.0.8/php_wincache-2.0.0.8-7.0-nts-vc14-x64.zip', maps: {'php_wincache.dll': 'php/ext/php_wincache.dll'}}
+ # CERTIFICATES
+      - {type: 'dl', uri: 'http://curl.haxx.se/ca/cacert.pem', maps: {'cacert.pem': '/cacert.pem'}}
+      - {type: 'file', 'action':'copy', 'source':'php/php.ini-production', 'destination':'php/php.ini'}
+      - {type: 'ini', 'key':curl.cainfo, 'value':'%RUNTIME%/cacert.pem'}
+      - {type: 'ini', 'key':openssl.cafile, 'value':'%RUNTIME%/cacert.pem'}
+ # EXTENSION DIR
+      - {type: 'ini', 'key':extension_dir, 'value':'%RUNTIME%/php/ext'}
+ # EXTENSION SETTINGS
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_intl.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_bz2.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_curl.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_enchant.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_exif.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_fileinfo.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_gettext.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_gd2.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_mbstring.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_openssl.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_soap.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_xmlrpc.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_wincache.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_pdo_mysql.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_xsl.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_igbinary.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_tideways.dll}
+      - {type: 'ini', multivalue: true, 'key':extension, 'value':php_com_dotnet.dll}
+      - {type: 'ini', multivalue: true, 'key':zend_extension, 'value':php_opcache.dll}
+ # MYSQL
+      - {type: 'ini', 'key':pdo_mysql.cache_size, 'value':2000}
+      - {type: 'ini', 'key':mysql.allow_persistent, 'value':On}    
+ # RUNTIME DIRECTORIES
+      - {type: 'ini', 'key':error_log, 'value':'%LOG%/php_error_%DEPLOYMENTID%.log', ensureDir: 'file'}
+      - {type: 'ini', 'key':upload_tmp_dir, 'value':'%TEMP%/upload_temp_dir', ensureDir: 'dir'}
+      - {type: 'ini', 'key':session.save_path, 'value':'%TEMP%/session_save_path/', ensureDir: 'file'}
+      - {type: 'ini', 'key':date.timezone, 'value':'Europe/Madrid'} 
+ # WINCACHE...
+      - {type: 'ini', 'key':wincache.fcenabled, 'value': 0}
+      - {type: 'ini', 'key':wincache.ucenabled, 'value': 1}
+      - {type: 'ini', 'key':wincache.fcachesize , 'value': 8}
+      - {type: 'ini', 'key':wincache.maxfilesize, 'value': 3000}
+      - {type: 'ini', 'key':wincache.ucachesize , 'value': 128}
+      - {type: 'ini', 'key':wincache.scachesize , 'value': 16}
+      - {type: 'ini', 'key':wincache.reroute_enabled , 'value': 0}
+      - {type: 'ini', 'key':wincache.filemapdir , 'value':'%RUNTIME%/wincache_filemap', ensureDir: 'dir'}
+      - {type: 'ini', 'key':wincache.enablecli , 'value':'On'}
+# TIDEWAYS
+      - {type: 'ini','key':tideways.api_key , 'value': 'xxx'}
+      - {type: 'ini','key':tideways.auto_prepend_library , 'value': 0}
+      - {type: 'ini','key':tideways.connection , 'value': 'tcp://127.0.0.1:8136'}
+      - {type: 'ini','key':tideways.sample_rate , 'value': 10}
+      - {type: 'ini','key':tideways.auto_start , 'value': 1}
+# GENERIC
+      - {type: 'ini','key':fastcgi.impersonate , 'value': 1}
+      - {type: 'ini','key':cgi.fix_pathinfo , 'value': 1}
+      - {type: 'ini','key':cgi.force_redirect , 'value': 0}
+      - {type: 'ini','key':fastcgi.logging , 'value': 0}
+      - {type: 'ini','key':realpath_cache_size , 'value': '5M'}
+      - {type: 'ini','key':realpath_cache_ttl , 'value': 1800}
+      - {type: 'ini','key':max_input_vars , 'value': 6000}
+      - {type: 'ini','key':memory_limit , 'value': 2048M}
+      - {type: 'ini','key':max_input_vars , 'value': 6000}
+      - {type: 'ini','key':max_execution_time , 'value': 600}
+      - {type: 'ini','key':upload_max_filesize , 'value': 32M}
+      - {type: 'ini','key':post_max_size , 'value': 32M}
+# OPCACHE
+      - {type: 'ini','key':opcache.enable , 'value': 1}
+      - {type: 'ini','key':opcache.memory_consumption , 'value': 256}
+      - {type: 'ini','key':opcache.max_accelerated_files , 'value': 25000}
+      - {type: 'ini','key':opcache.revalidate_freq , 'value': 2}
+      - {type: 'ini','key':opcache.interned_strings_buffer , 'value': 16}
+      - {type: 'ini','key':opcache.validate_timestamps , 'value': 1}
+      - {type: 'ini','key':opcache.enable_cli , 'value': 1}
+      - {type: 'ini','key':opcache.file_cache_only , 'value': 0}
+      - {type: 'ini','key':opcache.file_cache , 'value':'%RUNTIME%/opcache_filecache', ensureDir: 'dir'}
+services:
+  contents:
+    type: 'disk'
+    mounts:
+      var:
+        path: 'var'
+        mountpath: 'var'
+        persist_on_deploy: true
+      pub_static:
+        path: 'pub_static'
+        mountpath: 'pub/static'
+        persist_on_deploy: true
+      pub_media:
+        path: 'pub_media'
+        mountpath: 'pub/media'
+        persist_on_deploy: true
+      app_etc:
+        path: 'app_etc'
+        mountpath: 'app/etc'
+        persist_on_deploy: true
+      app_config_sandbox:
+        path: 'app_config_sandbox'
+        mountpath: 'app/config_sandbox'
+        persist_on_deploy: true       
+  cron:
+    type: 'scheduler'
+    commands: ['php bin\magento cron:run', 'php bin\magento setup:cron:run', 'php update\cron.php']
+    frequency: 5
+
diff --git a/chef/chef__local.yml b/chef/chef__local.yml
new file mode 100644
index 0000000..943bd13
--- /dev/null
+++ b/chef/chef__local.yml
@@ -0,0 +1,22 @@
+﻿# Only use this for environment with name "local"
+scope-environment-regex: 'local.*'
+deployers:
+  php:
+    runtime:
+      - {type: 'ini', multivalue: true, 'key':zend_extension, 'value':php_xdebug.dll}
+      - {type: 'ini','key':opcache.revalidate_freq , 'value': 1}
+      - {type: 'ini','key':opcache.validate_timestamps , 'value': 1}
+       # XDEBUG
+      - {type: 'ini', 'key':'xdebug.remote_enable', 'value':'on'} 
+      - {type: 'ini', 'key':'xdebug.remote_handler', 'value':'dbgp'} 
+      - {type: 'ini', 'key':'xdebug.remote_host', 'value':'127.0.0.1'} 
+      - {type: 'ini', 'key':'xdebug.remote_connect_back', 'value':'0'} 
+      - {type: 'ini', 'key':'xdebug.remote_port', 'value':'9000'} 
+      - {type: 'ini', 'key':'xdebug.remote_mode', 'value':'req'} 
+      - {type: 'ini', 'key':'xdebug.remote_autostart', 'value':'0'} 
+      - {type: 'ini', 'key':'xdebug.idekey', 'value':'php-vs'}  
+      - {type: 'ini', 'key':'xdebug.profiler_output_dir', 'value':'%LOG%/xdebug_profile', ensureDir: 'dir'}
+      - {type: 'ini', 'key':'xdebug.trace_output_dir', 'value':'%LOG%/xdebug_trace', ensureDir: 'dir'}
+      - {type: 'ini', 'key':'xdebug.remote_log', 'value':'%LOG%/remote_%DEPLOYMENTID%.log', ensureDir: 'file'}
+      - {type: 'ini', 'key':'xdebug.trace_output_name', 'value':'trace.%u'}
+      - {type: 'ini', 'key':'xdebug.profiler_output_name', 'value':'profile.%u'}  
\ No newline at end of file

From 2e5d95bd93453506eaba9f9ca698765165df8bb9 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sat, 13 Jan 2018 10:00:41 +0100
Subject: [PATCH 16/17] Fix remote uri for PHP.

---
 chef/chef.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/chef/chef.yml b/chef/chef.yml
index 660d026..9901f99 100644
--- a/chef/chef.yml
+++ b/chef/chef.yml
@@ -27,7 +27,7 @@ deployers:
   php:
     type: 'php'
     runtime:
-      - {type: 'dl', uri: 'http://windows.php.net/downloads/releases/php-7.0.23-nts-Win32-VC14-x64.zip', maps: {'*' : 'php/'}}
+      - {type: 'dl', uri: 'http://windows.php.net/downloads/releases/archives/php-7.0.23-nts-Win32-VC14-x64.zip', maps: {'*' : 'php/'}}
       - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/xdebug/2.5.5/php_xdebug-2.5.5-7.0-nts-vc14-x64.zip', maps: {'php_xdebug.dll':'php/ext/php_xdebug.dll'}}
       - {type: 'dl', uri: 'https://ci.appveyor.com/api/buildjobs/7b47bfc24eynberd/artifacts/x64%2FRelease%2Fphp_tideways.dll' , maps: {'x64%2FRelease%2Fphp_tideways.dll':'php/ext/php_tideways.dll'}}
       - {type: 'dl', uri: 'http://windows.php.net/downloads/pecl/releases/igbinary/2.0.1/php_igbinary-2.0.1-7.0-nts-vc14-x64.zip', maps: {'php_igbinary.dll': 'php/ext/php_igbinary.dll'}}

From b7db9cee075b267a77d6103733a4e8afe929f4d4 Mon Sep 17 00:00:00 2001
From: David Garcia <deivid.garcia.garcia@gmail.com>
Date: Sat, 13 Jan 2018 12:10:51 +0100
Subject: [PATCH 17/17] Fix pub/static rewrite rules.

---
 web.config | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/web.config b/web.config
index 6d0cf67..d06405f 100644
--- a/web.config
+++ b/web.config
@@ -81,14 +81,14 @@
 					<clear/>
 					<rule name="Imported Rule 1-1 - pub" stopProcessing="false">
 						<match url="^pub/static/version.+?/(.+)$" ignoreCase="false" />
-						<action type="Rewrite" url="{R:1}" />
+						<action type="Rewrite" url="pub/static/{R:1}" />
 					</rule>
 					<rule name="Imported Rule 2" stopProcessing="false">
-						<match url=".*" ignoreCase="false" />
+						<match url="^pub/static/(.+)$" ignoreCase="false" />
 						<conditions logicalGrouping="MatchAll">
 							<add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
 						</conditions>
-						<action type="Rewrite" url="pub/static.php?resource={R:0}" appendQueryString="false" />
+						<action type="Rewrite" url="pub/static.php?resource={R:1}" appendQueryString="false" />
 					</rule>
 				</rules>
 			</rewrite>
